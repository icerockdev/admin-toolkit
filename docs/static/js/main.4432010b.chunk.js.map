{"version":3,"sources":["application/components/EntityViewer/index.tsx","application/components/EntityViewer/styles.ts","application/components/EntityFieldString/index.tsx","application/components/EntityFieldBoolean/index.tsx","application/components/EntityFieldDate/index.tsx","application/components/EntityFieldSelect/index.tsx","application/components/EntityFieldPhone/index.tsx","application/components/EntityFieldRichText/index.tsx","application/components/EntityFieldNumber/index.tsx","application/components/EntityFieldDatetime/index.tsx","application/components/EntityFieldReferenceSelect/index.tsx","application/components/EntityFieldDateRange/index.tsx","components/pages/Filter/index.tsx","components/pages/Filter/styles.ts","application/components/EntityHead/index.tsx","application/components/EntityHead/styles.ts","application/components/EntityHeadSortable/index.tsx","application/components/EntityList/index.tsx","application/components/EntityList/styles.ts","application/components/EntityFieldBase64/index.tsx","application/components/EntityFieldBase64/styles.ts","application/components/EntityFooter/index.tsx","application/components/EntityFooter/styles.ts","application/components/EntityBreadcrumbs/index.tsx","application/components/EntityBreadcrumbs/styles.ts","application/types/index.ts","application/components/index.tsx","containers/login/styles.ts","containers/login/SignIn/index.tsx","containers/layout/Account/index.tsx","containers/layout/Account/styles.ts","containers/layout/Navigation/index.tsx","containers/layout/Navigation/styles.ts","application/modules/PageRenderer/index.tsx","containers/login/ForgotPassword/index.tsx","containers/login/ResetPassword/index.tsx","application/modules/Application/index.tsx","application/modules/Application/styles.ts","application/modules/AuthProvider/index.tsx","application/modules/JWTAuthProvider/index.tsx","containers/login/Notification/index.tsx","application/modules/Notification/index.tsx","application/modules/Config/index.tsx","application/modules/Page/index.tsx","application/modules/Entity/index.tsx","utils/query.ts","assets/logo512.png","application/types/entity.ts","example/entity/mocked_data.ts","example/entity/api.ts","example/entity/fields.ts","example/entity/index.tsx","example/page/index.ts","example/jwtAuth/index.ts","example/custom/index.tsx","example/index.ts","index.tsx","application/index.ts","application/types/auth.ts","application/components/EntityField/index.tsx"],"names":["EntityViewer","withStyles","theme","grid","display","gridTemplateColumns","wrap","marginBottom","spacing","margin","width","field","color","fontSize","fontWeight","fontFamily","typography","padding","boxShadow","marginTop","loader","alignItems","justifyContent","minHeight","buttons","gridColumnStart","gridColumnEnd","observer","classes","id","fields","errors","onSave","onCancel","onResetFieldError","isLoading","data","setEditorData","getItem","cancelGetItem","withToken","isEditing","entity","isCreating","useMemo","visibleFields","filter","hideInEdit","hideInCreate","hideInView","onFieldChange","useCallback","f","value","onSubmit","event","preventDefault","useEffect","className","CircularProgress","Paper","style","flexWrap","map","key","name","label","required","EntityField","error","handler","Grid","container","item","flex","Button","type","variant","onClick","EntityFieldString","placeholder","text","replace","onChange","target","helperText","dangerouslySetInnerHTML","__html","String","EntityFieldBoolean","control","checked","EntityFieldDate","isValid","toISOString","parsedValue","date","parseISO","formatISO","renderInput","props","format","EntityFieldSelect","options","ref","useRef","useState","labelWidth","setLabelWidth","current","clientWidth","htmlFor","whiteSpace","inputProps","minWidth","Object","keys","EntityFieldPhone","mask","toString","EntityFieldRichText","val","setVal","contentHTML","convertFromHTML","state","ContentState","createFromBlockArray","contentBlocks","entityMap","JSON","stringify","convertToRaw","draftToHtml","getCurrentContent","controls","EntityFieldNumber","parseFloat","toFixed","accuracy","step","EntityFieldDateTime","ampm","EntityFieldReferenceSelect","referenceData","EntityFieldDateRange","isFiltering","filtered","valueOf","join","parsed","split","length","Date","startProps","endProps","Filter","wrapper","flexDirection","paddingLeft","marginRight","position","top","left","formControl","select","input","borderRadius","backgroundColor","paddingTop","transform","clear","height","iconButton","filterButton","filters","filterData","setFilters","applyFilter","buttonRef","setButtonRef","onSelectField","setFilterValue","i","index","removeFilter","_","filterableFields","filterable","selectableFields","some","currentFilters","find","onMenuOpen","onMenuClose","aria-controls","aria-haspopup","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","anchorEl","onClose","open","MenuItem","ListItemText","primary","tabIndex","IconButton","EntityHead","header","lineHeight","border","title","flexGrow","paddingRight","export","canCreate","canExport","url","onExport","clearFilter","justify","component","RouterLink","to","EntityHeadSortable","children","active","onSortChange","direction","TableCell","TableSortLabel","ENTITY_SORT_DIRS","DESC","EntityList","table","verticalAlign","button","boxSizing","borderLeft","palette","main","button_active","background","dark","extra","selected","sortBy","sortDir","canView","canEdit","canSelect","setSelected","onRowClick","before","after","firstRow","lastRow","tableHead","expanded","setExpanded","hideInList","history","useHistory","onRowClicked","push","onSelect","includes","el","isAllSelected","onSelectAll","colSpan","onExtraClose","omit","TableContainer","Table","TableHead","TableRow","Checkbox","sortable","TableBody","entry","hover","size","align","classnames","createElement","EntityFieldBase64Image","opacity","outlinedInput","image","backgroundSize","backgroundPosition","preview","maxWidth","maxHeight","innerError","setInnerError","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","loadImage","e","a","files","maxSize","minSize","allowedMimeType","photo","img","Image","src","naturalWidth","naturalHeight","minViewBox","maxViewBox","FormControl","backgroundImage","OutlinedInput","fullWidth","inputComponent","startIcon","accept","mimes","Box","labelDisplayedRows","page","items","from","count","Math","ceil","EntityFooter","floater","bottom","zIndex","pager","borderTop","marginLeft","totalCount","itemsPerPage","setPage","setPerPage","onChangeRowsPerPage","parseInt","onChangePage","newPage","getBoundingClientRect","TablePagination","rowsPerPageOptions","labelRowsPerPage","rowsPerPage","EntityBreadcrumbs","breadcrumbs","viewable","editable","Breadcrumbs","aria-label","Link","Typography","createStyles","paper","forgot","cursor","SignIn","styles","withTheme","onForgotScreenClick","email","setEmail","password","setPassword","onSubmitCapture","onEmailChange","onPasswordChange","Container","noValidate","TextField","autoComplete","defaultValue","autoFocus","InputProps","endAdornment","InputAdornment","disabled","Account","account","accountCircle","textTransform","username","role","onLogout","isMenuOpen","setIsMenuOpen","charAt","keepMounted","Navigation","appbar","toolbar","fill","links","logo","tab","tabs","link","textDecoration","content","window","location","pathname","setLocation","listen","onTabChange","activeTab","findIndex","AppBar","Toolbar","alt","Tabs","indicatorColor","textColor","scrollButtons","Tab","PageRenderer","onMount","onUnmount","output","ForgotPassword","ResetPassword","token","passwordRepeat","setPasswordRepeat","onPasswordRepeatChange","Application","config","pages","menu","canList","auth","user","roleTitles","onForgotPassword","authPasswRestoreFn","undefined","isLogged","sendAuthRequest","ThemeProvider","CssBaseline","path","render","sendAuthPasswRestore","params","sendAuthPasswUpdate","match","notifications","Output","dateAdapter","DateFnsAdapter","locale","ruLocale","logout","AuthProvider","sendAuthRequestInstance","sendAuthRequestCancel","cancel","sendAuthPasswRestoreInstance","sendAuthPasswRestoreCancel","sendAuthPasswUpdateInstance","sendAuthPasswUpdateCancel","getPersistedCredentials","parse","localStorage","persistCredentials","setItem","assign","this","persist","EMPTY_USER","reaction","observable","action","flow","authRequestFn","catch","response","Error","parent","showError","bind","showSuccess","authPasswUpdateFn","newPasswordValidator","req","args","UNAUTHORIZED","computed","EMPTY_TOKENS","access","refresh","JWTAuthProvider","tokenRefreshInstanceInstance","tokens","persistTokens","AUTH_ERRORS","CANT_LOGIN","hideNotification","tokenRefreshFn","Notification","show","message","timeout","Snackbar","autoHideDuration","Alert","severity","Notifications","notification","Config","createMuiTheme","createBrowserHistory","forEach","Page","roles","all","list","enabled","Entity","fetchItemsInstance","getFilters","toJS","fetchItems","fetchItemsCancel","updateItemInstance","isValidField","validator","getItemsCancel","getItemsInstance","update","create","ListHeadTitle","ListHeadButtons","exportData","exportable","creatable","ListExtra","selectable","setSort","ListHead","ListBody","ListFooter","editorData","ViewerHeadButtons","editorFieldErrors","onEditCancel","resetFieldError","ViewerHead","ViewerBody","ViewerFooter","EditorHeadButtons","updateItem","EditorHead","EditorBody","EditorFooter","CreatorHeadButtons","createItem","createEmptyItem","CreatorHead","CreatorBody","CreatorFooter","Creator","Editor","Viewer","List","method","ASC","api","fetchItemsFn","ENTITY_ERRORS","CANT_LOAD_ITEMS","references","prototype","hasOwnProperty","call","ENTITY_REFERENCE_FIELDS","getMany","refResults","reduce","obj","res","validateSubmitFields","INCORRECT_INPUT","updateItemsFn","goBack","createItemsFn","FIELD_IS_REQUIRED","get","getItemsFn","getFiltersFromHash","setFiltersWindowHash","hideInExport","rows","csv","uri","encodeURI","saveAs","URLSearchParams","_page","_sortBy","_sortDir","_items","hash","query","queryString","pairs","substr","pair","decodeURIComponent","parseQuery","slice","module","exports","ENTITY_FIELD_RENDERS","string","datetime","daterange","boolean","phone","richtext","base64image","number","referenceSelect","getEntityFieldRenderer","CANT_UPDATE_ITEM","SAMPLE_ENTITY_1","created","createdTime","visible","SAMPLE_ENTITY_2","fetchEntityItemsFn","console","log","setTimeout","Array","totalPages","getEntityFn","updateEntityFn","createEntityFn","getEntityTypeVariants","1","2","3","SAMPLE_ENTITY_FIELDS","seed","random","jwtAuth","custom","ReactDOM","example","document","getElementById","cb"],"mappings":"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","file":"static/js/main.4432010b.chunk.js","sourcesContent":["/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useCallback, useEffect, useMemo } from 'react';\n\nimport {\n  Button,\n  CircularProgress,\n  Grid,\n  Paper,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { IEntityField } from '~/application';\nimport { observer } from 'mobx-react';\nimport { EntityField } from '../EntityField';\nimport { Entity } from '~/application/modules';\n\ntype IProps = WithStyles<typeof styles> & {\n  url: string;\n  id?: string;\n  fields: IEntityField[];\n  errors: Record<string, string>;\n  isEditing: boolean;\n  isLoading: boolean;\n  data: Record<string, any>;\n  viewable: boolean;\n  entity: Entity;\n\n  setEditorData: (data: Record<string, any>) => void;\n  getItem: (id: any) => void;\n  cancelGetItem: () => void;\n  onSave: () => void;\n  onCancel: () => void;\n  onResetFieldError: (field: string) => void;\n  withToken?: (req: any, args: any) => any;\n};\n\nconst EntityViewer = withStyles(styles)(\n  observer(\n    ({\n      classes,\n      id,\n      fields,\n      errors,\n      onSave,\n      onCancel,\n      onResetFieldError,\n      isLoading,\n      data,\n      setEditorData,\n      getItem,\n      cancelGetItem,\n      withToken,\n      isEditing,\n      entity,\n    }: IProps) => {\n      const isCreating = useMemo(() => typeof id === 'undefined', [id]);\n\n      const visibleFields = useMemo(\n        () =>\n          fields.filter(\n            (field) =>\n              (isEditing && !isCreating && !field.hideInEdit) ||\n              (isCreating && !field.hideInCreate) ||\n              (!isEditing && !isCreating && !field.hideInView)\n          ),\n        [fields, isEditing, isCreating]\n      );\n\n      const onFieldChange = useCallback(\n        (f) => (value: any) => {\n          if (errors[f]) {\n            onResetFieldError(f);\n          }\n\n          setEditorData({ ...data, [f]: value });\n        },\n        [data, setEditorData, errors]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          onSave();\n        },\n        [onSave]\n      );\n\n      useEffect(() => {\n        getItem(id);\n        return () => cancelGetItem();\n      }, [id]);\n\n      if (isLoading) {\n        return (\n          <div className={classes.loader}>\n            <CircularProgress />\n          </div>\n        );\n      }\n\n      return (\n        <div className={classes.wrap}>\n          {data && (\n            <form onSubmit={onSubmit}>\n              <Paper>\n                <div className={classes.grid} style={{ flexWrap: 'wrap' }}>\n                  {visibleFields.map((field) => (\n                    <div className={classes.field} key={field.name}>\n                      {!isEditing && (\n                        <div className=\"label\">\n                          {field.label || field.name}\n                          {isEditing && field.required && <span>{` *`}</span>}\n                        </div>\n                      )}\n                      <div className=\"field\">\n                        <EntityField\n                          name={field.name}\n                          data={data}\n                          fields={fields}\n                          isEditing={isEditing}\n                          error={errors[field.name]}\n                          handler={onFieldChange(field.name)}\n                          withToken={withToken}\n                          entity={entity}\n                        />\n                      </div>\n                    </div>\n                  ))}\n\n                  {isEditing && (\n                    <div className={`${classes.field} ${classes.buttons}`}>\n                      <Grid container spacing={1}>\n                        <Grid item style={{ flex: 1 }} />\n\n                        <Grid item>\n                          <Button\n                            type=\"button\"\n                            color=\"default\"\n                            variant=\"outlined\"\n                            onClick={onCancel}\n                          >\n                            \n                          </Button>\n                        </Grid>\n\n                        <Grid item>\n                          <Button\n                            type=\"submit\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                          >\n                            \n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </div>\n                  )}\n                </div>\n              </Paper>\n            </form>\n          )}\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityViewer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  grid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(500px, 1fr))',\n  },\n  wrap: {\n    marginBottom: theme.spacing(4),\n    margin: 0,\n    '& .MuiFormControl-root': {\n      width: '100%',\n    },\n  },\n  field: {\n    color: '#282f36',\n    fontSize: '17px',\n    fontWeight: 400,\n    fontFamily: theme.typography.fontFamily,\n    padding: `${theme.spacing(4)}px ${theme.spacing(3)}px`,\n    boxShadow: '#e1e8ee 1px -1px',\n    '& > .label': {\n      display: 'block',\n      color: '#a5b0bf',\n      fontSize: '14px',\n    },\n    '& > .field': {\n      marginTop: theme.spacing(1),\n      display: 'block',\n    },\n  },\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  buttons: {\n    gridColumnStart: 1,\n    gridColumnEnd: -1,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { TextField } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldString: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  placeholder,\n}) => {\n  const text = useMemo(\n    () =>\n      (value &&\n        value\n          .replace(/</g, '&lt;')\n          .replace(/>/g, '&gt;')\n          .replace(\n            /(\\b(https?|ftp|file):\\/\\/([-A-Z0-9+&@#%?=~_|!:,.;]*)([-A-Z0-9+&@#%?\\/=~_|!:,.;]*)[-A-Z0-9+&@#\\/%=~_|])/gi,\n            '<a href=\"$1\" target=\"blank\" rel=\"nofollow\">$1</a>'\n          )) ||\n      '',\n    [value]\n  );\n\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <TextField\n        label={label}\n        value={value || ''}\n        onChange={onChange}\n        error={!!error}\n        helperText={error}\n        variant=\"outlined\"\n        placeholder={placeholder || ''}\n      />\n    </div>\n  ) : (\n    <div\n      onClick={onClick}\n      dangerouslySetInnerHTML={{ __html: text ? String(text) : '&nbsp;' }}\n    />\n  );\n};\n\nexport { EntityFieldString };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { IEntityFieldProps } from '~/application';\nimport { Checkbox, FormControlLabel } from '@material-ui/core';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldBoolean: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(() => {\n    if (!handler) return;\n\n    handler(!value);\n  }, [value, handler]);\n\n  return isEditing ? (\n    <FormControlLabel\n      control={<Checkbox onChange={onChange} checked={value || false} />}\n      label={label}\n    />\n  ) : (\n    <div onClick={onClick}>{!!value ? <CheckIcon /> : <ClearIcon />}</div>\n  );\n};\n\nexport { EntityFieldBoolean };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DatePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { formatISO, isValid } from 'date-fns';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDate: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler || !isValid(value)) return;\n      handler(value.toISOString());\n    },\n    [value, handler]\n  );\n\n  const parsedValue = useMemo(() => {\n    const date = parseISO(value);\n\n    return (date && isValid(date) && formatISO(date)) || '';\n  }, [value]);\n\n  return isEditing ? (\n    <div className=\"datepicker datepicker_date\">\n      <DatePicker\n        renderInput={(props) => (\n          <TextField\n            variant=\"outlined\"\n            {...props}\n            label={label}\n            helperText=\"\"\n          />\n        )}\n        value={parsedValue}\n        onChange={onChange}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {parsedValue ? (\n        format(parseISO(parsedValue), 'dd.MM.yyyy')\n      ) : (\n        <div>&nbsp;</div>\n      )}\n    </div>\n  );\n};\n\nexport { EntityFieldDate };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useRef, useEffect, useState } from 'react';\nimport { Select, MenuItem, FormControl, InputLabel } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldSelect: FC<IProps> = ({\n  name,\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options,\n  entity,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  const ref = useRef<HTMLLabelElement>(null);\n  const [labelWidth, setLabelWidth] = useState(0);\n\n  useEffect(() => {\n    setLabelWidth((ref.current && ref.current.clientWidth) || 0);\n  }, [ref.current]);\n\n  return isEditing ? (\n    <FormControl variant=\"outlined\">\n      <InputLabel htmlFor={label} style={{ whiteSpace: 'nowrap' }} ref={ref}>\n        {label}\n      </InputLabel>\n\n      <Select\n        variant=\"outlined\"\n        id={label}\n        name={label}\n        value={!value ? '' : value}\n        onChange={onChange}\n        error={!!error}\n        inputProps={{ className: 'select' }}\n        labelWidth={labelWidth}\n        style={{ minWidth: labelWidth + 40 }}\n      >\n        <MenuItem value=\"\">...</MenuItem>\n\n        {options &&\n          Object.keys(options).map((item) => (\n            <MenuItem key={item} value={item}>\n              {options[item]}\n            </MenuItem>\n          ))}\n      </Select>\n    </FormControl>\n  ) : (\n    <div onClick={onClick}>\n      {(options && options[value]) || <div>&nbsp;</div>}\n    </div>\n  );\n};\n\nexport { EntityFieldSelect };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport InputMask from 'react-input-mask';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldPhone: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value.replace(/[^\\d]/gim, ''));\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <InputMask\n        mask=\"+9 (999) 999-99-99\"\n        value={value ? value.toString() : ''}\n        onChange={onChange}\n      >\n        {() => (\n          <TextField\n            label={label}\n            error={!!error}\n            helperText={error}\n            variant=\"outlined\"\n          />\n        )}\n      </InputMask>\n    </div>\n  ) : (\n    <div onClick={onClick}>{value ? String(value) : <div>&nbsp;</div>}</div>\n  );\n};\n\nexport { EntityFieldPhone };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useState, useEffect } from 'react';\nimport MUIRichTextEditor from 'mui-rte';\nimport { convertFromHTML } from 'draft-js';\nimport { convertToRaw, ContentState } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldRichText: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const [val, setVal] = useState('');\n\n  useEffect(() => {\n    const contentHTML = convertFromHTML(value || '');\n    const state = ContentState.createFromBlockArray(\n      contentHTML.contentBlocks,\n      contentHTML.entityMap\n    );\n\n    setVal(JSON.stringify(convertToRaw(state)));\n  }, []);\n\n  const onChange = useCallback(\n    (data) => {\n      if (!handler) return;\n      const text = draftToHtml(convertToRaw(data.getCurrentContent()));\n      handler(text || '');\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <MUIRichTextEditor\n        label={label}\n        value={val || ''}\n        onChange={onChange}\n        error={!!error}\n        controls={[\n          'title',\n          'bold',\n          'italic',\n          'underline',\n          'strikethrough',\n          'undo',\n          'redo',\n          'numberList',\n          'bulletList',\n          'quote',\n          'clear',\n        ]}\n      />\n    </div>\n  ) : (\n    (value && (\n      <div onClick={onClick} dangerouslySetInnerHTML={{ __html: value }} />\n    )) || <div>&nbsp;</div>\n  );\n};\n\nexport { EntityFieldRichText };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldNumber: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options,\n  placeholder,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  const val =\n    (value &&\n      parseFloat(value) &&\n      parseFloat(parseFloat(value).toFixed(options?.accuracy || 6))) ||\n    0;\n\n  return isEditing ? (\n    <div>\n      <TextField\n        type=\"number\"\n        label={label}\n        value={value || ''}\n        onChange={onChange}\n        error={!!error}\n        helperText={error}\n        variant=\"outlined\"\n        inputProps={{ step: 'any' }}\n        placeholder={placeholder || ''}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>{val || 0}</div>\n  );\n};\n\nexport { EntityFieldNumber };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { formatISO, isValid } from 'date-fns';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDateTime: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler || !isValid(value)) return;\n      handler(value.toISOString());\n    },\n    [value, handler]\n  );\n\n  const parsedValue = useMemo(() => {\n    const date = parseISO(value);\n\n    return (date && isValid(date) && formatISO(date)) || '';\n  }, [value]);\n\n  return isEditing ? (\n    <div className=\"datepicker datepicker_datetime\">\n      <DateTimePicker\n        renderInput={(props) => (\n          <TextField\n            variant=\"outlined\"\n            {...props}\n            label={label}\n            helperText=\"\"\n          />\n        )}\n        value={parsedValue}\n        onChange={onChange}\n        ampm={false}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {parsedValue ? (\n        format(parseISO(parsedValue), 'dd.MM.yyyy HH:mm')\n      ) : (\n        <div>&nbsp;</div>\n      )}\n    </div>\n  );\n};\n\nexport { EntityFieldDateTime };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  MouseEventHandler,\n  useCallback,\n  useRef,\n  useState,\n  useEffect,\n} from 'react';\nimport { Select, MenuItem, FormControl, InputLabel } from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldReferenceSelect: FC<IProps> = observer(\n  ({ label, value, handler, error, isEditing, onClick, options }) => {\n    const ref = useRef<HTMLLabelElement>(null);\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n        handler(event.target.value);\n      },\n      [value, handler]\n    );\n\n    const [labelWidth, setLabelWidth] = useState(0);\n\n    useEffect(() => {\n      setLabelWidth((ref.current && ref.current.clientWidth) || 0);\n    }, [ref.current]);\n\n    return isEditing ? (\n      <FormControl variant=\"outlined\">\n        <InputLabel htmlFor={label} style={{ whiteSpace: 'nowrap' }} ref={ref}>\n          {label}\n        </InputLabel>\n\n        <Select\n          variant=\"outlined\"\n          id={label}\n          name={label}\n          label={label}\n          value={!value ? '' : value}\n          onChange={onChange}\n          error={!!error}\n          inputProps={{ className: 'select' }}\n          labelWidth={labelWidth}\n          style={{ minWidth: labelWidth + 40 }}\n        >\n          <MenuItem value=\"\">...</MenuItem>\n\n          {options &&\n            options.referenceData &&\n            Object.keys(options.referenceData).map((item) => (\n              <MenuItem key={item} value={item}>\n                {options.referenceData[item]}\n              </MenuItem>\n            ))}\n        </Select>\n      </FormControl>\n    ) : (\n      <div onClick={onClick}>\n        {(options && options.referenceData && options.referenceData[value]) || (\n          <div>&nbsp;</div>\n        )}\n      </div>\n    );\n  }\n);\n\nexport { EntityFieldReferenceSelect };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DateRangePicker } from '@material-ui/pickers';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { isValid } from 'date-fns';\n\nimport { IEntityFieldProps } from '~/application';\nimport { ParsableDate } from '@material-ui/pickers/constants/prop-types';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDateRange: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  isFiltering,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler) return;\n\n      const filtered = value.map(\n        (val: Date) => (val && val.valueOf() && val.toISOString()) || ''\n      );\n\n      handler(filtered.join(','));\n    },\n    [value, handler]\n  );\n\n  const parsed = useMemo<[ParsableDate, ParsableDate]>(() => {\n    if (!value) return [null, null];\n\n    const split = value && value.split(',');\n\n    if (!split || split.length !== 2) return [null, null];\n\n    return split.map(\n      (date: string) => (isValid(new Date(date)) && parseISO(date)) || null\n    );\n  }, [value]);\n\n  if (!isFiltering) return null;\n\n  return (\n    <div className=\"datepicker datepicker_range\">\n      <DateRangePicker\n        mask=\"__.__.____\"\n        renderInput={(startProps, endProps) => (\n          <>\n            <TextField\n              {...startProps}\n              variant=\"outlined\"\n              helperText={label}\n              label=\"\"\n            />\n            <TextField\n              {...endProps}\n              variant=\"outlined\"\n              helperText=\"\"\n              label=\"\"\n            />\n          </>\n        )}\n        value={parsed}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport { EntityFieldDateRange };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useCallback, Fragment, useMemo, useState } from 'react';\n\nimport {\n  withStyles,\n  WithStyles,\n  MenuItem,\n  IconButton,\n  Menu,\n  ListItemText,\n  Button,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { IEntityProps, IFilterValue } from '~/application/types/entity';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport FilterIcon from '@material-ui/icons/FilterList';\nimport { EntityField } from '~/application/components/EntityField';\nimport { observer } from 'mobx-react';\nimport { Entity } from '~/application';\nimport { toJS } from 'mobx';\n\ntype IProps = WithStyles<typeof styles> & {\n  fields: IEntityProps['fields'];\n  filters: IFilterValue[];\n  filterData: Record<string, any>;\n  entity: Entity;\n\n  clearFilter: () => void;\n  applyFilter: () => void;\n  setFilters: (filters: IFilterValue[]) => void;\n  withToken?: (req: any, args: any) => void;\n};\n\nconst Filter = withStyles(styles)(\n  observer(\n    ({\n      classes,\n      fields,\n      filters,\n      filterData,\n      setFilters,\n      applyFilter,\n      withToken,\n      entity,\n    }: IProps) => {\n      const [buttonRef, setButtonRef] = useState<any>(null);\n\n      const onSelectField = useCallback(\n        (value) => {\n          setFilters([...filters, { name: String(value), value: '' }]);\n          setButtonRef(null);\n        },\n        [setButtonRef, setFilters, filters]\n      );\n\n      const setFilterValue = useCallback(\n        (i: number) => (value: any) => {\n          setFilters(\n            filters.map((filter, index) =>\n              i === index ? { ...filter, value } : filter\n            )\n          );\n        },\n        [filters, setFilters]\n      );\n\n      const removeFilter = useCallback(\n        (i: number) => () => {\n          setFilters(filters.filter((_, index) => i !== index));\n          applyFilter();\n        },\n        [filters, setFilters]\n      );\n\n      const filterableFields = useMemo(\n        () => fields.filter((field) => field.filterable),\n        [fields]\n      );\n\n      const selectableFields = useMemo(\n        () =>\n          filterableFields.filter(\n            (field) => !filters.some((filter) => filter.name === field.name)\n          ),\n        [filterableFields, filters]\n      );\n\n      const currentFilters = useMemo(\n        () =>\n          filters\n            .map((filter) =>\n              filterableFields.find((field) => field.name === filter.name)\n            )\n            .filter((field) => !!field) || [],\n        [filterableFields, filters]\n      );\n\n      const onCancel = useCallback(\n        (event) => {\n          event.preventDefault();\n          setFilters([]);\n          applyFilter();\n        },\n        [applyFilter]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          applyFilter();\n        },\n        [applyFilter]\n      );\n\n      const onMenuOpen = useCallback((event) => setButtonRef(event.target), [\n        setButtonRef,\n      ]);\n\n      const onMenuClose = useCallback((event) => setButtonRef(null), [\n        setButtonRef,\n      ]);\n\n      return (\n        <form className={classes.wrapper} onSubmit={onSubmit}>\n          {selectableFields.length > 0 && (\n            <>\n              <Button\n                aria-controls=\"customized-menu\"\n                aria-haspopup=\"true\"\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={onMenuOpen}\n                className={classes.filterButton}\n              >\n                <FilterIcon />\n              </Button>\n\n              {buttonRef && (\n                <Menu\n                  id=\"customized-menu\"\n                  elevation={0}\n                  getContentAnchorEl={null}\n                  anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                  }}\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  anchorEl={buttonRef}\n                  onClose={onMenuClose}\n                  open={!!buttonRef}\n                >\n                  {selectableFields.map((field) => (\n                    <MenuItem\n                      key={field.name}\n                      onClick={() => onSelectField(field.name)}\n                    >\n                      <ListItemText primary={field.label || field.name} />\n                    </MenuItem>\n                  ))}\n                </Menu>\n              )}\n            </>\n          )}\n\n          {currentFilters.length > 0 && (\n            <Fragment>\n              <Button\n                onClick={applyFilter}\n                tabIndex={0}\n                color=\"primary\"\n                variant=\"outlined\"\n                className={classes.filterButton}\n              >\n                <CheckIcon />\n              </Button>\n            </Fragment>\n          )}\n\n          {currentFilters.length > 0 && (\n            <Fragment>\n              <Button\n                onClick={onCancel}\n                tabIndex={0}\n                color=\"secondary\"\n                variant=\"outlined\"\n                className={classes.filterButton}\n              >\n                <ClearIcon />\n              </Button>\n            </Fragment>\n          )}\n\n          {currentFilters.map(\n            (field, i) =>\n              field && (\n                <div className={classes.input} key={field.name}>\n                  <EntityField\n                    name={field.name}\n                    fields={fields}\n                    data={{ ...filterData, [field.name]: filters[i].value }}\n                    handler={setFilterValue(i)}\n                    withToken={withToken}\n                    entity={entity}\n                    isEditing\n                    isFiltering\n                  />\n\n                  <IconButton\n                    color=\"secondary\"\n                    onClick={removeFilter(i)}\n                    className={classes.clear}\n                    tabIndex={0}\n                  >\n                    <ClearIcon />\n                  </IconButton>\n                </div>\n              )\n          )}\n        </form>\n      );\n    }\n  )\n);\n\nexport { Filter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap' as 'wrap',\n    flexDirection: 'row-reverse' as 'row-reverse',\n    paddingLeft: 10,\n    margin: '0 !important',\n\n    '@media(max-width: 640px)': {\n      width: '100%',\n    },\n\n    '& .MuiInputLabel-outlined': {\n      whiteSpace: 'nowrap',\n    },\n\n    '& > *': {\n      marginRight: 10,\n      marginTop: 5,\n      marginBottom: 5,\n    },\n\n    '& .datepicker .MuiFormHelperText-contained ': {\n      position: 'absolute',\n      top: -13,\n      left: 0,\n      whiteSpace: 'nowrap',\n    },\n\n    '& .datepicker_range input': {\n      width: 90,\n    },\n\n    '& .datepicker_range .MuiPickersDateRangePickerInput-rangeInputsContainer': {\n      flexDirection: 'row !important',\n    },\n\n    '& .datepicker_datetime input': {\n      width: 130,\n    },\n\n    '& .datepicker_date input': {\n      width: 90,\n    },\n  },\n  formControl: {\n    margin: `0 ${theme.spacing(1)}px 0 0`,\n    minWidth: 120,\n  },\n  select: {\n    '& > div': {\n      padding: '10px 14px 7px',\n    },\n  },\n  input: {\n    display: 'flex',\n    boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 1px',\n    borderRadius: '0 4px 4px 0',\n    backgroundColor: 'white',\n    minHeight: 50,\n    alignItems: 'center',\n    paddingTop: 13,\n\n    '& .select': {\n      padding: '10px 34px 7px 14px',\n    },\n    '& input': {\n      padding: '10px 14px 7px',\n    },\n    '& label': {\n      transform: 'translate(10px, 12px) scale(0.9)',\n    },\n  },\n  clear: {\n    height: 36,\n    width: 36,\n    padding: 0,\n  },\n  label: {\n    transform: 'translate(10px, 12px) scale(0.9)',\n  },\n  iconButton: {\n    height: 50,\n    width: 50,\n    padding: 0,\n  },\n  filterButton: {\n    padding: 0,\n    minWidth: 50,\n    height: 50,\n\n    '& span': {\n      width: 'auto',\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, ReactElement } from 'react';\nimport { withStyles, WithStyles, Grid, Button } from '@material-ui/core';\nimport styles from './styles';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { IEntityProps } from '~/application';\nimport { Filter } from '~/components/pages/Filter';\nimport { Entity } from '~/application/modules';\n\ntype IProps = WithStyles<typeof styles> & {\n  title: ReactElement;\n  buttons: ReactElement;\n  canCreate: boolean;\n  canExport: boolean;\n  url: string;\n  filters: IEntityProps['filters'];\n  fields: IEntityProps['fields'];\n  filterData: Record<string, any>;\n  entity: Entity;\n\n  setFilters: (filters: IEntityProps['filters']) => void;\n  applyFilter: () => void;\n  onExport: () => void;\n  withToken?: (req: any, args: any) => void;\n};\n\nconst EntityHeadUnstyled: FC<IProps> = ({\n  classes,\n  title,\n  buttons,\n  filters,\n  fields,\n  canCreate,\n  canExport,\n  url,\n  filterData,\n  entity,\n\n  setFilters,\n  applyFilter,\n  withToken,\n  onExport,\n}) => {\n  const clearFilter = useCallback(() => {\n    setFilters([]);\n    applyFilter();\n  }, [setFilters, filters, applyFilter]);\n\n  return (\n    <Grid\n      container\n      justify=\"space-between\"\n      alignItems=\"center\"\n      className={classes.header}\n    >\n      {title}\n\n      {filters && (\n        <Filter\n          filterData={filterData}\n          fields={fields}\n          filters={filters}\n          setFilters={setFilters}\n          applyFilter={applyFilter}\n          clearFilter={clearFilter}\n          withToken={withToken}\n          entity={entity}\n        />\n      )}\n\n      <div className={classes.buttons}>\n        {buttons}\n\n        {canExport && (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={onExport}\n            className={classes.export}\n          >\n            \n          </Button>\n        )}\n\n        {canCreate && url && (\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            component={RouterLink}\n            to={`${url}/create`}\n          >\n            \n          </Button>\n        )}\n      </div>\n    </Grid>\n  );\n};\n\nconst EntityHead = withStyles(styles)(EntityHeadUnstyled);\nexport { EntityHead };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  header: {\n    display: 'flex',\n    padding: '32px 19px 24px 24px',\n    justifyContent: 'center',\n    alignItems: 'flex-start' as 'flex-start',\n    flexWrap: 'nowrap' as 'nowrap',\n\n    '@media(max-width: 640px)': {\n      flexDirection: 'column' as 'column',\n    },\n\n    '& .MuiButton-label': {\n      fontWeight: 'bold',\n      fontSize: '14px',\n      lineHeight: '16px',\n      height: 38,\n    },\n\n    '& .MuiInputBase-input': {},\n\n    '& .MuiButton-outlinedPrimary, & .MuiButton-outlinedSecondary': {\n      backgroundColor: 'white',\n      border: '1px solid #EBEBEB !important',\n    },\n\n    '& .MuiOutlinedInput-notchedOutline': {\n      border: 'none',\n    },\n\n    '& h4': {\n      whiteSpace: 'nowrap',\n    },\n\n    '& > *': {\n      margin: '5px 0',\n    },\n  },\n  title: {\n    color: '#282f36',\n    fontSize: '34px',\n    fontWeight: 900,\n    flexGrow: 1,\n    whiteSpace: 'nowrap' as 'nowrap',\n  },\n  buttons: {\n    marginRight: theme.spacing(1),\n    flexWrap: 'nowrap' as 'nowrap',\n    display: 'flex' as 'flex',\n\n    '@media(max-width: 640px)': {\n      width: '100%',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-end',\n      paddingRight: 10,\n    },\n  },\n  export: {\n    marginRight: theme.spacing(1),\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, HTMLAttributes, useCallback } from 'react';\nimport { TableCell, TableSortLabel } from '@material-ui/core';\nimport { ENTITY_SORT_DIRS } from '~/application';\n\ntype IProps = HTMLAttributes<HTMLDivElement> & {\n  field: string;\n  active?: boolean;\n  direction?: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  onSortChange: (field: string) => void;\n};\n\nconst EntityHeadSortable: FC<IProps> = ({\n  children,\n  field,\n  active,\n  onSortChange,\n  direction,\n}) => {\n  const onClick = useCallback(() => onSortChange(field), [field, onSortChange]);\n\n  return (\n    <TableCell>\n      <TableSortLabel\n        active={active}\n        direction={active ? direction : ENTITY_SORT_DIRS.DESC}\n        onClick={onClick}\n      >\n        {children}\n      </TableSortLabel>\n    </TableCell>\n  );\n};\n\nexport { EntityHeadSortable };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  useMemo,\n  useCallback,\n  useState,\n  Fragment,\n  createElement,\n  ReactNode,\n  MouseEvent,\n} from 'react';\nimport {\n  TableContainer,\n  Table,\n  TableCell,\n  TableHead,\n  TableRow,\n  TableBody,\n  Paper,\n  CircularProgress,\n  Button,\n  withStyles,\n  WithStyles,\n  Checkbox,\n} from '@material-ui/core';\nimport { IEntityField, ENTITY_SORT_DIRS } from '~/application/';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { EntityHeadSortable } from '~/application/components/EntityHeadSortable';\nimport styles from './styles';\nimport { EntityField } from '../EntityField';\nimport { useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport omit from 'ramda/es/omit';\nimport classnames from 'classnames';\nimport { Entity } from '~/application/modules';\n\ntype IProps = WithStyles<typeof styles> & {\n  isLoading: boolean;\n  fields: IEntityField[];\n  data: Record<string, string>[];\n  url: string;\n  sortBy: string;\n  sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  selected: any[];\n  entity: Entity;\n  extra:\n    | (({\n        id,\n        onClose,\n      }: {\n        id: any;\n        onClose: (id: any) => void;\n      }) => JSX.Element)\n    | null;\n  canView: boolean;\n  canEdit: boolean;\n  canSelect?: boolean;\n  setSelected: (items: any[]) => void;\n  onSortChange: (field: string) => void;\n  withToken?: (req: any, args: any) => void;\n  onRowClick?: (id: any, event: MouseEvent<any>) => void;\n\n  firstRow?: ReactNode;\n  lastRow?: ReactNode;\n  tableHead?: ReactNode;\n  before?: ReactNode;\n  after?: ReactNode;\n};\n\nconst EntityList = observer(\n  withStyles(styles)(\n    ({\n      classes,\n      isLoading,\n      fields,\n      entity,\n      data,\n      url,\n      extra,\n      selected,\n      sortBy,\n      sortDir,\n      canView,\n      canEdit,\n      canSelect,\n      onSortChange,\n      setSelected,\n      withToken,\n      onRowClick,\n      before = null,\n      after = null,\n      firstRow = null,\n      lastRow = null,\n      tableHead = null,\n    }: IProps) => {\n      const [expanded, setExpanded] = useState<Record<any, boolean>>({});\n\n      const visibleFields = useMemo(\n        () => fields.filter((field) => !field.hideInList),\n        [fields]\n      );\n\n      const history = useHistory();\n\n      const onRowClicked = useCallback(\n        (id: any, event: MouseEvent<any>) => {\n          if (onRowClick) {\n            return onRowClick(id, event);\n          }\n\n          if (extra) {\n            return setExpanded({ ...expanded, [id]: !expanded[id] });\n          }\n\n          if (canView) {\n            return history.push(`${url}/${id}`);\n          }\n\n          if (canEdit) {\n            return history.push(`${url}/${id}/edit`);\n          }\n        },\n        [\n          canView,\n          canEdit,\n          history,\n          url,\n          extra,\n          expanded,\n          setExpanded,\n          onRowClick,\n        ]\n      );\n\n      const onSelect = useCallback(\n        (id: any, includes: boolean) => {\n          setSelected(\n            !includes ? selected.filter((el) => el !== id) : [...selected, id]\n          );\n        },\n        [selected, setSelected]\n      );\n\n      const isAllSelected = useMemo(() => selected.length === data.length, [\n        data,\n        selected,\n      ]);\n\n      const onSelectAll = useCallback(() => {\n        setSelected(isAllSelected ? [] : data.map((el) => el.id));\n      }, [selected, setSelected, isAllSelected, data]);\n\n      const colSpan = useMemo(\n        () =>\n          visibleFields.length +\n          (canView ? 1 : 0) +\n          (canEdit ? 1 : 0) +\n          (canSelect ? 1 : 0) +\n          (extra ? 1 : 0),\n        [visibleFields, canEdit, canView, canSelect]\n      );\n\n      const onExtraClose = useCallback(\n        (id) => setExpanded(omit([id], expanded)),\n        [setExpanded, expanded]\n      );\n\n      if (isLoading) {\n        return (\n          <div className={classes.loader}>\n            <CircularProgress />\n          </div>\n        );\n      }\n\n      return (\n        <Paper>\n          {before}\n          <TableContainer>\n            <Table className={classes.table}>\n              {tableHead || (\n                <TableHead>\n                  <TableRow>\n                    {extra && <TableCell />}\n\n                    {canSelect && (\n                      <TableCell>\n                        <Checkbox\n                          onChange={onSelectAll}\n                          checked={isAllSelected}\n                        />\n                      </TableCell>\n                    )}\n\n                    {visibleFields.map((field) =>\n                      field.sortable ? (\n                        <EntityHeadSortable\n                          active={sortBy === field.name}\n                          direction={sortDir}\n                          key={field.name}\n                          field={field.name}\n                          onSortChange={onSortChange}\n                        >\n                          <b>{field.label || field.name}</b>\n                        </EntityHeadSortable>\n                      ) : (\n                        <TableCell key={field.name}>\n                          <b>{field.label || field.name}</b>\n                        </TableCell>\n                      )\n                    )}\n\n                    {canView && <TableCell />}\n                    {canEdit && <TableCell />}\n                  </TableRow>\n                </TableHead>\n              )}\n\n              <TableBody>\n                {firstRow}\n                {data.map((entry, i) => (\n                  <Fragment key={i}>\n                    <TableRow hover>\n                      {extra && (\n                        <TableCell\n                          onClick={(event) => onRowClicked(entry.id, event)}\n                        >\n                          {expanded[entry.id] ? (\n                            <KeyboardArrowDownIcon />\n                          ) : (\n                            <KeyboardArrowRightIcon />\n                          )}\n                        </TableCell>\n                      )}\n\n                      {canSelect && (\n                        <TableCell>\n                          <Checkbox\n                            checked={selected.includes(entry.id)}\n                            onChange={(_, includes) =>\n                              onSelect(entry.id, includes)\n                            }\n                          />\n                        </TableCell>\n                      )}\n\n                      {visibleFields.map((field) => (\n                        <TableCell\n                          key={field.name}\n                          onClick={(event) => onRowClicked(entry.id, event)}\n                        >\n                          <EntityField\n                            name={field.name}\n                            fields={fields}\n                            data={entry}\n                            withToken={withToken}\n                            entity={entity}\n                          />\n                        </TableCell>\n                      ))}\n\n                      {canEdit && (\n                        <TableCell\n                          size=\"small\"\n                          align=\"right\"\n                          className={classes.button}\n                        >\n                          <Button\n                            to={`${url}/${entry.id}/edit`}\n                            component={RouterLink}\n                          >\n                            <EditIcon />\n                          </Button>\n                        </TableCell>\n                      )}\n\n                      {canView && (\n                        <TableCell\n                          size=\"small\"\n                          align=\"right\"\n                          className={classnames(\n                            classes.button,\n                            classes.button_active\n                          )}\n                        >\n                          <Button\n                            to={`${url}/${entry.id}/`}\n                            component={RouterLink}\n                          >\n                            <LaunchIcon />\n                          </Button>\n                        </TableCell>\n                      )}\n                    </TableRow>\n\n                    {!!extra && expanded[entry.id] && (\n                      <TableRow>\n                        <TableCell colSpan={colSpan}>\n                          {createElement(extra, {\n                            id: entry.id,\n                            onClose: onExtraClose,\n                          })}\n                        </TableCell>\n                      </TableRow>\n                    )}\n                  </Fragment>\n                ))}\n                {lastRow}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          {after}\n        </Paper>\n      );\n    }\n  )\n);\n\nexport { EntityList };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  table: {\n    '& td, & th': {\n      padding: '4px 8px',\n      fontSize: '12px',\n      lineHeight: '14px',\n    },\n    '& tr': {\n      height: '56px',\n    },\n    '& svg': {\n      verticalAlign: 'middle',\n    },\n  },\n  button: {\n    boxSizing: 'border-box' as 'border-box',\n    borderLeft: `1px solid rgba(0, 0, 0, 0.23)`,\n    padding: '7px !important',\n    width: 56,\n\n    '& a': {\n      color: theme.palette.primary.main,\n      minWidth: 'auto',\n    },\n  },\n  button_active: {\n    '& a': {\n      background: theme.palette.primary.main,\n      color: 'white',\n      borderRadius: '4px',\n      padding: '6px',\n\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n      },\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  MouseEventHandler,\n  useCallback,\n  useState,\n  ChangeEvent,\n  FC,\n} from 'react';\nimport {\n  OutlinedInput,\n  Button,\n  FormControl,\n  withStyles,\n  WithStyles,\n  Box,\n} from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport styles from './styles';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & WithStyles<typeof styles> & {};\n\nconst EntityFieldBase64Image = withStyles(styles)(\n  ({\n    classes,\n    label,\n    value,\n    handler,\n    error,\n    isEditing,\n    onClick,\n    options,\n  }: IProps) => {\n    const [innerError, setInnerError] = useState('');\n\n    const getBase64 = useCallback((file: File): Promise<string> => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result?.toString() || '');\n        reader.onerror = (error) => reject(error);\n      });\n    }, []);\n\n    const loadImage = useCallback(\n      async (e: ChangeEvent<HTMLInputElement>) => {\n        if (!handler) return;\n        if (!e.target.files) return;\n\n        setInnerError('');\n\n        const file = e.target.files[0];\n\n        if (!file) return;\n\n        if (options?.maxSize && file.size > options.maxSize) {\n          setInnerError('  !');\n          return;\n        }\n\n        if (options?.maxSize && file.size < options.minSize) {\n          setInnerError('  !');\n          return;\n        }\n\n        if (\n          options?.allowedMimeType &&\n          !options.allowedMimeType.includes(file.type)\n        ) {\n          setInnerError('   !');\n          return;\n        }\n\n        const photo: string = await getBase64(file);\n\n        const img = new Image();\n        img.src = photo;\n\n        img.onload = () => {\n          const { naturalWidth, naturalHeight } = img;\n\n          if (options && options.minViewBox) {\n            const minWidth = options.minViewBox.width;\n            const minHeight = options.minViewBox.height;\n\n            if (naturalWidth < minWidth || naturalHeight < minHeight) {\n              setInnerError(\n                `      ${minWidth}x${minHeight} `\n              );\n              return;\n            }\n          }\n\n          if (options?.maxViewBox) {\n            let maxWidth = options.maxViewBox.width;\n            let maxHeight = options.maxViewBox.height;\n            if (naturalWidth > maxWidth || naturalHeight > maxHeight) {\n              setInnerError(\n                `      ${maxWidth}x${maxHeight} `\n              );\n              return;\n            }\n          }\n\n          handler(photo);\n        };\n      },\n      [setInnerError, handler, getBase64]\n    );\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n\n        handler(event.target.value);\n      },\n      [value, handler]\n    );\n\n    return isEditing ? (\n      <div>\n        <FormControl\n          variant=\"outlined\"\n          className={classes.formControl}\n          style={{ position: 'relative' }}\n        >\n          <label htmlFor={label} className={classes.label}>\n            {value ? (\n              <div\n                className={classes.image}\n                style={{ backgroundImage: `url('${value}')` }}\n              />\n            ) : (\n              ''\n            )}\n\n            <OutlinedInput\n              fullWidth\n              style={{\n                flexDirection: 'row-reverse',\n              }}\n              error={!!innerError || !!error}\n              className={classes.outlinedInput}\n              inputComponent={() => (\n                <Button\n                  name={label}\n                  startIcon={<ImageIcon fontSize={'large'} />}\n                  variant=\"contained\"\n                  style={{\n                    display: 'flex',\n                    width: 150,\n                  }}\n                >\n                  <span></span>\n                </Button>\n              )}\n            />\n            <input\n              id={label}\n              name={label}\n              type=\"file\"\n              onChange={loadImage}\n              style={{ position: 'absolute' }}\n              accept={options && options.mimes ? options.mimes.join(', ') : ''}\n            />\n          </label>\n          {(innerError || error) && (\n            <Box color=\"error.main\" fontSize={12}>\n              {innerError || error}\n            </Box>\n          )}\n        </FormControl>\n      </div>\n    ) : (\n      <div onClick={onClick}>\n        <img src={value ? String(value) : ''} className={classes.preview} />\n      </div>\n    );\n  }\n);\n\nexport { EntityFieldBase64Image };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  formControl: {\n    margin: `${theme.spacing(2)}px 0 ${theme.spacing(1)}px`,\n    minWidth: 120,\n\n    '& input': {\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      opacity: 0,\n    },\n  },\n  outlinedInput: {\n    minHeight: '56px',\n    alignItems: 'inherit',\n  },\n  label: {\n    display: 'flex',\n\n    '& > img': {\n      marginRight: '10px',\n    },\n  },\n  image: {\n    flex: '0 0 56px',\n    width: 56,\n    height: 56,\n    backgroundSize: 'cover',\n    backgroundPosition: '50% 50%',\n    backgroundColor: '#eeeeee',\n  },\n  preview: {\n    maxWidth: '100%',\n    maxHeight: 300,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useEffect, useRef } from 'react';\nimport { TablePagination, WithStyles, withStyles } from '@material-ui/core';\nimport styles from './styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  itemsPerPage: number[];\n  items: number;\n  totalCount: number;\n  page: number;\n  setPage: (count: number) => void;\n  setPerPage: (count: number) => void;\n};\n\nconst labelDisplayedRows = (page: number, items: number) => ({\n  from,\n  to,\n  count,\n}: {\n  from: number;\n  to: number;\n  count: number;\n}) =>\n  ` ${page + 1}  ${Math.ceil(\n    count / items\n  )},  ${from}-${to}  ${count}`;\n\nconst EntityFooterUnconnected: FC<IProps> = ({\n  classes,\n  totalCount,\n  page,\n  itemsPerPage,\n  items,\n  setPage,\n  setPerPage,\n}) => {\n  const wrapper = useRef<HTMLDivElement>(null);\n  const floater = useRef<HTMLDivElement>(null);\n\n  const onChangeRowsPerPage = useCallback(\n    (event) => setPerPage(parseInt(event.target.value)),\n    [setPerPage]\n  );\n\n  const onChangePage = useCallback((_, newPage) => setPage(newPage), [setPage]);\n\n  useEffect(() => {\n    if (!wrapper.current || !floater.current) return;\n    const height = floater.current.getBoundingClientRect().height;\n\n    if (!height) return;\n\n    wrapper.current.style.height = `${height + 20}px`;\n    floater.current.style.position = `fixed`;\n  }, [wrapper.current, floater.current]);\n\n  return (\n    <div ref={wrapper}>\n      <div ref={floater} className={classes.floater}>\n        <TablePagination\n          rowsPerPageOptions={itemsPerPage}\n          component=\"div\"\n          count={totalCount}\n          labelRowsPerPage=\" :\"\n          rowsPerPage={items}\n          page={page}\n          onChangePage={onChangePage}\n          onChangeRowsPerPage={onChangeRowsPerPage}\n          className={classes.pager}\n          labelDisplayedRows={labelDisplayedRows(page, items)}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst EntityFooter = withStyles(styles)(EntityFooterUnconnected);\n\nexport { EntityFooter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  floater: {\n    width: '100%',\n    bottom: 0,\n    left: 0,\n    backgroundColor: '#fefefe',\n    boxShadow: 'rgba(0, 0, 0, 0.1) 0 -3px 3px',\n    zIndex: 1,\n\n    '& .MuiTablePagination-root': {\n      padding: 10,\n      margin: 0,\n      paddingTop: '10px !important',\n    },\n  },\n  pager: {\n    margin: '30px 20px 20px 20px',\n    paddingTop: '20px !important',\n    borderTop: '1px solid #dddddd',\n\n    '& .MuiIconButton-root': {\n      backgroundColor: theme.palette.primary.main,\n      borderRadius: '4px',\n      width: 40,\n      height: 40,\n      padding: 0,\n      color: 'white',\n\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n      },\n\n      '&:last-child': {\n        marginLeft: 10,\n      },\n\n      '&.Mui-disabled': {\n        backgroundColor: '#dddddd',\n      },\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, ReactElement } from 'react';\nimport {\n  Grid,\n  Breadcrumbs,\n  Link,\n  Typography,\n  Button,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\nimport styles from './styles';\nimport { IEntityField } from '~/application';\nimport { observer } from 'mobx-react';\n\ntype IProps = WithStyles<typeof styles> & {\n  id?: string;\n  name: string;\n  url: string;\n  isEditing?: boolean;\n  isCreating?: boolean;\n  fields: IEntityField[];\n  data: Record<string, any>;\n  buttons?: ReactElement;\n  viewable: boolean;\n  editable: boolean;\n};\n\nconst EntityBreadcrumbs = withStyles(styles)(\n  observer(\n    ({\n      name,\n      url,\n      isEditing,\n      isCreating,\n      classes,\n      id,\n      fields,\n      data,\n      buttons,\n      viewable,\n      editable,\n    }: IProps) => {\n      const title = useMemo(() => {\n        const field = fields.find((f) => f.title);\n        return data && field && field.name ? data[field.name] : id;\n      }, [data, fields, id]);\n\n      return (\n        <div className={classes.breadcrumbs}>\n          <Grid container alignItems=\"center\">\n            <Grid style={{ flex: 1 }}>\n              <Breadcrumbs aria-label=\"breadcrumb\">\n                {name && (\n                  <Link color=\"inherit\" to={url} component={RouterLink}>\n                    {name}\n                  </Link>\n                )}\n\n                {isEditing && !isCreating && !!title && (\n                  <Link\n                    color=\"inherit\"\n                    to={viewable ? `${url}/${id}` : url}\n                    component={RouterLink}\n                  >\n                    {title}\n                  </Link>\n                )}\n\n                {!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\">{title}</Typography>\n                )}\n\n                {!!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\"></Typography>\n                )}\n\n                {!!isEditing && isCreating && (\n                  <Typography color=\"textPrimary\"></Typography>\n                )}\n              </Breadcrumbs>\n            </Grid>\n\n            {buttons}\n\n            {!isEditing && !isCreating && editable && (\n              <Button\n                to={`${url}/${id}/edit`}\n                component={RouterLink}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"button\"\n              >\n                \n              </Button>\n            )}\n          </Grid>\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityBreadcrumbs };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  breadcrumbs: {\n    alignItems: 'center',\n    display: 'flex',\n    padding: '40px 24px 24px',\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './auth'\nexport * from './config'\nexport * from './entity'\nexport * from './page'","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { EntityField } from './EntityField';\nexport { EntityBreadcrumbs } from './EntityBreadcrumbs';\nexport { EntityFooter } from './EntityFooter';\nexport { EntityHead } from './EntityHead';\nexport { EntityList } from './EntityList';\nexport { EntityViewer } from './EntityViewer';\nexport { EntityFieldBase64Image } from './EntityFieldBase64';\nexport { EntityFieldBoolean } from './EntityFieldBoolean';\nexport { EntityFieldDate } from './EntityFieldDate';\nexport { EntityFieldDateRange } from './EntityFieldDateRange';\nexport { EntityFieldDateTime } from './EntityFieldDatetime';\nexport { EntityFieldNumber } from './EntityFieldNumber';\nexport { EntityFieldPhone } from './EntityFieldPhone';\nexport { EntityFieldReferenceSelect } from './EntityFieldReferenceSelect';\nexport { EntityFieldRichText } from './EntityFieldRichText';\nexport { EntityFieldSelect } from './EntityFieldSelect';\nexport { EntityFieldString } from './EntityFieldString';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from '@material-ui/core';\n\nexport default (theme: Theme) =>\n  createStyles({\n    wrap: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n    },\n    paper: {\n      padding: theme.spacing(4),\n    },\n    header: {\n      // color: theme.palette.text,\n      fontSize: '34px',\n      fontWeight: 900,\n    },\n    marginTop: {\n      marginTop: theme.spacing(4),\n    },\n    forgot: {\n      cursor: 'pointer',\n\n      '& > p': {\n        fontSize: '12px',\n        fontWeight: 400,\n        color: theme.palette.text,\n        opacity: 0.7,\n\n        '&:hover': {\n          opacity: 1,\n        },\n      },\n    },\n  });\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  MouseEventHandler,\n  FormEvent,\n  useCallback,\n  useState,\n} from 'react';\n\nimport {\n  Paper,\n  Typography,\n  TextField,\n  withStyles,\n  InputAdornment,\n  Button,\n  WithStyles,\n  Container,\n} from '@material-ui/core';\n\nimport styles from '../styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  onForgotScreenClick?: MouseEventHandler;\n  onSubmit: ({ email, password }: { email: string; password: string }) => void;\n};\n\nconst SignInUnstyled: FC<IProps> = ({\n  classes,\n  onForgotScreenClick,\n  onSubmit,\n}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n      onSubmit({ email, password });\n    },\n    [email, password, onSubmit]\n  );\n\n  const onEmailChange = useCallback((event) => setEmail(event.target.value), [\n    setEmail,\n  ]);\n\n  const onPasswordChange = useCallback(\n    (event) => setPassword(event.target.value),\n    [setPassword]\n  );\n\n  return (\n    <div className={classes.wrap}>\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <Typography align=\"center\" component=\"h3\" className={classes.header}>\n            \n          </Typography>\n\n          <form noValidate onSubmit={onSubmitCapture}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"\"\n              name=\"email\"\n              className={classes.marginTop}\n              autoComplete=\"email\"\n              defaultValue={email}\n              onChange={onEmailChange}\n              autoFocus\n            />\n\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"\"\n              type=\"password\"\n              id=\"password\"\n              className={classes.marginTop}\n              defaultValue={password}\n              onChange={onPasswordChange}\n              autoComplete=\"current-password\"\n              InputProps={{\n                endAdornment: onForgotScreenClick ? (\n                  <InputAdornment\n                    position=\"end\"\n                    onClick={onForgotScreenClick}\n                    className={classes.forgot}\n                  >\n                     ?\n                  </InputAdornment>\n                ) : null,\n              }}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.marginTop}\n              disabled={!email.length || !password.length}\n            >\n              \n            </Button>\n          </form>\n        </Paper>\n      </Container>\n    </div>\n  );\n};\n\nconst SignIn = withStyles(styles, { withTheme: true })(SignInUnstyled);\n\nexport { SignIn };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useState, useRef, useMemo } from 'react';\nimport {\n  IconButton,\n  WithStyles,\n  withStyles,\n  Menu,\n  MenuItem,\n  Typography,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { Link } from 'react-router-dom';\n\ntype IProps = WithStyles<typeof styles> & {\n  email?: string;\n  username?: string;\n  role?: string;\n  onLogout?: () => void;\n};\n\nconst AccountUnstyled: FC<IProps> = ({\n  classes,\n  email,\n  username,\n  role,\n  onLogout,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const onMenuOpen = useCallback(() => setIsMenuOpen(true), [setIsMenuOpen]);\n  const onMenuClose = useCallback(() => setIsMenuOpen(false), [setIsMenuOpen]);\n\n  const name = useMemo(() => email || username || '', [email, username]);\n\n  return (\n    <div className={classes.account} ref={ref}>\n      <IconButton\n        aria-label=\"account of current user\"\n        aria-controls=\"menu-appbar\"\n        aria-haspopup=\"true\"\n        onClick={onMenuOpen}\n        color=\"inherit\"\n      >\n        <span className={classes.accountCircle}>\n          {(name && name.charAt(0)) || ''}\n        </span>\n      </IconButton>\n\n      <Menu\n        id=\"menu-appbar\"\n        anchorEl={ref.current}\n        keepMounted\n        open={isMenuOpen}\n        onClose={onMenuClose}\n      >\n        <MenuItem>\n          <div>\n            {name && <Typography component=\"div\">{name}</Typography>}\n            {role && (\n              <Typography\n                component=\"span\"\n                variant=\"caption\"\n                color=\"textSecondary\"\n              >\n                {role}\n              </Typography>\n            )}\n          </div>\n        </MenuItem>\n\n        <MenuItem component={Link} onClick={onLogout} to=\"/logout\">\n          <Typography component=\"span\" color=\"primary\">\n              \n          </Typography>\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n};\n\nconst Account = withStyles(styles)(AccountUnstyled);\n\nexport { Account };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from \"@material-ui/core\";\n\nexport default (theme: Theme) => createStyles({\n  account: {\n    paddingLeft: theme.spacing(3),\n    borderLeft: \"1px solid #e1e8ee\",\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: \"40px\"\n  },\n  accountCircle: {\n    width: \"42px\",\n    height: \"42px\",\n    backgroundColor: \"#f0f0f3\",\n    borderRadius: \"50%\",\n    color: \"#a5b0bf\",\n    fontSize: \"24px\",\n    fontWeight: 400,\n    textTransform: \"uppercase\",\n    lineHeight: \"42px\"\n  },\n});","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  useState,\n  useMemo,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport styles from './styles';\nimport {\n  withStyles,\n  AppBar,\n  Toolbar,\n  WithStyles,\n  Tabs,\n  Tab,\n} from '@material-ui/core';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Account } from '../Account';\nimport classnames from 'classnames';\n\ntype IProps = WithStyles<typeof styles> & {\n  logo?: { url?: string; title?: string };\n  account?: { email?: string; username?: string; role?: string };\n  links: { name: string; url: string }[];\n  onLogout?: () => void;\n};\n\nconst LinkTab = (props: any) => (\n  <Tab\n    component=\"a\"\n    onClick={(event: any) => {\n      event.preventDefault();\n    }}\n    {...props}\n  />\n);\n\nconst NavigationUnstyled: FC<IProps> = ({\n  classes,\n  logo,\n  links,\n  account,\n  onLogout,\n}) => {\n  const history = useHistory();\n  const [location, setLocation] = useState(window.location.pathname.toString());\n  const wrapper = useRef<HTMLDivElement>(null);\n  const appbar = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    history.listen(() => setLocation(history.location.pathname));\n  }, [history]);\n\n  const onTabChange = useCallback((_, tab) => history.push(links[tab].url), [\n    history,\n  ]);\n\n  const activeTab = useMemo(() => {\n    const active = links.findIndex((link) => link.url === location);\n    return active >= 0 ? active : 0;\n  }, [location]);\n\n  useEffect(() => {\n    if (!appbar.current || !wrapper.current) return;\n\n    const height = appbar.current.getBoundingClientRect().height;\n\n    if (!height) return;\n\n    wrapper.current.style.height = `${height}px`;\n  }, [appbar.current, wrapper.current]);\n\n  return (\n    <div ref={wrapper}>\n      <AppBar position=\"fixed\" className={classes.appbar} ref={appbar}>\n        <Toolbar className={classes.toolbar}>\n          {logo && (\n            <Link to=\"/\" className={classnames('logo', classes.title)}>\n              <img\n                src={logo.url}\n                title={logo.title}\n                className={classes.logo}\n                alt={logo.title}\n              />\n            </Link>\n          )}\n\n          <Tabs\n            onChange={onTabChange}\n            value={activeTab}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            aria-label=\"scrollable auto tabs example\"\n            className={classes.tabs}\n          >\n            {links.map(({ name, url }) => (\n              <Tab label={name} key={url} className={classes.tab} />\n            ))}\n          </Tabs>\n\n          {account && (\n            <Account\n              email={account.email}\n              username={account.username}\n              role={account.role}\n              onLogout={onLogout}\n            />\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nconst Navigation = withStyles(styles, { withTheme: true })(NavigationUnstyled);\n\nexport { Navigation };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from '@material-ui/core';\n\nexport default (theme: Theme) =>\n  createStyles({\n    appbar: {\n      backgroundColor: '#fff',\n      height: '78px',\n      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    },\n    toolbar: {\n      height: '78px',\n\n      '& .MuiTabs-scrollButtons svg': {\n        fill: theme.palette.primary.main,\n      },\n\n      '@media(max-width: 640px)': {\n        '& .logo': {\n          display: 'none',\n        },\n      },\n    },\n    title: {\n      // marginLeft: theme.spacing(2),\n      flexGrow: 1,\n    },\n    links: {\n      height: '100%',\n      display: 'flex',\n      alignItems: 'center',\n    },\n    logo: {\n      maxHeight: 54,\n    },\n    tab: {\n      height: '100%',\n      fontWeight: 500,\n      fontSize: '12px',\n      lineHeight: '14px',\n    },\n    tabs: {\n      height: '100%',\n      '& a': {\n        minWidth: 0,\n      },\n      '& .MuiTabs-flexContainer': {\n        height: '100%',\n      },\n      '& .MuiTab-root': {\n        minWidth: 'auto',\n        padding: '2px 16px',\n      },\n    },\n    link: {\n      color: '#a5b0bf',\n      fontSize: '12px',\n      fontWeight: 500,\n      textTransform: 'uppercase',\n      textDecoration: 'none',\n      padding: '0 16px',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n\n      '&.active': {\n        color: '#282f36',\n\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          height: '2px',\n          width: '100%',\n          backgroundColor: theme.palette.primary.main,\n          left: 0,\n          bottom: '-30px',\n        },\n      },\n    },\n  });\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useEffect } from 'react';\nimport { Page } from '~/application/modules/Page';\nimport { observer } from 'mobx-react';\n\ninterface IProps {\n  page: Page;\n}\n\nconst PageRenderer: FC<IProps> = observer(({ page }) => {\n  useEffect(() => {\n    if (page.onMount) page.onMount(page);\n\n    return () => {\n      if (page.onUnmount) page.onUnmount(page);\n    };\n  }, []);\n\n  return (\n    <div className=\"renderer\">\n      <page.output />\n    </div>\n  );\n});\n\nexport { PageRenderer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, FormEvent, useState } from 'react';\nimport {\n  Typography,\n  Paper,\n  TextField,\n  Button,\n  withStyles,\n  WithStyles,\n  Container,\n} from '@material-ui/core';\n\nimport styles from '../styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  onSubmit?: ({ email }: { email: string }) => void;\n};\n\nconst ForgotPasswordUnstyled: FC<IProps> = ({ classes, onSubmit }) => {\n  const [email, setEmail] = useState('');\n\n  const onEmailChange = useCallback(\n    (event) => {\n      setEmail(event.target.value);\n    },\n    [setEmail]\n  );\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n\n      if (!onSubmit) return;\n\n      onSubmit({ email });\n    },\n    [onSubmit, email]\n  );\n\n  return (\n    <div className={classes.wrap}>\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <Typography align=\"center\" component=\"h3\" className={classes.header}>\n             \n          </Typography>\n\n          <form noValidate onSubmit={onSubmitCapture}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              className={classes.marginTop}\n              autoComplete=\"email\"\n              defaultValue={email}\n              onChange={onEmailChange}\n              autoFocus\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.marginTop}\n              disabled={!email.length}\n            >\n              \n            </Button>\n          </form>\n        </Paper>\n      </Container>\n    </div>\n  );\n};\n\nconst ForgotPassword = withStyles(styles, { withTheme: true })(\n  ForgotPasswordUnstyled\n);\n\nexport { ForgotPassword };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, FormEvent, useState } from 'react';\nimport {\n  Typography,\n  Paper,\n  TextField,\n  Button,\n  withStyles,\n  WithStyles,\n  Container,\n} from '@material-ui/core';\n\nimport styles from '../styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  onSubmit?: (props: {\n    token: string;\n    password: string;\n    passwordRepeat: string;\n  }) => void;\n  token: string;\n};\n\nconst ResetPasswordUnstyled: FC<IProps> = ({ classes, onSubmit, token }) => {\n  const [password, setPassword] = useState('');\n  const [passwordRepeat, setPasswordRepeat] = useState('');\n\n  const onPasswordChange = useCallback(\n    (event) => {\n      setPassword(event.target.value);\n    },\n    [setPassword]\n  );\n\n  const onPasswordRepeatChange = useCallback(\n    (event) => {\n      setPasswordRepeat(event.target.value);\n    },\n    [setPasswordRepeat]\n  );\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n\n      if (!onSubmit) return;\n\n      onSubmit({ token, password, passwordRepeat });\n    },\n    [onSubmit, token, passwordRepeat, password]\n  );\n\n  return (\n    <div className={classes.wrap}>\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <Typography align=\"center\" component=\"h3\" className={classes.header}>\n              \n          </Typography>\n\n          <form noValidate onSubmit={onSubmitCapture}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"password\"\n              label=\"Password\"\n              name=\"password\"\n              className={classes.marginTop}\n              defaultValue={password}\n              onChange={onPasswordChange}\n              autoFocus\n            />\n\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"password\"\n              label=\"Password repeat\"\n              name=\"passwordRepeat\"\n              className={classes.marginTop}\n              defaultValue={passwordRepeat}\n              onChange={onPasswordRepeatChange}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.marginTop}\n              disabled={\n                !password.length ||\n                !passwordRepeat.length ||\n                password !== passwordRepeat\n              }\n            >\n              \n            </Button>\n          </form>\n        </Paper>\n      </Container>\n    </div>\n  );\n};\n\nconst ResetPassword = withStyles(styles, { withTheme: true })(\n  ResetPasswordUnstyled\n);\n\nexport { ResetPassword };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, Fragment, useCallback } from 'react';\nimport { Config } from '../Config';\nimport { observer } from 'mobx-react';\nimport { Switch, Route, Redirect, Router } from 'react-router-dom';\nimport { SignIn } from '~/containers/login/SignIn';\nimport { Navigation } from '~/containers/layout/Navigation';\nimport { PageRenderer } from '../PageRenderer';\nimport {\n  Container,\n  WithStyles,\n  withStyles,\n  CssBaseline,\n  ThemeProvider,\n} from '@material-ui/core';\nimport styles from './styles';\nimport { ForgotPassword } from '~/containers/login/ForgotPassword';\nimport DateFnsAdapter from '@material-ui/pickers/adapter/date-fns'; // choose your lib\nimport { LocalizationProvider } from '@material-ui/pickers';\nimport { ResetPassword } from '~/containers/login/ResetPassword';\nimport ruLocale from 'date-fns/locale/ru';\n\ntype IProps = WithStyles<typeof styles> & {\n  config: Config;\n};\n\nconst Application = withStyles(styles)(\n  observer(({ classes, config }: IProps) => {\n    const links = useMemo(\n      () =>\n        config.pages\n          .filter((page) => page?.menu?.url && page.canList)\n          .map((page) => ({\n            name: page.menu.label,\n            url: page.menu.url,\n          })),\n      [config.pages, config.auth?.user?.role]\n    );\n\n    const role = useMemo(\n      () =>\n        (config.auth?.roleTitles &&\n          config.auth?.user?.role &&\n          config.auth?.roleTitles[config.auth?.user?.role]) ||\n        config.auth?.user?.role,\n      [config.auth?.roleTitles, config.auth?.user?.role]\n    );\n\n    const onForgotPassword = useMemo(\n      () =>\n        config.auth?.authPasswRestoreFn\n          ? () => {\n              config.history.push('/restore');\n            }\n          : undefined,\n      [config.history, config.auth, config.auth?.authPasswRestoreFn]\n    );\n\n    if (!config.auth?.isLogged && config.auth?.sendAuthRequest) {\n      return (\n        <ThemeProvider theme={config.theme}>\n          <CssBaseline />\n\n          <Router history={config.history}>\n            <Switch>\n              <Route\n                path=\"/restore\"\n                render={() => (\n                  <ForgotPassword\n                    onSubmit={config.auth?.sendAuthPasswRestore}\n                  />\n                )}\n              />\n\n              <Route\n                path=\"/reset-password/:token\"\n                render={(params) => (\n                  <ResetPassword\n                    onSubmit={config.auth?.sendAuthPasswUpdate}\n                    token={params.match.params.token}\n                  />\n                )}\n              />\n\n              <SignIn\n                onSubmit={config.auth.sendAuthRequest}\n                onForgotScreenClick={onForgotPassword}\n              />\n            </Switch>\n          </Router>\n\n          <config.notifications.Output />\n        </ThemeProvider>\n      );\n    }\n\n    return (\n      <ThemeProvider theme={config.theme}>\n        <LocalizationProvider dateAdapter={DateFnsAdapter} locale={ruLocale}>\n          <CssBaseline />\n\n          <Router history={config.history}>\n            <Navigation\n              links={links}\n              logo={{ url: config.logo, title: config.title }}\n              account={{\n                email: config.auth?.user?.email || '',\n                username: config.auth?.user?.username || '',\n                role,\n              }}\n              onLogout={config.auth?.logout}\n            />\n\n            <Container maxWidth=\"xl\" className={classes.wrapper}>\n              <Switch>\n                {config.pages\n                  .filter((page) => page?.menu?.url)\n                  .map((page) => (\n                    <Route\n                      path={page.menu.url}\n                      render={() => <PageRenderer page={page} />}\n                      key={page.menu.url}\n                    />\n                  ))}\n                {links.length > 0 && <Redirect to={links[0].url} />}\n              </Switch>\n            </Container>\n          </Router>\n\n          <config.notifications.Output />\n        </LocalizationProvider>\n      </ThemeProvider>\n    );\n  })\n);\n\nexport { Application };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    padding: 0,\n\n    '& .MuiButton-root, & .MuiOutlinedInput-root': {\n      borderRadius: 0,\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\n// import React from 'react';\nimport {\n  EMPTY_USER,\n  IAuthProviderProps,\n  UNAUTHORIZED,\n} from '~/application/types/auth';\nimport { computed, observable, action, reaction, toJS } from 'mobx';\nimport { flow } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Config } from '../Config';\n\nexport class AuthProvider {\n  // From props\n  @observable parent?: Config;\n  @observable user: IAuthProviderProps['user'] = EMPTY_USER;\n  @observable authRequestFn?: IAuthProviderProps['authRequestFn'];\n  @observable authPasswRestoreFn?: IAuthProviderProps['authPasswRestoreFn'];\n  @observable authPasswUpdateFn?: IAuthProviderProps['authPasswUpdateFn'];\n  @observable roleTitles?: Record<any, string>;\n  @observable persist?: IAuthProviderProps['persist'] = true;\n  @observable newPasswordValidator?: IAuthProviderProps['newPasswordValidator'];\n\n  constructor(fields?: Partial<IAuthProviderProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n\n    if (this.persist) {\n      const { user } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = { ...EMPTY_USER, ...user };\n      }\n\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  // Built-in\n  @observable isLoading: boolean = false;\n  @observable error: string = '';\n\n  sendAuthRequestInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthRequest = ({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: AuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authRequestFn(email, password).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.user = response.user;\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  sendAuthPasswRestoreInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthPasswRestore = ({ email }: { email: string }) => {\n    this.sendAuthPasswRestoreCancel();\n\n    this.sendAuthPasswRestoreInstance = flow(function* sendAuthPasswRestore(\n      this: AuthProvider\n    ) {\n      if (!this.authPasswRestoreFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authPasswRestoreFn(email).catch(() => null);\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.parent?.notifications.showSuccess('Check your email');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthPasswRestoreCancel = () => {\n    if (\n      this.sendAuthPasswRestoreInstance &&\n      this.sendAuthPasswRestoreInstance.cancel\n    ) {\n      try {\n        this.sendAuthPasswRestoreInstance.cancel();\n      } catch (e) {}\n    }\n  };\n\n  sendAuthPasswUpdateInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthPasswUpdate = ({\n    token,\n    password,\n    passwordRepeat,\n  }: {\n    token: string;\n    password: string;\n    passwordRepeat: string;\n  }) => {\n    this.sendAuthPasswRestoreCancel();\n\n    this.sendAuthPasswUpdateInstance = flow(function* sendAuthPasswUpdate(\n      this: AuthProvider\n    ) {\n      if (!this.authPasswUpdateFn) return;\n\n      this.isLoading = true;\n\n      try {\n        if (password !== passwordRepeat) {\n          throw new Error(`Passwords doesn't match`);\n        }\n\n        if (this.newPasswordValidator && this.newPasswordValidator(password)) {\n          throw new Error(this.newPasswordValidator(password));\n        }\n\n        const response = yield this.authPasswUpdateFn(\n          token,\n          password,\n          passwordRepeat\n        ).catch(() => null);\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.parent?.notifications.showSuccess('You can now log in');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthPasswUpdateCancel = () => {\n    if (\n      this.sendAuthPasswUpdateInstance &&\n      this.sendAuthPasswUpdateInstance.cancel\n    ) {\n      try {\n        this.sendAuthPasswUpdateInstance.cancel();\n      } catch (e) {}\n    }\n  };\n\n  getPersistedCredentials = (): { user?: IAuthProviderProps['user'] } => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return { user };\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  @action\n  logout = () => {\n    this.user = EMPTY_USER;\n  };\n\n  @action\n  withToken = async (req: any, args: any) => {\n    const result = await req({ ...args, token: this.user.token });\n\n    if (result.error === UNAUTHORIZED) {\n      this.user = EMPTY_USER;\n    }\n\n    return result;\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.user.token;\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  EMPTY_USER,\n  IAuthProviderProps,\n  AUTH_ERRORS,\n  UNAUTHORIZED,\n} from '~/application/types/auth';\nimport { computed, observable, action, reaction, toJS } from 'mobx';\nimport { flow } from 'mobx';\nimport { AuthProvider } from '../AuthProvider';\nimport { Unwrap } from '~/application/types/common';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\n\nconst EMPTY_TOKENS = {\n  access: '',\n  refresh: '',\n};\n\nexport type IJWTTokenRefreshFn = (\n  refresh: string\n) => Promise<{\n  access: string;\n  refresh: string;\n}>;\n\nexport type IJWTAuthRequestFn = (\n  email: string,\n  password: string\n) => Promise<{\n  user: IAuthProviderProps['user'];\n  tokens: { access: string; refresh: string };\n  error: string;\n}>;\n\nexport type IJWTAuthProviderProps = IAuthProviderProps & {\n  authRequestFn: IJWTAuthRequestFn;\n  tokenRefreshFn: IJWTTokenRefreshFn;\n};\n\nexport class JWTAuthProvider extends AuthProvider {\n  @observable tokens: Record<string, string> = EMPTY_TOKENS;\n  @observable authRequestFn?: IJWTAuthProviderProps['authRequestFn'];\n  @observable tokenRefreshFn?: IJWTAuthProviderProps['tokenRefreshFn'];\n\n  constructor(fields?: Partial<IJWTAuthProviderProps>) {\n    super(fields);\n\n    if (this.persist) {\n      const { user, tokens } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = user;\n      }\n\n      if (tokens) {\n        this.tokens = tokens;\n      }\n\n      reaction(() => this.tokens, this.persistTokens);\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  @action\n  sendAuthRequest = ({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: JWTAuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response: Unwrap<typeof this.authRequestFn> = yield this.authRequestFn(\n          email,\n          password\n        );\n\n        if (!response || response.error) {\n          this.parent?.notifications.showError(\n            response?.error || AUTH_ERRORS.CANT_LOGIN\n          );\n          throw new Error(response?.error);\n        }\n\n        this.parent?.notifications.hideNotification();\n        this.user = response.user;\n        this.tokens = response.tokens;\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  @action\n  logout = () => {\n    this.user = EMPTY_USER;\n    this.tokens = EMPTY_TOKENS;\n  };\n\n  tokenRefreshInstanceInstance?: any;\n\n  @action\n  withToken = async (req: any, args: any) => {\n    const result = await req({\n      ...args,\n      token: `Bearer ${this.tokens.access}`,\n    });\n\n    if (result?.error === UNAUTHORIZED) {\n      if (this.tokenRefreshFn) {\n        if (!this.tokenRefreshInstanceInstance) {\n          this.tokenRefreshInstanceInstance = flow(function* (\n            this: JWTAuthProvider\n          ) {\n            if (!this.tokenRefreshFn) return { access: '', refresh: '' };\n\n            return yield this.tokenRefreshFn(this.tokens.refresh);\n          }).bind(this)();\n\n          const tokens = await this.tokenRefreshInstanceInstance;\n\n          this.tokens = {\n            access: tokens.access || '',\n            refresh: tokens.refresh,\n          };\n\n          this.tokenRefreshInstanceInstance = null;\n        } else {\n          await this.tokenRefreshInstanceInstance;\n        }\n\n        if (this.tokens.access && this.tokens.refresh) {\n          return await req({\n            ...args,\n            token: `Bearer ${this.tokens.access}`,\n          });\n        }\n\n        this.user = EMPTY_USER;\n        this.tokens = EMPTY_TOKENS;\n      }\n    }\n\n    return result;\n  };\n\n  getPersistedCredentials = (): {\n    user?: IAuthProviderProps['user'];\n    tokens?: Record<string, string>;\n  } => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return { user, tokens };\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  persistTokens = () => {\n    localStorage.setItem('tokens', JSON.stringify(this.tokens));\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.tokens.access;\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { Snackbar } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { INotification } from '~/application/types/notification';\n\ninterface IProps {\n  hideNotification: () => void;\n  show: INotification['show'];\n  type: INotification['type'];\n  message: INotification['message'];\n  timeout: INotification['timeout'];\n}\n\nconst Notification: FC<IProps> = ({\n  hideNotification,\n  show,\n  type,\n  message,\n  timeout,\n}) => {\n  const onClose = useCallback(\n    (...args) => {\n      hideNotification();\n    },\n    [hideNotification]\n  );\n\n  return (\n    <Snackbar\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      key=\"bottom,left\"\n      open={show}\n      onClose={onClose}\n      autoHideDuration={timeout}\n    >\n      <Alert\n        elevation={6}\n        variant=\"filled\"\n        onClose={onClose}\n        severity={type || 'info'}\n      >\n        {message}\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport { Notification };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { observable, action, reaction, computed } from 'mobx';\nimport { INotification } from '~/application/types/notification';\nimport { observer } from 'mobx-react';\nimport { Notification } from '~/containers/login/Notification';\n\nexport class Notifications {\n  @observable notification: INotification = {\n    show: false,\n    message: '',\n    type: 'info',\n    timeout: 6000,\n  };\n\n  @action\n  hideNotification = () => {\n    this.notification.show = false;\n  };\n\n  @action\n  showError = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'error';\n  };\n\n  @action\n  showSuccess = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'success';\n  };\n\n  @computed\n  get Output() {\n    return observer(() => (\n      <Notification\n        hideNotification={this.hideNotification}\n        message={this.notification.message}\n        type={this.notification.type}\n        timeout={this.notification.timeout}\n        show={this.notification.show}\n      />\n    ));\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IConfigProps } from '~/application/types/config';\nimport { Theme, createMuiTheme } from '@material-ui/core';\nimport { createBrowserHistory } from 'history';\nimport { Notifications } from '../Notification';\n\nexport class Config {\n  name: IConfigProps['name'] = '';\n  pages: IConfigProps['pages'] = [];\n  auth?: IConfigProps['auth'];\n  logo?: IConfigProps['logo'];\n  title?: IConfigProps['title'];\n  theme: Theme = createMuiTheme({});\n  history = createBrowserHistory();\n  notifications = new Notifications();\n\n  constructor(fields?: Partial<IConfigProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n\n    if (this.pages.length) {\n      this.pages.forEach((page) => {\n        page.parent = this;\n      });\n    }\n\n    if (this.auth) {\n      this.auth.parent = this;\n    }\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { IPageProps } from '~/application/types/page';\nimport { observable, computed, action, toJS } from 'mobx';\nimport { observer } from 'mobx-react';\n\nexport class Page {\n  @observable title: IPageProps['title'] = '';\n  @observable menu: IPageProps['menu'] = { enabled: true, label: '', url: '' };\n  @observable parent?: IPageProps['parent'];\n  @observable roles?: IPageProps['roles'];\n\n  constructor(fields?: Partial<IPageProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n  }\n\n  @action\n  onMount: (page: Page) => void = () => {};\n\n  @action\n  onUnmount: (page: Page) => void = () => {};\n\n  @computed\n  get canList() {\n    return !!(\n      !this.roles ||\n      (this.parent?.auth?.user?.role &&\n        (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n          this.roles?.list?.includes(this.parent.auth?.user?.role.toString())))\n    );\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{this.title}</h1>\n        <div>You can override this class to make your own cool entity</div>\n      </div>\n    ));\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { ReactElement, Fragment } from 'react';\nimport {\n  ENTITY_ERRORS,\n  ENTITY_REFERENCE_FIELDS,\n  ENTITY_SORT_DIRS,\n  IEntityField,\n  IEntityProps,\n  IFilterValue,\n} from '~/application/types/entity';\nimport { Page } from '~/application/modules/Page';\nimport { EntityList } from '../../components/EntityList';\nimport { EntityHead } from '../../components/EntityHead';\nimport { EntityFooter } from '../../components/EntityFooter';\nimport { action, computed, flow, observable, reaction, toJS } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Route, RouteComponentProps, Switch } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport { EntityViewer } from '../../components/EntityViewer';\nimport { Unwrap } from '~/application/types/common';\nimport { EntityBreadcrumbs } from '~/application/components/EntityBreadcrumbs';\nimport { Typography } from '@material-ui/core';\nimport { saveAs } from 'file-saver';\nimport { parseQuery } from '~/utils/query';\nimport { Provider } from 'mobx-react';\n\nexport class Entity extends Page {\n  // Props\n  @observable api: IEntityProps['api'] = {\n    list: { url: '/', method: 'get' },\n  };\n  @observable fields: IEntityProps['fields'] = [];\n  @observable filters: IEntityProps['filters'] = [];\n  @observable editable: IEntityProps['editable'] = false;\n  @observable viewable: IEntityProps['viewable'] = false;\n  @observable creatable: IEntityProps['creatable'] = false;\n  @observable exportable: IEntityProps['exportable'] = false;\n  @observable selectable: IEntityProps['selectable'] = false;\n  @observable getItemsFn: IEntityProps['getItemsFn'] = undefined;\n  @observable fetchItemsFn: IEntityProps['fetchItemsFn'] = undefined;\n  @observable updateItemsFn: IEntityProps['updateItemsFn'] = undefined;\n  @observable createItemsFn: IEntityProps['createItemsFn'] = undefined;\n  @observable references: IEntityProps['references'] = {};\n  @observable referenceData: Record<string, any> = {};\n  @observable itemsPerPage: number[] = [5, 10, 15, 25, 50];\n  @observable items: IEntityProps['items'] =\n    this.itemsPerPage[this.itemsPerPage.length] || 50;\n\n  // Built-in\n  @observable isLoading: boolean = true;\n  @observable totalCount: number = 0;\n  @observable page: number = 0;\n  @observable data: Record<string, any>[] = [];\n  @observable error?: string | null;\n  @observable sortBy: string = '';\n  @observable sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS] =\n    ENTITY_SORT_DIRS.ASC;\n  @observable editorFieldErrors: Record<string, string> = {};\n  @observable editorData: Record<string, any> = {};\n  @observable selected: any[] = [];\n  @observable filterData: Record<string, any> = {};\n\n  constructor(fields?: Partial<IEntityProps>) {\n    super();\n\n    if (fields) {\n      Object.assign(this, fields);\n    }\n  }\n\n  @action\n  setFilters = (filters: IEntityProps['filters']) => {\n    this.filters = filters;\n  };\n\n  @action\n  setPage = (page: number) => {\n    this.page = page;\n  };\n\n  @action\n  setPerPage = (items: number) => {\n    this.items = items;\n  };\n\n  @action\n  setSelected = (selected: any[]) => {\n    this.selected = selected;\n  };\n\n  @action\n  setSort = (field: string) => {\n    if (field !== this.sortBy && this.sortDir !== ENTITY_SORT_DIRS.DESC) {\n      this.sortDir = ENTITY_SORT_DIRS.DESC;\n    }\n\n    if (field === this.sortBy) {\n      this.sortDir =\n        this.sortDir === ENTITY_SORT_DIRS.ASC\n          ? ENTITY_SORT_DIRS.DESC\n          : ENTITY_SORT_DIRS.ASC;\n    }\n\n    this.sortBy = field;\n  };\n\n  fetchItemsInstance?: CancellablePromise<any>;\n\n  getFilters = (): IEntityProps['filters'] =>\n    (this.filters.length > 0 &&\n      toJS(this.filters).filter((el) => el.name && el.value !== '')) ||\n    [];\n\n  applyFilter = () => {\n    this.page = 0;\n    this.fetchItems();\n  };\n\n  @action\n  fetchItems = () => {\n    this.fetchItemsCancel();\n\n    this.fetchItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n      this.selected = [];\n\n      try {\n        // loading entity\n        if (!this.api?.list?.url || !this.fetchItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const filter = this.getFilters();\n\n        const result: Unwrap<typeof this.fetchItemsFn> = yield this.parent?.auth?.withToken(\n          this.fetchItemsFn,\n          {\n            url: this.api?.list?.url || '',\n            filter,\n            page: this.page,\n            count: this.items,\n            sortBy: this.sortBy,\n            sortDir: this.sortDir,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.data = result?.data?.list || [];\n        this.filterData = result?.filterData || {};\n        this.totalCount = result?.data?.totalCount || 0;\n\n        // Loading references (if any)\n        const references = this.fields\n          .filter(\n            (field) =>\n              field.type &&\n              Object.prototype.hasOwnProperty.call(\n                ENTITY_REFERENCE_FIELDS,\n                field.type\n              ) &&\n              this.references[field.name]?.getMany\n          )\n          .map(async (field) => ({\n            [field.name]: await this.references[field.name].getMany(this),\n          }));\n\n        const refResults = yield Promise.all(references);\n\n        this.referenceData = refResults.reduce(\n          (obj: Record<string, any>, res: Record<string, any>) => ({\n            ...obj,\n            ...res,\n          }),\n          {}\n        );\n\n        // updating field reference data\n        this.fields = this.fields.map((field) =>\n          this.referenceData[field.name]\n            ? {\n                ...field,\n                options: { referenceData: this.referenceData[field.name] },\n              }\n            : field\n        );\n\n        // finished\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  fetchItemsCancel = () => {\n    try {\n      if (this.fetchItemsInstance && this.fetchItemsInstance.cancel) {\n        this.fetchItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  updateItemInstance?: CancellablePromise<any>;\n\n  @action\n  updateItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data, false)) {\n          throw new Error(ENTITY_ERRORS.INCORRECT_INPUT);\n        }\n\n        if (!this.api?.update?.url || !this.updateItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.updateItemsFn> = yield this.parent?.auth?.withToken(\n          this.updateItemsFn,\n          {\n            url: this.api?.update?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.fetchItems();\n\n        if (this.parent?.history?.length && this.parent?.history.goBack) {\n          this.parent?.history.goBack();\n        } else if (this.parent?.history?.push) {\n          this.parent?.history.push(this.menu.url);\n        }\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  onEditCancel = () => {\n    if (this.parent?.history?.length && this.parent?.history.goBack) {\n      this.parent?.history.goBack();\n    } else if (this.parent?.history?.push) {\n      this.parent?.history.push(this.menu.url);\n    }\n  };\n\n  @action\n  createItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data, true)) {\n          throw new Error(ENTITY_ERRORS.INCORRECT_INPUT);\n        }\n\n        if (!this.api?.create?.url || !this.createItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.createItemsFn> = yield this.parent?.auth?.withToken(\n          this.createItemsFn,\n          {\n            url: this.api?.create?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.fetchItems();\n        this.parent?.history.push(this.menu.url);\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  resetFieldError = (field: string) => {\n    delete this.editorFieldErrors[field];\n  };\n\n  isValidField = (field: IEntityField, value: any) =>\n    (!field.required || field.type === 'boolean' || !!value) &&\n    (!field.validator || !field.validator(value));\n\n  @action\n  validateSubmitFields = (\n    data: Record<string, any>,\n    isCreating = false\n  ): boolean => {\n    this.editorFieldErrors = this.fields\n      .filter(\n        (field) =>\n          (isCreating && !field.hideInCreate) ||\n          (!isCreating && !field.hideInEdit)\n      )\n      .reduce(\n        (obj, field) =>\n          this.isValidField(field, data[field.name])\n            ? obj\n            : {\n                ...obj,\n                [field.name]:\n                  (field.validator && field.validator(data[field.name])) ||\n                  ENTITY_ERRORS.FIELD_IS_REQUIRED,\n              },\n        {}\n      );\n\n    return Object.keys(this.editorFieldErrors).length === 0;\n  };\n\n  @observable\n  getItemsInstance?: CancellablePromise<any>;\n\n  @action\n  getItem = (id: any) => {\n    this.getItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      if (Object.keys(this.editorFieldErrors).length) {\n        this.editorFieldErrors = {};\n      }\n\n      try {\n        if (!this.api?.get?.url || !this.getItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.getItemsFn> = yield this.parent?.auth?.withToken(\n          this.getItemsFn,\n          {\n            id,\n            url: this.api?.get?.url,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.editorData = result.data;\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.parent?.history.push(this.menu.url);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  getItemsCancel = () => {\n    try {\n      if (this.getItemsInstance && this.getItemsInstance.cancel) {\n        this.getItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  @action\n  setEditorData = (data: Record<string, any>) => {\n    this.editorData = data;\n  };\n\n  @action\n  createEmptyItem = () => {\n    this.editorData = {};\n  };\n\n  @computed\n  get canEdit() {\n    return (\n      this.editable &&\n      !!(\n        !this.roles ||\n        (this.parent?.auth?.user?.role &&\n          (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n            this.roles?.update?.includes(\n              this.parent.auth?.user?.role.toString()\n            )))\n      )\n    );\n  }\n\n  @computed\n  get canCreate() {\n    return !!(\n      !this.roles ||\n      (this.parent?.auth?.user?.role &&\n        (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n          this.roles?.create?.includes(\n            this.parent.auth?.user?.role.toString()\n          )))\n    );\n  }\n\n  @action\n  onMount = () => {\n    this.getFiltersFromHash();\n    reaction(\n      () => [this.filters, this.sortBy, this.sortDir, this.page, this.items],\n      this.setFiltersWindowHash\n    );\n    reaction(() => [this.items, this.sortBy, this.sortDir], this.applyFilter);\n    reaction(() => this.page, this.fetchItems);\n    this.fetchItems();\n  };\n\n  @action\n  onUnmount = () => {\n    this.fetchItemsCancel();\n  };\n\n  @observable\n  exportData = async () => {\n    if (!this.fetchItemsFn) return;\n\n    const response = await this.parent?.auth?.withToken(this.fetchItemsFn, {\n      url: this.api?.list?.url,\n      filter: this.getFilters(),\n      page: 0,\n      count: 1000,\n      sortDir: 'DESC',\n      sortBy: 'id',\n    });\n\n    if (!response.data?.list) return;\n\n    const fields = this.fields\n      .filter((field) => !field.hideInExport)\n      .map((field) => field.name);\n\n    const rows = [\n      fields,\n      ...response.data.list.map((item: Record<string, any>) =>\n        fields.reduce(\n          (obj, field) => [...obj, '\"' + String(item[field]) + '\"'],\n          [] as string[]\n        )\n      ),\n    ];\n\n    let csv =\n      'data:text/csv;charset=utf-8,' + rows.map((e) => e.join(',')).join('\\n');\n    var uri = encodeURI(csv);\n\n    saveAs(uri, `${this.title}.csv`);\n  };\n\n  @computed\n  get ListHeadTitle() {\n    return observer(() => (\n      <Typography variant=\"h4\" style={{ flex: 1 }}>\n        {this.title}\n      </Typography>\n    ));\n  }\n\n  @computed\n  get ListHeadButtons() {\n    return observer(() => <></>);\n  }\n\n  @computed\n  get ListHead() {\n    return observer(() => (\n      <EntityHead\n        filterData={this.filterData}\n        title={<this.ListHeadTitle />}\n        buttons={<this.ListHeadButtons />}\n        filters={this.filters}\n        fields={this.fields}\n        setFilters={this.setFilters}\n        url={this.menu.url}\n        applyFilter={this.applyFilter}\n        withToken={this.parent?.auth?.withToken}\n        onExport={this.exportData}\n        canExport={this.exportable}\n        canCreate={this.creatable && this.canCreate}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get ListExtra():\n    | (({\n        id,\n        onClose,\n      }: {\n        id: any;\n        onClose: (id: any) => void;\n      }) => JSX.Element)\n    | null {\n    return null;\n  }\n\n  @computed\n  get ListBody() {\n    return observer(() => (\n      <EntityList\n        fields={this.fields}\n        data={this.data}\n        extra={this.ListExtra}\n        isLoading={this.isLoading}\n        url={this.menu.url}\n        selected={this.selected}\n        sortBy={this.sortBy}\n        sortDir={this.sortDir}\n        canView={this.viewable}\n        canEdit={this.editable && this.canEdit}\n        canSelect={this.selectable}\n        setSelected={this.setSelected}\n        onSortChange={this.setSort}\n        withToken={this.parent?.auth?.withToken}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get ListFooter() {\n    return observer(() => (\n      <EntityFooter\n        page={this.page}\n        itemsPerPage={this.itemsPerPage}\n        items={this.items}\n        totalCount={this.totalCount}\n        setPage={this.setPage}\n        setPerPage={this.setPerPage}\n      />\n    ));\n  }\n\n  @computed\n  get List() {\n    return observer(() => (\n      <div>\n        <this.ListHead />\n        <this.ListBody />\n        <this.ListFooter />\n      </div>\n    ));\n  }\n\n  @computed\n  get Breadcrumbs() {\n    return observer(\n      ({\n        id,\n        isEditing = false,\n        isCreating = false,\n        buttons,\n      }: {\n        id?: any;\n        isEditing?: boolean;\n        isCreating?: boolean;\n        buttons?: ReactElement;\n      }) => (\n        <EntityBreadcrumbs\n          data={this.editorData}\n          fields={this.fields}\n          id={id}\n          name={this.title}\n          url={this.menu.url}\n          viewable={this.viewable}\n          isEditing={isEditing}\n          isCreating={isCreating}\n          buttons={buttons}\n          editable={this.canEdit}\n        />\n      )\n    );\n  }\n\n  @computed\n  get ViewerHeadButtons() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get ViewerHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs id={id} buttons={<this.ViewerHeadButtons id={id} />} />\n    ));\n  }\n\n  @computed\n  get ViewerFooter() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get ViewerBody() {\n    return observer(({ id }: { id: string }) => (\n      <EntityViewer\n        id={id}\n        fields={this.fields}\n        url={this.menu.url}\n        errors={this.editorFieldErrors}\n        onSave={() => {}}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isEditing={false}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get Viewer() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.ViewerHead id={id} />\n        <this.ViewerBody id={id} />\n        <this.ViewerFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get EditorHeadButtons() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get EditorHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs\n        id={id}\n        buttons={<this.EditorHeadButtons id={id} />}\n        isEditing\n      />\n    ));\n  }\n\n  @computed\n  get EditorFooter() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get EditorBody() {\n    return observer(({ id }: { id: string }) => (\n      <EntityViewer\n        id={id}\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.updateItem}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n        entity={this}\n        isEditing\n      />\n    ));\n  }\n\n  @computed\n  get Editor() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.EditorHead id={id} />\n        <this.EditorBody id={id} />\n        <this.EditorFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get CreatorHeadButtons() {\n    return observer(() => <Fragment />);\n  }\n\n  @computed\n  get CreatorHead() {\n    return observer(() => (\n      <this.Breadcrumbs buttons={<this.CreatorHeadButtons />} isCreating />\n    ));\n  }\n\n  @computed\n  get CreatorFooter() {\n    return observer(() => <Fragment />);\n  }\n\n  @computed\n  get CreatorBody() {\n    return observer(() => (\n      <EntityViewer\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.createItem}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isEditing\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.createEmptyItem}\n        cancelGetItem={this.getItemsCancel}\n        viewable={this.viewable}\n        withToken={this.parent?.auth?.withToken}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get Creator() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.CreatorHead />\n        <this.CreatorBody />\n        <this.CreatorFooter />\n      </>\n    ));\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <Provider entity={this}>\n        <Switch>\n          <Route path={`${this.menu.url}/create`} component={this.Creator} />\n          <Route\n            path={`${this.menu.url}/:id/edit`}\n            component={({\n              match: {\n                params: { id },\n              },\n            }: RouteComponentProps<{ id: string }>) => <this.Editor id={id} />}\n          />\n          <Route\n            path={`${this.menu.url}/:id/`}\n            component={({\n              match: {\n                params: { id },\n              },\n            }: RouteComponentProps<{ id: string }>) => <this.Viewer id={id} />}\n          />\n          <Route path={this.menu.url} component={this.List} />\n        </Switch>\n      </Provider>\n    ));\n  }\n\n  @action\n  setFiltersWindowHash = () => {\n    const filters = this.getFilters().reduce(\n      (obj, filter) => ({ ...obj, [filter.name]: filter.value }),\n      {}\n    );\n\n    const params = new URLSearchParams({\n      ...filters,\n      _page: this.page.toString(),\n      _sortBy: this.sortBy.toString(),\n      _sortDir: this.sortDir.toString(),\n      _items: this.items.toString(),\n    });\n\n    window.location.hash = params.toString();\n  };\n\n  @action\n  getFiltersFromHash = () => {\n    const hash = window.location.hash.slice(1, window.location.hash.length);\n    const query = parseQuery(hash);\n    const filters: IFilterValue[] = this.fields\n      .filter(\n        (field) => field.filterable && Object.keys(query).includes(field.name)\n      )\n      .map((field) => ({ value: query[field.name], name: field.name }));\n\n    this.setFilters(filters);\n\n    if (query._page && parseInt(query._page)) {\n      this.page = parseInt(query._page);\n    }\n\n    if (query._sortDir && ['asc', 'desc'].includes(query._sortDir)) {\n      this.sortDir = query._sortDir === 'asc' ? 'asc' : 'desc';\n    }\n\n    if (\n      query._sortBy &&\n      this.fields.some((field) => field.name === query._sortBy)\n    ) {\n      this.sortBy = query._sortBy;\n    }\n\n    if (query._items && parseInt(query._items)) {\n      this.items = parseInt(query._items);\n    }\n  };\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const parseQuery = (queryString: string): Record<string, string> => {\n  var query: Record<string, string> = {};\n\n  var pairs = (queryString[0] === '?'\n    ? queryString.substr(1)\n    : queryString\n  ).split('&');\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i].split('=');\n    query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n  }\n\n  return query;\n};\n","module.exports = \"data:image/png;base64,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\"","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IPageProps } from './page';\nimport { EntityFieldString } from '~/application/components/EntityFieldString';\nimport { EntityFieldBoolean } from '~/application/components/EntityFieldBoolean';\nimport { EntityFieldDate } from '~/application/components/EntityFieldDate';\nimport { EntityFieldSelect } from '~/application/components/EntityFieldSelect';\nimport { EntityFieldPhone } from '~/application/components/EntityFieldPhone';\nimport { EntityFieldRichText } from '~/application/components/EntityFieldRichText';\nimport { EntityFieldBase64Image } from '~/application/components/EntityFieldBase64';\nimport { FC, MouseEventHandler } from 'react';\nimport { EntityFieldNumber } from '~/application/components/EntityFieldNumber';\nimport { EntityFieldDateTime } from '~/application/components/EntityFieldDatetime';\nimport { EntityFieldReferenceSelect } from '~/application/components/EntityFieldReferenceSelect';\nimport { Entity } from '../modules';\nimport { EntityFieldDateRange } from '~/application/components/EntityFieldDateRange';\n\nexport const ENTITY_FIELD_RENDERS = {\n  string: EntityFieldString,\n  date: EntityFieldDate,\n  datetime: EntityFieldDateTime,\n  daterange: EntityFieldDateRange,\n  boolean: EntityFieldBoolean,\n  select: EntityFieldSelect,\n  phone: EntityFieldPhone,\n  richtext: EntityFieldRichText,\n  base64image: EntityFieldBase64Image,\n  number: EntityFieldNumber,\n  referenceSelect: EntityFieldReferenceSelect,\n};\n\nexport const ENTITY_REFERENCE_FIELDS = {\n  referenceSelect: true,\n};\n\n// getFieldRenderer returns field-type specific renderer\nexport const getEntityFieldRenderer = (type: string = 'string'): FC<any> => {\n  const key = Object.prototype.hasOwnProperty.call(ENTITY_FIELD_RENDERS, type)\n    ? type\n    : 'string';\n\n  return ENTITY_FIELD_RENDERS[key as keyof typeof ENTITY_FIELD_RENDERS] as FC<\n    any\n  >;\n};\n\nexport const ENTITY_SORT_DIRS: Record<string, 'asc' | 'desc'> = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\n\nexport const ENTITY_FILTER_TYPES = {\n  TEXT: 'TEXT',\n  SELECT: 'SELECT',\n  NUMBER: 'NUMBER',\n  DATE: 'DATE',\n};\n\nexport const ENTITY_ACTIONS = {\n  CREATE: 'create',\n  GET: 'get',\n  LIST: 'list',\n  DELETE: 'delete',\n  UPDATE: 'update',\n};\n\nexport const ENTITY_ERRORS = {\n  CANT_UPDATE_ITEM: `Can't update item`,\n  CANT_LOAD_ITEMS: `Can't load items`,\n  FIELD_IS_REQUIRED: 'This field is required',\n  INCORRECT_INPUT: 'Check all inputs',\n};\n\nexport interface IEntityField {\n  name: string;\n  label?: string;\n  title?: boolean;\n  type: keyof typeof ENTITY_FIELD_RENDERS | 'custom';\n  sortable?: boolean;\n  filterable?: boolean;\n  required?: boolean;\n  validator?: (val: any) => string;\n  options?: Record<any, any>;\n  component?: FC<any>;\n  placeholder?: string;\n  mask?: string;\n\n  hideInList?: boolean;\n  hideInView?: boolean;\n  hideInEdit?: boolean;\n  hideInCreate?: boolean;\n  hideInExport?: boolean;\n}\n\nexport interface IFilterValue {\n  name: string;\n  value: any;\n}\n\nexport interface IEntityProps extends IPageProps {\n  fields: IEntityField[];\n  editable: boolean;\n  viewable: boolean;\n  creatable: boolean;\n  selectable: boolean;\n  exportable: boolean;\n  items: number;\n  filters: IFilterValue[];\n  references: Record<string, IEntityReferenceProps>;\n\n  api?: Record<\n    typeof ENTITY_ACTIONS[keyof typeof ENTITY_ACTIONS],\n    { url: string; method: string }\n  >;\n\n  fetchItemsFn?: IEntityFetchFunction;\n  updateItemsFn?: IEntityUpdateFunction;\n  createItemsFn?: IEntityCreateFunction;\n  getItemsFn?: IEntityGetFunction;\n}\n\nexport interface IEntityFetchFunctionProps {\n  url: string;\n  page?: number;\n  filter?: IFilterValue[];\n  sortBy: string;\n  sortDir: string;\n  count?: number;\n  token?: string;\n}\n\nexport interface IEntityFetchFunctionResult {\n  data: {\n    list: Record<string, any>[];\n    totalCount?: number;\n  };\n  filterData?: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityFetchFunction = (\n  props: IEntityFetchFunctionProps\n) => Promise<IEntityFetchFunctionResult>;\n\nexport interface IEntityUpdateFunctionProps {\n  url: string;\n  id: any;\n  token?: string;\n  data: Record<string, any>;\n}\n\nexport interface IEntityUpdateFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityUpdateFunction = (\n  props: IEntityUpdateFunctionProps\n) => Promise<IEntityUpdateFunctionResult>;\n\nexport interface IEntityCreateFunctionProps {\n  url: string;\n  token?: string;\n  data: Record<string, any>;\n}\n\nexport interface IEntityCreateFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityCreateFunction = (\n  props: IEntityCreateFunctionProps\n) => Promise<IEntityCreateFunctionResult>;\n\nexport interface IEntityGetFunctionProps {\n  url: string;\n  token?: string;\n  id: any;\n}\n\nexport interface IEntityGetFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityGetFunction = (\n  props: IEntityGetFunctionProps\n) => Promise<IEntityGetFunctionResult>;\n\nexport type IEntityReferenceProps = {\n  getMany: (entity: Entity) => Promise<Record<string, any>>;\n  getOne?: (id: any) => Promise<Record<string, any>>;\n};\n\nexport type IEntityFieldProps = {\n  name: string;\n  fields: IEntityField[];\n  data?: Record<string, any>;\n  label?: string;\n  error?: string;\n  isEditing?: boolean;\n  entity?: Entity;\n  isFiltering?: boolean;\n  handler?: (val: any) => void;\n  withToken?: (req: any, args: any) => void;\n  value?: any;\n  onClick?: MouseEventHandler<any>;\n  options?: Record<string, any>;\n  placeholder?: string;\n  mask?: string;\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const SAMPLE_ENTITY_1 = {\n  id: 1,\n  type: 1,\n  phone: '+7 000 000 000',\n  title: 'First one',\n  created: '',\n  createdTime: '2020-05-27T10:56:56.281+0000',\n  number: '0.123123123',\n  visible: true,\n};\n\nexport const SAMPLE_ENTITY_2 = {\n  id: 2,\n  type: 2,\n  phone: '+7 000 000 000',\n  title: 'First one',\n  created: '',\n  createdTime: '2020-05-27T10:56:56.281+0000',\n  number: 0.123123123,\n  visible: true,\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  Entity,\n  IEntityCreateFunction,\n  IEntityFetchFunction,\n  IEntityGetFunction,\n  IEntityUpdateFunction,\n} from '~/application';\nimport { SAMPLE_ENTITY_1, SAMPLE_ENTITY_2 } from './mocked_data';\n\nexport const fetchEntityItemsFn: IEntityFetchFunction = ({ ...props }) =>\n  new Promise((resolve) => {\n    console.log('Fetching with props:', props);\n\n    setTimeout(resolve, 500, {\n      data: {\n        list: [...new Array(props.count)].map((_, index) => ({\n          ...SAMPLE_ENTITY_1,\n          id: index,\n        })),\n        totalPages: 100,\n      },\n    });\n  });\n\nexport const getEntityFn: IEntityGetFunction = ({ id, url, token }) => {\n  return new Promise((resolve) => {\n    console.log('Getting item:', { id, url, token });\n    setTimeout(resolve, 500, {\n      data: SAMPLE_ENTITY_2,\n    });\n  });\n};\n\nexport const updateEntityFn: IEntityUpdateFunction = ({\n  id,\n  data,\n  url,\n  token,\n}) => {\n  return new Promise((resolve) => {\n    console.log('Updating item:', { id, data, url, token });\n    resolve({ error: '', data });\n  });\n};\n\nexport const createEntityFn: IEntityCreateFunction = ({ data, url, token }) => {\n  return new Promise((resolve) => {\n    console.log('Creating item:', { data, url, token });\n    resolve({ error: '', data });\n  });\n};\n\nexport const getEntityTypeVariants = async (entity: Entity) => {\n  return {\n    1: 'variant 1',\n    2: 'variant 2',\n    3: 'variant 3',\n  };\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IEntityField } from '~/application';\n\nexport const SAMPLE_ENTITY_FIELDS: IEntityField[] = [\n  {\n    name: 'type',\n    label: '',\n    sortable: true,\n    filterable: true,\n    type: 'referenceSelect',\n    required: true,\n  },\n  {\n    name: 'another',\n    label: ' ',\n    type: 'select',\n    filterable: true,\n    options: {\n      1: 'asdasdasd adsasd',\n      2: 'asdasd asdasdasd',\n    },\n  },\n  {\n    name: 'phone',\n    label: '',\n    sortable: true,\n    type: 'string',\n    filterable: true,\n  },\n  {\n    name: 'title',\n    label: '',\n    sortable: true,\n    type: 'string',\n    title: true,\n    hideInCreate: true,\n  },\n  {\n    name: 'created',\n    label: '   ()',\n    filterable: true,\n    sortable: true,\n    type: 'date',\n  },\n  {\n    name: 'createdTime',\n    label: '  ',\n    sortable: true,\n    filterable: true,\n    type: 'datetime',\n  },\n  {\n    name: 'dateRange',\n    label: '    (  )',\n    sortable: true,\n    filterable: true,\n    type: 'daterange',\n    hideInCreate: true,\n    hideInEdit: true,\n    hideInExport: true,\n    hideInList: true,\n  },\n  {\n    name: 'visible',\n    label: '',\n    sortable: false,\n    type: 'boolean',\n  },\n  {\n    type: 'number',\n    name: 'number',\n    label: ' (1)',\n    sortable: true,\n    validator: (val: string) => (String(val) === '1' ? '' : '  1'),\n    options: {\n      accuracy: 4,\n    },\n  },\n  {\n    name: 'requiredInEdit',\n    label: '  ',\n    type: 'string',\n    required: true,\n    hideInCreate: true,\n  },\n  {\n    name: 'requiredInCreate',\n    label: '  ',\n    type: 'string',\n    required: true,\n    hideInEdit: true,\n  },\n];\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\nimport React from 'react';\nimport { Entity } from '~/application';\nimport {\n  createEntityFn,\n  fetchEntityItemsFn,\n  getEntityFn,\n  getEntityTypeVariants,\n  updateEntityFn,\n} from './api';\nimport { SAMPLE_ENTITY_FIELDS } from './fields';\n\nexport default new Entity({\n  title: 'Entity',\n  editable: true,\n  viewable: true,\n  creatable: true,\n  exportable: true,\n  selectable: false,\n  api: {\n    list: { url: '/list', method: 'get' },\n    update: { url: '/update', method: 'patch' },\n    create: { url: '/create', method: 'post' },\n    get: { url: '/get', method: 'get' },\n  },\n  menu: {\n    enabled: true,\n    label: 'Sample entity',\n    url: '/entity',\n  },\n  fields: SAMPLE_ENTITY_FIELDS,\n\n  fetchItemsFn: ({ url, page, count, token, filter, sortBy, sortDir }) =>\n    fetchEntityItemsFn({ url, page, count, token, filter, sortBy, sortDir }),\n\n  getItemsFn: ({ id, url, token }) => getEntityFn({ id, url, token }),\n\n  updateItemsFn: ({ id, data, url, token }) =>\n    updateEntityFn({ id, data, url, token }),\n\n  createItemsFn: ({ data, url, token }) => createEntityFn({ data, url, token }),\n\n  references: {\n    type: {\n      getMany: (entity) => getEntityTypeVariants(entity),\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Page } from '~/application';\n\nexport default new Page({\n  title: 'Page',\n  menu: {\n    enabled: true,\n    url: '/test',\n    label: 'Sample page',\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { JWTAuthProvider, IAuthPasswUpdateFn } from '~/application';\nimport { Unwrap } from '~/application/types/common';\nimport { IJWTAuthRequestFn } from '~/application/modules/JWTAuthProvider';\n\nexport default new JWTAuthProvider({\n  authRequestFn: (\n    email: string,\n    password: string\n  ): Unwrap<ReturnType<IJWTAuthRequestFn>> =>\n    new Promise((resolve) => {\n      console.log('Authenticating with: ', { email, password });\n      resolve({\n        user: {\n          email,\n          username: email,\n          role: 'user',\n        },\n        tokens: { access: 'accessToken', refresh: 'refreashToken' },\n        error: '',\n      });\n    }),\n\n  authPasswRestoreFn: (email: string) =>\n    new Promise((resolve) => {\n      console.log('Restoring password with: ', { email });\n      resolve({ error: '' });\n    }),\n\n  authPasswUpdateFn: (token, password, passwordRepeat) =>\n    new Promise((resolve) => {\n      console.log('Resetting password with: ', {\n        token,\n        password,\n        passwordRepeat,\n      });\n      resolve({ error: '' });\n    }),\n\n  tokenRefreshFn: (refresh: string) => {\n    console.log('Refreshing JWT tokens');\n    const seed = Math.random() * 65535;\n    return new Promise((resolve) =>\n      setTimeout(\n        () =>\n          resolve({\n            access: `accessToken_${seed}`,\n            refresh: `refreshToken_${seed}`,\n          }),\n        3000\n      )\n    );\n  },\n\n  newPasswordValidator: (password: string) =>\n    password.length > 5 ? '' : 'Password must be at least 6 symbols long',\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Entity } from '~/application';\nimport { observer } from 'mobx-react';\nimport { SAMPLE_ENTITY_FIELDS } from '../entity/fields';\nimport {\n  fetchEntityItemsFn,\n  getEntityFn,\n  updateEntityFn,\n  createEntityFn,\n} from '../entity/api';\nimport { computed } from 'mobx';\n\nclass CustomEntity extends Entity {\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{this.title}</h1>\n        <div>This is cutom output. Btw, items count is {this.data.length}.</div>\n      </div>\n    ));\n  }\n}\n\nexport default new CustomEntity({\n  title: 'Custom entity',\n  editable: true,\n  viewable: true,\n  creatable: true,\n  exportable: true,\n  selectable: false,\n  api: {\n    list: { url: '/custom/list', method: 'get' },\n    update: { url: '/custom/update', method: 'patch' },\n    create: { url: '/custom/create', method: 'post' },\n    get: { url: '/custom/get', method: 'get' },\n  },\n  menu: {\n    enabled: true,\n    label: 'Custom',\n    url: '/custom',\n  },\n  fields: SAMPLE_ENTITY_FIELDS,\n\n  fetchItemsFn: ({ url, page, count, token, filter, sortBy, sortDir }) =>\n    fetchEntityItemsFn({ url, page, count, token, filter, sortBy, sortDir }),\n\n  getItemsFn: ({ id, url, token }) => getEntityFn({ id, url, token }),\n\n  updateItemsFn: ({ id, data, url, token }) =>\n    updateEntityFn({ id, data, url, token }),\n\n  createItemsFn: ({ data, url, token }) => createEntityFn({ data, url, token }),\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Config } from '~/application';\nimport logo from '~/assets/logo512.png';\nimport entity from './entity';\nimport page from './page';\nimport jwtAuth from './jwtAuth';\nimport custom from './custom';\n\nexport default new Config({\n  logo,\n  auth: jwtAuth,\n  pages: [page, entity, custom],\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Application } from '~/application';\nimport example from './example';\n\nReactDOM.render(\n  <Application config={example} />,\n  document.getElementById('root')\n);\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './modules';\nexport * from './types';\nexport * from './components';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\n// throw this to signalize we're not logged in\nexport const UNAUTHORIZED = 'UNAUTHORIZED';\n\nexport const AUTH_ERRORS = {\n  CANT_LOGIN: `Can't login. Unknown error.`,\n};\n\nexport const EMPTY_USER: IAuthProviderProps['user'] = {\n  id: 0,\n  email: '',\n  username: '',\n  role: '',\n  token: '',\n};\n\nexport type IAuthRequestFn = (\n  email: string,\n  password: string\n) => Promise<{ user: IAuthProviderProps['user']; error: string }>;\n\nexport type IAuthPasswRestoreFn = (email: string) => Promise<{ error: string }>;\nexport type IAuthPasswUpdateFn = (\n  token: string,\n  password: string,\n  passwordRepeat?: string\n) => Promise<{ error: string }>;\nexport type IAuthNewPasswordValidator = (\n  password: string\n) => string | undefined;\n\nexport interface IAuthProviderProps {\n  user: {\n    id?: number;\n    email?: string;\n    username?: string;\n    role?: string;\n    token?: string;\n  };\n\n  api: Record<string, { url: string; method: string }>;\n  roleTitles: Record<any, string>;\n  persist: boolean;\n\n  authRequestFn?: IAuthRequestFn;\n  authPasswRestoreFn?: IAuthPasswRestoreFn;\n  authPasswUpdateFn?: IAuthPasswUpdateFn;\n  newPasswordValidator?: IAuthNewPasswordValidator;\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, createElement, useMemo } from 'react';\nimport { getEntityFieldRenderer } from '~/application';\nimport { IEntityFieldProps } from '~/application/types';\n\ninterface IProps extends IEntityFieldProps {}\n\nconst EntityField: FC<IProps> = ({\n  name,\n  fields,\n  data = {},\n  error = '',\n  isEditing,\n  isFiltering,\n  handler,\n  entity,\n  withToken = (cb, args) => cb(args),\n}) => {\n  const field = useMemo(() => fields.find((field) => field.name === name), [\n    fields,\n    name,\n  ]);\n\n  if (!field) {\n    return <div />;\n  }\n\n  return createElement(\n    field.component\n      ? field.component\n      : getEntityFieldRenderer(field.type || typeof data[field.name]),\n    {\n      value: Object.prototype.hasOwnProperty.call(data, field.name)\n        ? data[field.name]\n        : null,\n      label: `${field.label || field.name}${\n        field.required && isEditing ? ' *' : ''\n      }`,\n      name,\n      error,\n      isEditing,\n      isFiltering,\n      handler,\n      entity,\n      options: field.options || {},\n      data, // for custom fields\n      fields, // for custom fields\n      withToken, // for custom fields\n      placeholder: field.placeholder,\n      mask: field.mask,\n    } as IEntityFieldProps\n  );\n};\n\nexport { EntityField };\n"],"sourceRoot":""}