{"version":3,"sources":["application/types/index.ts","application/components/index.tsx","containers/login/styles.ts","containers/login/SignIn/index.tsx","containers/layout/Account/index.tsx","containers/layout/Account/styles.ts","containers/layout/Navigation/index.tsx","containers/layout/Navigation/styles.ts","application/modules/PageRenderer/index.tsx","containers/login/ForgotPassword/index.tsx","application/modules/Application/index.tsx","application/modules/Application/styles.ts","application/modules/AuthProvider/index.tsx","application/modules/JWTAuthProvider/index.tsx","containers/login/Notification/index.tsx","application/modules/Notification/index.tsx","application/modules/Config/index.tsx","application/modules/Page/index.tsx","components/pages/EntityHeadSortable/index.tsx","containers/pages/EntityList/index.tsx","containers/pages/EntityList/styles.ts","components/pages/Filter/index.tsx","components/pages/Filter/styles.ts","containers/pages/EntityHead/index.tsx","containers/pages/EntityHead/styles.ts","containers/pages/EntityFooter/index.tsx","containers/pages/EntityViewer/index.tsx","containers/pages/EntityViewer/styles.ts","containers/pages/EntityBreadcrumbs/index.tsx","containers/pages/EntityBreadcrumbs/styles.ts","application/modules/Entity/index.tsx","assets/logo512.png","components/pages/EntityFieldBase64/index.tsx","components/pages/EntityFieldBase64/styles.ts","application/types/entity.ts","components/pages/EntityFieldString/index.tsx","components/pages/EntityFieldDate/index.tsx","components/pages/EntityFieldDatetime/index.tsx","components/pages/EntityFieldBoolean/index.tsx","components/pages/EntityFieldSelect/index.tsx","components/pages/EntityFieldPhone/index.tsx","components/pages/EntityFieldRichText/index.tsx","components/pages/EntityFieldNumber/index.tsx","config.ts","index.tsx","application/types/auth.ts","application/index.ts","application/components/EntityField/index.tsx"],"names":["theme","createStyles","wrap","display","alignItems","justifyContent","minHeight","paper","padding","spacing","header","fontSize","fontWeight","marginTop","forgot","cursor","color","palette","text","opacity","SignIn","withStyles","styles","withTheme","classes","onForgotScreenClick","onSubmit","useState","email","setEmail","password","setPassword","onSubmitCapture","useCallback","event","preventDefault","onEmailChange","target","value","onPasswordChange","className","Container","component","maxWidth","Paper","Typography","align","noValidate","TextField","variant","margin","required","fullWidth","id","label","name","autoComplete","defaultValue","onChange","autoFocus","type","InputProps","endAdornment","InputAdornment","position","onClick","Button","disabled","length","Account","account","paddingLeft","borderLeft","height","marginLeft","accountCircle","width","backgroundColor","borderRadius","textTransform","lineHeight","username","role","onLogout","ref","useRef","isMenuOpen","setIsMenuOpen","onMenuOpen","onMenuClose","useMemo","IconButton","aria-label","aria-controls","aria-haspopup","charAt","Menu","anchorEl","current","keepMounted","open","onClose","MenuItem","Link","to","Navigation","appbar","boxShadow","toolbar","title","flexGrow","links","logo","maxHeight","link","textDecoration","content","primary","main","left","bottom","AppBar","Toolbar","src","url","alt","map","key","PageRenderer","observer","page","useEffect","onMount","onUnmount","output","ForgotPassword","Application","wrapper","config","pages","filter","menu","canList","auth","user","roleTitles","onForgotPassword","authPasswRestoreFn","history","push","undefined","isLogged","sendAuthRequest","ThemeProvider","CssBaseline","path","render","sendAuthPasswRestore","notifications","Output","utils","DateFnsUtils","logout","AuthProvider","fields","sendAuthRequestInstance","sendAuthRequestCancel","cancel","sendAuthPasswRestoreInstance","sendAuthPasswRestoreCancel","getPersistedCredentials","JSON","parse","localStorage","getItem","e","persistCredentials","setItem","stringify","Object","assign","this","persist","EMPTY_USER","reaction","token","observable","action","flow","authRequestFn","isLoading","catch","response","error","Error","bind","parent","showSuccess","req","args","computed","EMPTY_TOKENS","access","refresh","tokens","persistTokens","showError","AUTH_ERRORS","CANT_LOGIN","hideNotification","a","Notification","show","message","timeout","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","elevation","severity","Notifications","notification","Config","createMuiTheme","createBrowserHistory","forEach","Page","roles","all","includes","toString","list","enabled","EntityHeadSortable","children","field","active","onSortChange","direction","TableCell","TableSortLabel","EntityList","loader","table","data","selected","sortBy","sortDir","canView","canEdit","canSelect","setSelected","visibleFields","hideInList","useHistory","onRowClick","onSelect","el","isAllSelected","onSelectAll","CircularProgress","TableContainer","Table","TableHead","TableRow","Checkbox","checked","sortable","TableBody","entry","i","hover","_","EntityField","size","ButtonGroup","RouterLink","Filter","formControl","minWidth","select","input","marginRight","transform","clear","iconButton","filters","filterData","setFilters","applyFilter","onSelectField","String","setFilterValue","index","removeFilter","filterableFields","filterable","selectableFields","some","currentFilters","find","FormControl","InputLabel","htmlFor","Select","handler","isEditing","tabIndex","EntityHead","buttons","canCreate","clearFilter","Grid","container","justify","EntityFooter","totalCount","itemsPerPage","items","setPage","setPerPage","onChangeRowsPerPage","parseInt","onChangePage","newPage","TablePagination","rowsPerPageOptions","count","labelRowsPerPage","rowsPerPage","EntityViewer","grid","gridTemplateColumns","marginBottom","fontFamily","typography","gridColumnStart","gridColumnEnd","errors","onSave","onResetFieldError","viewable","setEditorData","cancelGetItem","withToken","isCreating","hideInEdit","onFieldChange","f","style","flexWrap","item","flex","EntityBreadcrumbs","breadcrumbs","Breadcrumbs","Entity","fetchItemsInstance","fetchItemsCancel","updateItemInstance","getItemsCancel","getItemsInstance","fetchItems","update","create","ListHeadTitle","ListHeadButtons","creatable","editable","selectable","setSort","ListHead","ListBody","ListFooter","editorData","ViewerHeadButtons","editorFieldErrors","resetFieldError","ViewerHead","ViewerBody","ViewerFooter","EditorHeadButtons","updateItem","EditorHead","EditorBody","EditorFooter","CreatorHeadButtons","createItem","createEmptyItem","CreatorHead","CreatorBody","CreatorFooter","Creator","match","params","Editor","Viewer","List","method","ENTITY_SORT_DIRS","ASC","DESC","api","fetchItemsFn","ENTITY_ERRORS","CANT_LOAD_ITEMS","toJS","result","validateSubmitFields","INCORRECT_INPUT","updateItemsFn","createItemsFn","reduce","obj","validator","FIELD_IS_REQUIRED","keys","get","getItemsFn","module","exports","EntityFieldBase64Image","top","outlinedInput","image","backgroundSize","backgroundPosition","preview","options","innerError","setInnerError","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","loadImage","files","maxSize","minSize","allowedMimeType","photo","img","Image","naturalWidth","naturalHeight","minViewBox","maxViewBox","backgroundImage","OutlinedInput","flexDirection","inputComponent","startIcon","accept","mimes","join","Box","ENTITY_FIELD_RENDERS","string","helperText","date","toISOString","DatePicker","Date","format","inputVariant","datetime","DateTimePicker","boolean","FormControlLabel","control","inputProps","phone","replace","mask","richtext","val","setVal","contentHTML","convertFromHTML","state","ContentState","createFromBlockArray","contentBlocks","entityMap","convertToRaw","draftToHtml","getCurrentContent","controls","dangerouslySetInnerHTML","__html","base64image","number","parseFloat","toFixed","accuracy","getEntityFieldRenderer","prototype","hasOwnProperty","call","CANT_UPDATE_ITEM","SAMPLE_ENTITY_1","created","createdTime","visible","SAMPLE_ENTITY_2","setTimeout","totalPages","ReactDOM","document","getElementById","cb","createElement"],"mappings":"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","file":"static/js/main.ae921ced.chunk.js","sourcesContent":["/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './auth'\nexport * from './config'\nexport * from './entity'\nexport * from './page'","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { EntityField } from './EntityField';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from '@material-ui/core';\n\nexport default (theme: Theme) =>\n  createStyles({\n    wrap: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '100vh',\n    },\n    paper: {\n      padding: theme.spacing(4),\n    },\n    header: {\n      // color: theme.palette.text,\n      fontSize: '34px',\n      fontWeight: 900,\n    },\n    marginTop: {\n      marginTop: theme.spacing(4),\n    },\n    forgot: {\n      cursor: 'pointer',\n\n      '& > p': {\n        fontSize: '12px',\n        fontWeight: 400,\n        color: theme.palette.text,\n        opacity: 0.7,\n\n        '&:hover': {\n          opacity: 1,\n        },\n      },\n    },\n  });\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  MouseEventHandler,\n  FormEvent,\n  useCallback,\n  useState,\n} from 'react';\n\nimport {\n  Paper,\n  Typography,\n  TextField,\n  withStyles,\n  InputAdornment,\n  Button,\n  WithStyles,\n  Container,\n} from '@material-ui/core';\n\nimport styles from '../styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  onForgotScreenClick?: MouseEventHandler;\n  onSubmit: ({ email, password }: { email: string; password: string }) => void;\n};\n\nconst SignInUnstyled: FC<IProps> = ({\n  classes,\n  onForgotScreenClick,\n  onSubmit,\n}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n      onSubmit({ email, password });\n    },\n    [email, password, onSubmit]\n  );\n\n  const onEmailChange = useCallback((event) => setEmail(event.target.value), [\n    setEmail,\n  ]);\n\n  const onPasswordChange = useCallback(\n    (event) => setPassword(event.target.value),\n    [setPassword]\n  );\n\n  return (\n    <div className={classes.wrap}>\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <Typography align=\"center\" component=\"h3\" className={classes.header}>\n            \n          </Typography>\n\n          <form noValidate onSubmit={onSubmitCapture}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              className={classes.marginTop}\n              autoComplete=\"email\"\n              defaultValue={email}\n              onChange={onEmailChange}\n              autoFocus\n            />\n\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"\"\n              type=\"password\"\n              id=\"password\"\n              className={classes.marginTop}\n              defaultValue={password}\n              onChange={onPasswordChange}\n              autoComplete=\"current-password\"\n              InputProps={{\n                endAdornment: onForgotScreenClick ? (\n                  <InputAdornment\n                    position=\"end\"\n                    onClick={onForgotScreenClick}\n                    className={classes.forgot}\n                  >\n                     ?\n                  </InputAdornment>\n                ) : null,\n              }}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.marginTop}\n              disabled={!email.length || !password.length}\n            >\n              \n            </Button>\n          </form>\n        </Paper>\n      </Container>\n    </div>\n  );\n};\n\nconst SignIn = withStyles(styles, { withTheme: true })(SignInUnstyled);\n\nexport { SignIn };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useState, useRef, useMemo } from 'react';\nimport {\n  IconButton,\n  WithStyles,\n  withStyles,\n  Menu,\n  MenuItem,\n  Typography,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { Link } from 'react-router-dom';\n\ntype IProps = WithStyles<typeof styles> & {\n  email?: string;\n  username?: string;\n  role?: string;\n  onLogout?: () => void;\n};\n\nconst AccountUnstyled: FC<IProps> = ({\n  classes,\n  email,\n  username,\n  role,\n  onLogout,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const onMenuOpen = useCallback(() => setIsMenuOpen(true), [setIsMenuOpen]);\n  const onMenuClose = useCallback(() => setIsMenuOpen(false), [setIsMenuOpen]);\n\n  const name = useMemo(() => email || username || '', [email, username]);\n\n  return (\n    <div className={classes.account} ref={ref}>\n      <IconButton\n        aria-label=\"account of current user\"\n        aria-controls=\"menu-appbar\"\n        aria-haspopup=\"true\"\n        onClick={onMenuOpen}\n        color=\"inherit\"\n      >\n        <span className={classes.accountCircle}>\n          {(name && name.charAt(0)) || ''}\n        </span>\n      </IconButton>\n\n      <Menu\n        id=\"menu-appbar\"\n        anchorEl={ref.current}\n        keepMounted\n        open={isMenuOpen}\n        onClose={onMenuClose}\n      >\n        <MenuItem>\n          <div>\n            {name && <Typography component=\"div\">{name}</Typography>}\n            {role && (\n              <Typography\n                component=\"span\"\n                variant=\"caption\"\n                color=\"textSecondary\"\n              >\n                {role}\n              </Typography>\n            )}\n          </div>\n        </MenuItem>\n\n        <MenuItem component={Link} onClick={onLogout} to=\"/logout\">\n          <Typography component=\"span\" color=\"primary\">\n              \n          </Typography>\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n};\n\nconst Account = withStyles(styles)(AccountUnstyled);\n\nexport { Account };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from \"@material-ui/core\";\n\nexport default (theme: Theme) => createStyles({\n  account: {\n    paddingLeft: theme.spacing(3),\n    borderLeft: \"1px solid #e1e8ee\",\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: \"40px\"\n  },\n  accountCircle: {\n    width: \"42px\",\n    height: \"42px\",\n    backgroundColor: \"#f0f0f3\",\n    borderRadius: \"50%\",\n    color: \"#a5b0bf\",\n    fontSize: \"24px\",\n    fontWeight: 400,\n    textTransform: \"uppercase\",\n    lineHeight: \"42px\"\n  },\n});","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles';\nimport { withStyles, AppBar, Toolbar, WithStyles } from '@material-ui/core';\nimport { Link, NavLink } from 'react-router-dom';\nimport { Account } from '../Account';\n\ntype IProps = WithStyles<typeof styles> & {\n  logo?: { url?: string; title?: string };\n  account?: { email?: string; username?: string; role?: string };\n  links: { name: string; url: string }[];\n  onLogout?: () => void;\n};\n\nconst NavigationUnstyled: FC<IProps> = ({\n  classes,\n  logo,\n  links,\n  account,\n  onLogout,\n}) => {\n  return (\n    <AppBar position=\"static\" className={classes.appbar}>\n      <Toolbar className={classes.toolbar}>\n        {logo && (\n          <Link to=\"/\" className={classes.title}>\n            <img\n              src={logo.url}\n              title={logo.title}\n              className={classes.logo}\n              alt={logo.title}\n            />\n          </Link>\n        )}\n\n        {links && links.length > 0 && (\n          <div className={classes.links}>\n            {links.map(({ name, url }) => (\n              <NavLink key={name} className={classes.link} to={url}>\n                {name}\n              </NavLink>\n            ))}\n          </div>\n        )}\n\n        {account && (\n          <Account\n            email={account.email}\n            username={account.username}\n            role={account.role}\n            onLogout={onLogout}\n          />\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nconst Navigation = withStyles(styles, { withTheme: true })(NavigationUnstyled);\n\nexport { Navigation };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from '@material-ui/core';\n\nexport default (theme: Theme) =>\n  createStyles({\n    appbar: {\n      backgroundColor: '#fff',\n      height: '78px',\n      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    },\n    toolbar: {\n      height: '78px',\n    },\n    title: {\n      // marginLeft: theme.spacing(2),\n      flexGrow: 1,\n    },\n    links: {\n      height: '100%',\n      display: 'flex',\n      alignItems: 'center',\n    },\n    logo: {\n      maxHeight: 54,\n    },\n    link: {\n      color: '#a5b0bf',\n      fontSize: '12px',\n      fontWeight: 500,\n      textTransform: 'uppercase',\n      textDecoration: 'none',\n      padding: '0 16px',\n      position: 'relative',\n\n      '&.active': {\n        color: '#282f36',\n\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          height: '2px',\n          width: '100%',\n          backgroundColor: theme.palette.primary.main,\n          left: 0,\n          bottom: '-30px',\n        },\n      },\n    },\n  });\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useEffect } from 'react';\nimport { Page } from '~/application/modules/Page';\nimport { observer } from 'mobx-react';\n\ninterface IProps {\n  page: Page;\n}\n\nconst PageRenderer: FC<IProps> = observer(({ page }) => {\n  useEffect(() => {\n    if (page.onMount) page.onMount(page);\n\n    return () => {\n      if (page.onUnmount) page.onUnmount(page);\n    };\n  }, []);\n\n  return (\n    <div className=\"renderer\">\n      <page.output />\n    </div>\n  );\n});\n\nexport { PageRenderer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, FormEvent, useState } from 'react';\nimport {\n  Typography,\n  Paper,\n  TextField,\n  Button,\n  withStyles,\n  WithStyles,\n  Container,\n} from '@material-ui/core';\n\nimport styles from '../styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  onSubmit?: ({ email }: { email: string }) => void;\n};\n\nconst ForgotPasswordUnstyled: FC<IProps> = ({ classes, onSubmit }) => {\n  const [email, setEmail] = useState('');\n\n  const onEmailChange = useCallback(\n    (event) => {\n      setEmail(event.target.value);\n    },\n    [setEmail]\n  );\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n\n      if (!onSubmit) return;\n\n      onSubmit({ email });\n    },\n    [onSubmit, email]\n  );\n\n  return (\n    <div className={classes.wrap}>\n      <Container component=\"main\" maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <Typography align=\"center\" component=\"h3\" className={classes.header}>\n             \n          </Typography>\n\n          <form noValidate onSubmit={onSubmitCapture}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email\"\n              name=\"email\"\n              className={classes.marginTop}\n              autoComplete=\"email\"\n              defaultValue={email}\n              onChange={onEmailChange}\n              autoFocus\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.marginTop}\n              disabled={!email.length}\n            >\n              \n            </Button>\n          </form>\n        </Paper>\n      </Container>\n    </div>\n  );\n};\n\nconst ForgotPassword = withStyles(styles, { withTheme: true })(\n  ForgotPasswordUnstyled\n);\n\nexport { ForgotPassword };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, Fragment, useCallback } from 'react';\nimport { Config } from '../Config';\nimport { observer } from 'mobx-react';\nimport { Switch, Route, Redirect, Router } from 'react-router-dom';\nimport { SignIn } from '~/containers/login/SignIn';\nimport { Navigation } from '~/containers/layout/Navigation';\nimport { PageRenderer } from '../PageRenderer';\nimport {\n  Container,\n  WithStyles,\n  withStyles,\n  CssBaseline,\n  ThemeProvider,\n} from '@material-ui/core';\nimport styles from './styles';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { ForgotPassword } from '~/containers/login/ForgotPassword';\n\ntype IProps = WithStyles<typeof styles> & {\n  config: Config;\n};\n\nconst Application = withStyles(styles)(\n  observer(({ classes, config }: IProps) => {\n    const links = useMemo(\n      () =>\n        config.pages\n          .filter((page) => page?.menu?.url && page.canList)\n          .map((page) => ({\n            name: page.menu.label,\n            url: page.menu.url,\n          })),\n      [config.pages, config.auth?.user?.role]\n    );\n\n    const role = useMemo(\n      () =>\n        (config.auth?.roleTitles &&\n          config.auth?.user?.role &&\n          config.auth?.roleTitles[config.auth?.user?.role]) ||\n        config.auth?.user?.role,\n      [config.auth?.roleTitles, config.auth?.user?.role]\n    );\n\n    const onForgotPassword = useMemo(\n      () =>\n        config.auth?.authPasswRestoreFn\n          ? () => {\n              config.history.push('/restore');\n            }\n          : undefined,\n      [config.history, config.auth, config.auth?.authPasswRestoreFn]\n    );\n\n    if (!config.auth?.isLogged && config.auth?.sendAuthRequest) {\n      return (\n        <ThemeProvider theme={config.theme}>\n          <CssBaseline />\n\n          <Router history={config.history}>\n            <Switch>\n              <Route\n                path=\"/restore\"\n                render={() => (\n                  <ForgotPassword\n                    onSubmit={config.auth?.sendAuthPasswRestore}\n                  />\n                )}\n              />\n\n              <SignIn\n                onSubmit={config.auth.sendAuthRequest}\n                onForgotScreenClick={onForgotPassword}\n              />\n            </Switch>\n          </Router>\n\n          <config.notifications.Output />\n        </ThemeProvider>\n      );\n    }\n\n    return (\n      <ThemeProvider theme={config.theme}>\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <CssBaseline />\n\n          <Router history={config.history}>\n            <Navigation\n              links={links}\n              logo={{ url: config.logo, title: config.title }}\n              account={{\n                email: config.auth?.user?.email || '',\n                username: config.auth?.user?.username || '',\n                role,\n              }}\n              onLogout={config.auth?.logout}\n            />\n\n            <Container maxWidth=\"xl\" className={classes.wrapper}>\n              <Switch>\n                {config.pages\n                  .filter((page) => page?.menu?.url)\n                  .map((page) => (\n                    <Route\n                      path={page.menu.url}\n                      render={() => <PageRenderer page={page} />}\n                      key={page.menu.url}\n                    />\n                  ))}\n                {links.length > 0 && <Redirect to={links[0].url} />}\n              </Switch>\n            </Container>\n          </Router>\n\n          <config.notifications.Output />\n        </MuiPickersUtilsProvider>\n      </ThemeProvider>\n    );\n  })\n);\n\nexport { Application };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(4),\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\n// import React from 'react';\nimport { EMPTY_USER, IAuthProviderProps } from '~/application/types/auth';\nimport { computed, observable, action, reaction, toJS } from 'mobx';\nimport { flow } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Config } from '../Config';\n\nexport class AuthProvider {\n  // From props\n  @observable parent?: Config;\n  @observable user: IAuthProviderProps['user'] = EMPTY_USER;\n  @observable authRequestFn?: IAuthProviderProps['authRequestFn'];\n  @observable authPasswRestoreFn?: IAuthProviderProps['authPasswRestoreFn'];\n  @observable roleTitles?: Record<any, string>;\n  @observable persist?: IAuthProviderProps['persist'] = true;\n\n  constructor(fields?: Partial<IAuthProviderProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n\n    if (this.persist) {\n      const { user } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = { ...EMPTY_USER, ...user };\n      }\n\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  // Built-in\n  @observable isLoading: boolean = false;\n  @observable error: string = '';\n\n  sendAuthRequestInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthRequest = ({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: AuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authRequestFn(email, password).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.user = response.user;\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  sendAuthPasswRestoreInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthPasswRestore = ({ email }: { email: string }) => {\n    this.sendAuthPasswRestoreCancel();\n\n    this.sendAuthPasswRestoreInstance = flow(function* sendAuthPasswRestore(\n      this: AuthProvider\n    ) {\n      if (!this.authPasswRestoreFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authPasswRestoreFn(email).catch(() => null);\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.parent?.notifications.showSuccess('Check your email');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthPasswRestoreCancel = () => {\n    if (\n      this.sendAuthPasswRestoreInstance &&\n      this.sendAuthPasswRestoreInstance.cancel\n    ) {\n      this.sendAuthPasswRestoreInstance.cancel();\n    }\n  };\n\n  getPersistedCredentials = (): { user?: IAuthProviderProps['user'] } => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return { user };\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  @action\n  logout = () => {\n    this.user = EMPTY_USER;\n  };\n\n  @observable\n  withToken = (req: any, args: any) => {\n    return req({ ...args, token: this.user.token });\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.user.token;\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  EMPTY_USER,\n  IAuthProviderProps,\n  AUTH_ERRORS,\n} from '~/application/types/auth';\nimport { computed, observable, action, reaction, toJS } from 'mobx';\nimport { flow } from 'mobx';\nimport { AuthProvider } from '../AuthProvider';\nimport { Unwrap } from '~/application/types/common';\n\nconst EMPTY_TOKENS = {\n  access: '',\n  refresh: '',\n};\n\nexport class JWTAuthProvider extends AuthProvider {\n  @observable tokens: Record<string, string> = EMPTY_TOKENS;\n  @observable authRequestFn?: (\n    email: string,\n    password: string\n  ) => Promise<{\n    user: IAuthProviderProps['user'];\n    tokens: Record<string, string>;\n    error: string;\n  }>;\n\n  constructor(fields?: Partial<IAuthProviderProps>) {\n    super(fields);\n\n    if (this.persist) {\n      const { user, tokens } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = user;\n      }\n\n      if (tokens) {\n        this.tokens = tokens;\n      }\n\n      reaction(() => this.tokens, this.persistTokens);\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  @action\n  sendAuthRequest = ({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: JWTAuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response: Unwrap<typeof this.authRequestFn> = yield this.authRequestFn(\n          email,\n          password\n        );\n\n        if (!response || response.error) {\n          this.parent?.notifications.showError(\n            response?.error || AUTH_ERRORS.CANT_LOGIN\n          );\n          throw new Error(response?.error);\n        }\n\n        this.parent?.notifications.hideNotification();\n        this.user = response.user;\n        this.tokens = response.tokens;\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  @action\n  logout = () => {\n    this.user = EMPTY_USER;\n    this.tokens = EMPTY_TOKENS;\n  };\n\n  @observable\n  withToken = async (req: any, args: any) => {\n    return req({ ...args, token: `Bearer ${this.tokens.access}` });\n  };\n\n  getPersistedCredentials = (): {\n    user?: IAuthProviderProps['user'];\n    tokens?: Record<string, string>;\n  } => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return { user, tokens };\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  persistTokens = () => {\n    localStorage.setItem('tokens', JSON.stringify(this.tokens));\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.tokens.access;\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { Snackbar } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { INotification } from '~/application/types/notification';\n\ninterface IProps {\n  hideNotification: () => void;\n  show: INotification['show'];\n  type: INotification['type'];\n  message: INotification['message'];\n  timeout: INotification['timeout'];\n}\n\nconst Notification: FC<IProps> = ({\n  hideNotification,\n  show,\n  type,\n  message,\n  timeout,\n}) => {\n  const onClose = useCallback(\n    (...args) => {\n      hideNotification();\n    },\n    [hideNotification]\n  );\n\n  return (\n    <Snackbar\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      key=\"bottom,left\"\n      open={show}\n      onClose={onClose}\n      autoHideDuration={timeout}\n    >\n      <Alert\n        elevation={6}\n        variant=\"filled\"\n        onClose={onClose}\n        severity={type || 'info'}\n      >\n        {message}\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport { Notification };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { observable, action, reaction, computed } from 'mobx';\nimport { INotification } from '~/application/types/notification';\nimport { observer } from 'mobx-react';\nimport { Notification } from '~/containers/login/Notification';\n\nexport class Notifications {\n  @observable notification: INotification = {\n    show: false,\n    message: '',\n    type: 'info',\n    timeout: 6000,\n  };\n\n  @action\n  hideNotification = () => {\n    this.notification.show = false;\n  };\n\n  @action\n  showError = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'error';\n  };\n\n  @action\n  showSuccess = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'success';\n  };\n\n  @computed\n  get Output() {\n    return observer(() => (\n      <Notification\n        hideNotification={this.hideNotification}\n        message={this.notification.message}\n        type={this.notification.type}\n        timeout={this.notification.timeout}\n        show={this.notification.show}\n      />\n    ));\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IConfigProps } from '~/application/types/config';\nimport { Theme, createMuiTheme } from '@material-ui/core';\nimport { createBrowserHistory } from 'history';\nimport { Notifications } from '../Notification';\n\nexport class Config {\n  name: IConfigProps['name'] = '';\n  pages: IConfigProps['pages'] = [];\n  auth?: IConfigProps['auth'];\n  logo?: IConfigProps['logo'];\n  title?: IConfigProps['title'];\n  theme: Theme = createMuiTheme({});\n  history = createBrowserHistory();\n  notifications = new Notifications();\n\n  constructor(fields?: Partial<IConfigProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n\n    if (this.pages.length) {\n      this.pages.forEach((page) => {\n        page.parent = this;\n      });\n    }\n\n    if (this.auth) {\n      this.auth.parent = this;\n    }\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { IPageProps } from '~/application/types/page';\nimport { observable, computed, action, toJS } from 'mobx';\nimport { observer } from 'mobx-react';\n\nexport class Page {\n  @observable title: IPageProps['title'] = '';\n  @observable menu: IPageProps['menu'] = { enabled: true, label: '', url: '' };\n  @observable parent?: IPageProps['parent'];\n  @observable roles?: IPageProps['roles'];\n\n  constructor(fields?: Partial<IPageProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n  }\n\n  @action\n  onMount: (page: Page) => void = () => {};\n\n  @action\n  onUnmount: (page: Page) => void = () => {};\n\n  @computed\n  get canList() {\n    return !!(\n      !this.roles ||\n      (this.parent?.auth?.user?.role &&\n        (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n          this.roles?.list?.includes(this.parent.auth?.user?.role.toString())))\n    );\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{this.title}</h1>\n        <div>You can override this class to make your own cool entity</div>\n      </div>\n    ));\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, HTMLAttributes, useCallback } from 'react';\nimport { TableCell, TableSortLabel } from '@material-ui/core';\nimport { ENTITY_SORT_DIRS } from '~/application';\n\ntype IProps = HTMLAttributes<HTMLDivElement> & {\n  field: string;\n  active?: boolean;\n  direction?: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  onSortChange: (field: string) => void;\n};\n\nconst EntityHeadSortable: FC<IProps> = ({\n  children,\n  field,\n  active,\n  onSortChange,\n  direction,\n}) => {\n  const onClick = useCallback(() => onSortChange(field), [field, onSortChange]);\n\n  return (\n    <TableCell>\n      <TableSortLabel active={active} direction={direction} onClick={onClick}>\n        {children}\n      </TableSortLabel>\n    </TableCell>\n  );\n};\n\nexport { EntityHeadSortable };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, useCallback } from 'react';\nimport {\n  TableContainer,\n  Table,\n  TableCell,\n  TableHead,\n  TableRow,\n  TableBody,\n  Paper,\n  CircularProgress,\n  Button,\n  ButtonGroup,\n  withStyles,\n  WithStyles,\n  Checkbox,\n} from '@material-ui/core';\nimport { IEntityField, ENTITY_SORT_DIRS } from '~/application/';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { EntityHeadSortable } from '~/components/pages/EntityHeadSortable';\nimport styles from './styles';\nimport { EntityField } from '../../../application/components/EntityField';\nimport { useHistory } from 'react-router-dom';\n\ntype IProps = WithStyles<typeof styles> & {\n  isLoading: boolean;\n  fields: IEntityField[];\n  data: Record<string, string>[];\n  url: string;\n  sortBy: string;\n  sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  selected: any[];\n  canView: boolean;\n  canEdit: boolean;\n  canSelect?: boolean;\n  setSelected: (items: any[]) => void;\n  onSortChange: (field: string) => void;\n};\n\nconst EntityList = withStyles(styles)(\n  ({\n    classes,\n    isLoading,\n    fields,\n    data,\n    url,\n    selected,\n    sortBy,\n    sortDir,\n    canView,\n    canEdit,\n    canSelect,\n    onSortChange,\n    setSelected,\n  }: IProps) => {\n    const visibleFields = useMemo(\n      () => fields.filter((field) => !field.hideInList),\n      [fields]\n    );\n\n    const history = useHistory();\n\n    const onRowClick = useCallback(\n      (id: any) => {\n        if (canView) {\n          return history.push(`${url}/${id}`);\n        }\n\n        if (canEdit) {\n          return history.push(`${url}/${id}/edit`);\n        }\n      },\n      [canView, canEdit, history, url]\n    );\n\n    const onSelect = useCallback(\n      (id: any, includes: boolean) => {\n        setSelected(\n          !includes ? selected.filter((el) => el !== id) : [...selected, id]\n        );\n      },\n      [selected, setSelected]\n    );\n\n    const isAllSelected = useMemo(() => selected.length === data.length, [\n      data,\n      selected,\n    ]);\n\n    const onSelectAll = useCallback(() => {\n      setSelected(isAllSelected ? [] : data.map((el) => el.id));\n    }, [selected, setSelected, isAllSelected, data]);\n\n    if (isLoading) {\n      return (\n        <div className={classes.loader}>\n          <CircularProgress />\n        </div>\n      );\n    }\n\n    return (\n      <Paper>\n        <TableContainer>\n          <Table className={classes.table}>\n            <TableHead>\n              <TableRow>\n                {canSelect && (\n                  <TableCell>\n                    <Checkbox onChange={onSelectAll} checked={isAllSelected} />\n                  </TableCell>\n                )}\n                {visibleFields.map((field) =>\n                  field.sortable ? (\n                    <EntityHeadSortable\n                      active={sortBy === field.name}\n                      direction={sortDir}\n                      key={field.name}\n                      field={field.name}\n                      onSortChange={onSortChange}\n                    >\n                      <b>{field.label || field.name}</b>\n                    </EntityHeadSortable>\n                  ) : (\n                    <TableCell key={field.name}>\n                      <b>{field.label || field.name}</b>\n                    </TableCell>\n                  )\n                )}\n                {(canView || canEdit) && <TableCell />}\n              </TableRow>\n            </TableHead>\n\n            <TableBody>\n              {data.map((entry, i) => (\n                <TableRow key={i} hover>\n                  {canSelect && (\n                    <TableCell>\n                      <Checkbox\n                        checked={selected.includes(entry.id)}\n                        onChange={(_, includes) => onSelect(entry.id, includes)}\n                      />\n                    </TableCell>\n                  )}\n\n                  {visibleFields.map((field) => (\n                    <TableCell\n                      key={field.name}\n                      onClick={() => onRowClick(entry.id)}\n                    >\n                      <EntityField\n                        name={field.name}\n                        fields={fields}\n                        data={entry}\n                      />\n                    </TableCell>\n                  ))}\n                  {(canEdit || canView) && (\n                    <TableCell size=\"small\" align=\"right\">\n                      <ButtonGroup variant=\"text\">\n                        {canEdit && (\n                          <Button\n                            to={`${url}/${entry.id}/edit`}\n                            component={RouterLink}\n                          >\n                            <EditIcon />\n                          </Button>\n                        )}\n                        {canView && (\n                          <Button\n                            to={`${url}/${entry.id}/`}\n                            component={RouterLink}\n                          >\n                            <VisibilityIcon />\n                          </Button>\n                        )}\n                      </ButtonGroup>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    );\n  }\n);\n\nexport { EntityList };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  table: {\n    '& td, & th': {\n      padding: theme.spacing(),\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { ChangeEvent, useCallback, Fragment, useMemo } from 'react';\n\nimport {\n  withStyles,\n  WithStyles,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  IconButton,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { IEntityProps, IFilterValue } from '~/application/types/entity';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { EntityField } from '~/application/components/EntityField';\nimport { observer } from 'mobx-react';\n\ntype IProps = WithStyles<typeof styles> & {\n  fields: IEntityProps['fields'];\n  filters: IFilterValue[];\n  filterData: Record<string, any>;\n\n  clearFilter: () => void;\n  applyFilter: () => void;\n  setFilters: (filters: IFilterValue[]) => void;\n};\n\nconst Filter = withStyles(styles)(\n  observer(\n    ({\n      classes,\n      fields,\n      filters,\n      filterData,\n      setFilters,\n      applyFilter,\n    }: IProps) => {\n      const onSelectField = useCallback(\n        (event: ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\n          if (!event.target.value) return;\n\n          setFilters([\n            ...filters,\n            { name: String(event.target.value), value: '' },\n          ]);\n        },\n        [setFilters, filters]\n      );\n\n      const setFilterValue = useCallback(\n        (i: number) => (value: any) => {\n          setFilters(\n            filters.map((filter, index) =>\n              i === index ? { ...filter, value } : filter\n            )\n          );\n        },\n        [filters, setFilters]\n      );\n\n      const removeFilter = useCallback(\n        (i: number) => () => {\n          setFilters(filters.filter((_, index) => i !== index));\n        },\n        [filters, setFilters]\n      );\n\n      const filterableFields = useMemo(\n        () => fields.filter((field) => field.filterable),\n        [fields]\n      );\n\n      const selectableFields = useMemo(\n        () =>\n          filterableFields.filter(\n            (field) => !filters.some((filter) => filter.name === field.name)\n          ),\n        [filterableFields, filters]\n      );\n\n      const currentFilters = useMemo(\n        () =>\n          filters\n            .map((filter) =>\n              filterableFields.find((field) => field.name === filter.name)\n            )\n            .filter((field) => !!field) || [],\n        [filterableFields, filters]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          applyFilter();\n        },\n        [applyFilter]\n      );\n\n      return (\n        <form className={classes.wrapper} onSubmit={onSubmit}>\n          {selectableFields.length > 0 && (\n            <FormControl variant=\"outlined\" className={classes.formControl}>\n              <InputLabel htmlFor=\"field\" className={classes.label}>\n                \n              </InputLabel>\n\n              <Select\n                variant=\"outlined\"\n                id=\"field\"\n                name=\"field\"\n                label=\"\"\n                value=\"\"\n                onChange={onSelectField}\n                className={classes.select}\n              >\n                <MenuItem value=\"\">...</MenuItem>\n\n                {selectableFields.map((field) => (\n                  <MenuItem key={field.name} value={field.name}>\n                    {field.label || field.name}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          )}\n\n          {currentFilters.map(\n            (field, i) =>\n              field && (\n                <div className={classes.input} key={field.name}>\n                  <EntityField\n                    name={field.name}\n                    fields={fields}\n                    data={{ ...filterData, [field.name]: filters[i].value }}\n                    handler={setFilterValue(i)}\n                    isEditing\n                  />\n\n                  <IconButton\n                    color=\"secondary\"\n                    onClick={removeFilter(i)}\n                    className={classes.clear}\n                    tabIndex={0}\n                  >\n                    <ClearIcon />\n                  </IconButton>\n                </div>\n              )\n          )}\n          {currentFilters.length > 0 && (\n            <Fragment>\n              <IconButton\n                color=\"primary\"\n                onClick={applyFilter}\n                className={classes.iconButton}\n                tabIndex={0}\n              >\n                <CheckIcon />\n              </IconButton>\n            </Fragment>\n          )}\n        </form>\n      );\n    }\n  )\n);\n\nexport { Filter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    height: '36px',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  formControl: {\n    margin: `0 ${theme.spacing(1)}px 0 0`,\n    minWidth: 120,\n  },\n  select: {\n    '& > div': {\n      padding: '10px 14px 7px',\n    },\n  },\n  input: {\n    display: 'flex',\n    boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 1px',\n    borderRadius: '0 4px 4px 0',\n    marginRight: 5,\n\n    '& .select': {\n      padding: '10px 34px 7px 14px',\n    },\n    '& input': {\n      padding: '10px 14px 7px',\n    },\n    '& label': {\n      transform: 'translate(10px, 12px) scale(0.9)',\n    },\n  },\n  clear: {\n    height: 36,\n    width: 36,\n    padding: 0,\n  },\n  label: {\n    transform: 'translate(10px, 12px) scale(0.9)',\n  },\n  iconButton: {\n    height: 36,\n    width: 36,\n    padding: 0,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, ReactElement } from 'react';\nimport {\n  Typography,\n  withStyles,\n  WithStyles,\n  Grid,\n  Button,\n} from '@material-ui/core';\nimport styles from './styles';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { IEntityProps } from '~/application';\nimport { Filter } from '~/components/pages/Filter';\n\ntype IProps = WithStyles<typeof styles> & {\n  title: ReactElement;\n  buttons: ReactElement;\n  canCreate: boolean;\n  url: string;\n  filters: IEntityProps['filters'];\n  fields: IEntityProps['fields'];\n  filterData: Record<string, any>;\n  setFilters: (filters: IEntityProps['filters']) => void;\n  applyFilter: () => void;\n};\n\nconst EntityHeadUnstyled: FC<IProps> = ({\n  classes,\n  title,\n  buttons,\n  filters,\n  fields,\n  canCreate,\n  url,\n  filterData,\n\n  setFilters,\n  applyFilter,\n}) => {\n  const clearFilter = useCallback(() => {\n    setFilters([]);\n    applyFilter();\n  }, [setFilters, filters, applyFilter]);\n\n  return (\n    <Grid\n      container\n      justify=\"space-between\"\n      alignItems=\"center\"\n      className={classes.header}\n    >\n      {title}\n\n      {filters && (\n        <Filter\n          filterData={filterData}\n          fields={fields}\n          filters={filters}\n          setFilters={setFilters}\n          applyFilter={applyFilter}\n          clearFilter={clearFilter}\n        />\n      )}\n\n      {buttons && <div className={classes.buttons}>{buttons}</div>}\n\n      {canCreate && url && (\n        <Button\n          type=\"button\"\n          variant=\"contained\"\n          color=\"primary\"\n          component={RouterLink}\n          to={`${url}/create`}\n        >\n          \n        </Button>\n      )}\n    </Grid>\n  );\n};\n\nconst EntityHead = withStyles(styles)(EntityHeadUnstyled);\nexport { EntityHead };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  header: {\n    margin: '5px 0',\n    display: 'flex',\n    justifyContent: 'center',\n\n    '& > *': {\n      margin: '5px 0',\n    },\n  },\n  title: {\n    color: '#282f36',\n    fontSize: '34px',\n    fontWeight: 900,\n    flexGrow: 1,\n  },\n  buttons: {\n    marginRight: theme.spacing(1),\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { Paper, TablePagination } from '@material-ui/core';\n\ninterface IProps {\n  itemsPerPage: number[];\n  items: number;\n  totalCount: number;\n  page: number;\n  setPage: (count: number) => void;\n  setPerPage: (count: number) => void;\n}\n\nconst EntityFooter: FC<IProps> = ({\n  totalCount,\n  page,\n  itemsPerPage,\n  items,\n  setPage,\n  setPerPage,\n}) => {\n  const onChangeRowsPerPage = useCallback(\n    (event) => setPerPage(parseInt(event.target.value)),\n    [setPerPage]\n  );\n\n  const onChangePage = useCallback((_, newPage) => setPage(newPage), [setPage]);\n\n  return (\n    <TablePagination\n      rowsPerPageOptions={itemsPerPage}\n      component=\"div\"\n      count={totalCount}\n      labelRowsPerPage=\" :\"\n      rowsPerPage={items}\n      page={page}\n      onChangePage={onChangePage}\n      onChangeRowsPerPage={onChangeRowsPerPage}\n    />\n  );\n};\n\nexport { EntityFooter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, useEffect, useCallback } from 'react';\n\nimport {\n  withStyles,\n  WithStyles,\n  Paper,\n  Grid,\n  Button,\n  CircularProgress,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { IEntityField, getEntityFieldRenderer } from '~/application';\nimport { observer } from 'mobx-react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { EntityField } from '../../../application/components/EntityField';\n\ntype IProps = WithStyles<typeof styles> & {\n  url: string;\n  id?: string;\n  fields: IEntityField[];\n  errors: Record<string, string>;\n  isEditing: boolean;\n  isLoading: boolean;\n  data: Record<string, any>;\n  viewable: boolean;\n\n  setEditorData: (data: Record<string, any>) => void;\n  getItem: (id: any) => void;\n  cancelGetItem: () => void;\n  onSave: () => void;\n  onResetFieldError: (field: string) => void;\n  withToken?: (req: any, args: any) => any;\n};\n\nconst EntityViewer = withStyles(styles)(\n  observer(\n    ({\n      classes,\n      id,\n      fields,\n      errors,\n      url,\n      isEditing,\n      onSave,\n      onResetFieldError,\n      viewable,\n      isLoading,\n      data,\n      setEditorData,\n      getItem,\n      cancelGetItem,\n      withToken,\n    }: IProps) => {\n      const isCreating = useMemo(() => typeof id === 'undefined', [id]);\n\n      const visibleFields = useMemo(\n        () => fields.filter((field) => !field.hideInEdit),\n        [fields]\n      );\n\n      const onFieldChange = useCallback(\n        (f) => (value: any) => {\n          if (errors[f]) {\n            onResetFieldError(f);\n          }\n\n          setEditorData({ ...data, [f]: value });\n        },\n        [data, setEditorData, errors]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          onSave();\n        },\n        [onSave]\n      );\n\n      useEffect(() => {\n        getItem(id);\n        return () => cancelGetItem();\n      }, [id]);\n\n      if (isLoading) {\n        return (\n          <div className={classes.loader}>\n            <CircularProgress />\n          </div>\n        );\n      }\n\n      return (\n        <div className={classes.wrap}>\n          {data && (\n            <form onSubmit={onSubmit}>\n              <Paper>\n                <div className={classes.grid} style={{ flexWrap: 'wrap' }}>\n                  {visibleFields.map((field) => (\n                    <div className={classes.field} key={field.name}>\n                      {!isEditing && (\n                        <div className=\"label\">\n                          {field.label || field.name}\n                          {isEditing && field.required && <span>{` *`}</span>}\n                        </div>\n                      )}\n                      <div className=\"field\">\n                        <EntityField\n                          name={field.name}\n                          data={data}\n                          fields={fields}\n                          isEditing={isEditing}\n                          error={errors[field.name]}\n                          handler={onFieldChange(field.name)}\n                          withToken={withToken}\n                        />\n                      </div>\n                    </div>\n                  ))}\n\n                  {isEditing && (\n                    <div className={`${classes.field} ${classes.buttons}`}>\n                      <Grid container spacing={1}>\n                        <Grid item style={{ flex: 1 }} />\n\n                        <Grid item>\n                          <Button\n                            type=\"submit\"\n                            color=\"default\"\n                            variant=\"outlined\"\n                            to={isCreating || !viewable ? url : `${url}/${id}`}\n                            component={RouterLink}\n                          >\n                            \n                          </Button>\n                        </Grid>\n\n                        <Grid item>\n                          <Button\n                            type=\"submit\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                          >\n                            \n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </div>\n                  )}\n                </div>\n              </Paper>\n            </form>\n          )}\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityViewer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  grid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(500px, 1fr))',\n  },\n  wrap: {\n    marginBottom: theme.spacing(4),\n\n    '& .MuiFormControl-root': {\n      width: '100%',\n    },\n  },\n  field: {\n    color: '#282f36',\n    fontSize: '17px',\n    fontWeight: 400,\n    fontFamily: theme.typography.fontFamily,\n    padding: `${theme.spacing(4)}px ${theme.spacing(3)}px`,\n    boxShadow: '#e1e8ee 1px -1px',\n    '& > .label': {\n      display: 'block',\n      color: '#a5b0bf',\n      fontSize: '14px',\n    },\n    '& > .field': {\n      marginTop: theme.spacing(1),\n      display: 'block',\n    },\n  },\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  buttons: {\n    gridColumnStart: 1,\n    gridColumnEnd: -1,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, ReactElement } from 'react';\nimport {\n  Grid,\n  Breadcrumbs,\n  Link,\n  Typography,\n  Button,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\nimport styles from './styles';\nimport { IEntityField } from '~/application';\nimport { observer } from 'mobx-react';\n\ntype IProps = WithStyles<typeof styles> & {\n  id?: string;\n  name: string;\n  url: string;\n  isEditing?: boolean;\n  isCreating?: boolean;\n  fields: IEntityField[];\n  data: Record<string, any>;\n  buttons?: ReactElement;\n  viewable: boolean;\n};\n\nconst EntityBreadcrumbs = withStyles(styles)(\n  observer(\n    ({\n      name,\n      url,\n      isEditing,\n      isCreating,\n      classes,\n      id,\n      fields,\n      data,\n      buttons,\n      viewable,\n    }: IProps) => {\n      const title = useMemo(() => {\n        const field = fields.find((f) => f.title);\n        return data && field && field.name ? data[field.name] : id;\n      }, [data, fields, id]);\n\n      return (\n        <div className={classes.breadcrumbs}>\n          <Grid container alignItems=\"center\">\n            <Grid style={{ flex: 1 }}>\n              <Breadcrumbs aria-label=\"breadcrumb\">\n                {name && (\n                  <Link color=\"inherit\" to={url} component={RouterLink}>\n                    {name}\n                  </Link>\n                )}\n\n                {isEditing && !isCreating && !!title && (\n                  <Link\n                    color=\"inherit\"\n                    to={viewable ? `${url}/${id}` : url}\n                    component={RouterLink}\n                  >\n                    {title}\n                  </Link>\n                )}\n\n                {!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\">{title}</Typography>\n                )}\n\n                {!!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\"></Typography>\n                )}\n\n                {!!isEditing && isCreating && (\n                  <Typography color=\"textPrimary\"></Typography>\n                )}\n              </Breadcrumbs>\n            </Grid>\n\n            {buttons}\n\n            {!isEditing && !isCreating && (\n              <Button\n                to={`${url}/${id}/edit`}\n                component={RouterLink}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"button\"\n              >\n                \n              </Button>\n            )}\n          </Grid>\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityBreadcrumbs };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  breadcrumbs: {\n    marginBottom: theme.spacing(2),\n    height: 36,\n    alignItems: 'center',\n    display: 'flex',\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { ReactElement } from 'react';\nimport {\n  IEntityProps,\n  ENTITY_ERRORS,\n  ENTITY_SORT_DIRS,\n} from '~/application/types/entity';\nimport { Page } from '~/application/modules/Page';\nimport { EntityList } from '../../../containers/pages/EntityList';\nimport { EntityHead } from '../../../containers/pages/EntityHead';\nimport { EntityFooter } from '../../../containers/pages/EntityFooter';\nimport { computed, observable, action, reaction, flow, toJS } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Switch, Route, RouteComponentProps } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport { EntityViewer } from '../../../containers/pages/EntityViewer';\nimport { Unwrap } from '~/application/types/common';\nimport { EntityBreadcrumbs } from '~/containers/pages/EntityBreadcrumbs';\nimport { Typography } from '@material-ui/core';\n\nexport class Entity extends Page {\n  // Props\n  @observable api: IEntityProps['api'] = {\n    list: { url: '/', method: 'get' },\n  };\n  @observable fields: IEntityProps['fields'] = [];\n  @observable filters: IEntityProps['filters'] = [];\n  @observable editable: IEntityProps['editable'] = false;\n  @observable viewable: IEntityProps['viewable'] = false;\n  @observable creatable: IEntityProps['creatable'] = false;\n  @observable selectable: IEntityProps['selectable'] = false;\n  @observable getItemsFn: IEntityProps['getItemsFn'] = undefined;\n  @observable fetchItemsFn: IEntityProps['fetchItemsFn'] = undefined;\n  @observable updateItemsFn: IEntityProps['updateItemsFn'] = undefined;\n  @observable createItemsFn: IEntityProps['createItemsFn'] = undefined;\n\n  // Built-in\n  @observable isLoading: boolean = true;\n  @observable itemsPerPage: number[] = [5, 10, 15, 25, 50];\n  @observable items: number = this.itemsPerPage[this.itemsPerPage.length] || 50;\n  @observable totalCount: number = 0;\n  @observable page: number = 0;\n  @observable data: Record<string, any>[] = [];\n  @observable error?: string | null;\n  @observable sortBy: string = '';\n  @observable sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS] =\n    ENTITY_SORT_DIRS.ASC;\n  @observable editorFieldErrors: Record<string, string> = {};\n  @observable editorData: Record<string, any> = {};\n  @observable selected: any[] = [];\n  @observable filterData: Record<string, any> = {};\n\n  constructor(fields?: Partial<IEntityProps>) {\n    super();\n\n    if (fields) {\n      Object.assign(this, fields);\n    }\n\n    reaction(\n      () => [this.page, this.items, this.sortBy, this.sortDir],\n      this.fetchItems\n    );\n  }\n\n  @action\n  setFilters = (filters: IEntityProps['filters']) => {\n    this.filters = filters;\n  };\n\n  @action\n  setPage = (page: number) => {\n    this.page = page;\n  };\n\n  @action\n  setPerPage = (items: number) => {\n    this.items = items;\n  };\n\n  @action\n  setSelected = (selected: any[]) => {\n    this.selected = selected;\n  };\n\n  @action\n  setSort = (field: string) => {\n    if (field !== this.sortBy && this.sortDir !== ENTITY_SORT_DIRS.ASC) {\n      this.sortDir = ENTITY_SORT_DIRS.ASC;\n    }\n\n    if (field === this.sortBy) {\n      this.sortDir =\n        this.sortDir === ENTITY_SORT_DIRS.ASC\n          ? ENTITY_SORT_DIRS.DESC\n          : ENTITY_SORT_DIRS.ASC;\n    }\n\n    this.sortBy = field;\n  };\n\n  fetchItemsInstance?: CancellablePromise<any>;\n\n  @action\n  fetchItems = () => {\n    this.fetchItemsCancel();\n\n    this.fetchItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n      this.selected = [];\n\n      try {\n        if (!this.api?.list?.url || !this.fetchItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const filter =\n          (this.filters.length > 0 &&\n            toJS(this.filters).filter((el) => el.name && el.value !== '')) ||\n          [];\n\n        const result: Unwrap<typeof this.fetchItemsFn> = yield this.parent?.auth?.withToken(\n          this.fetchItemsFn,\n          {\n            url: this.api?.list?.url || '',\n            filter,\n            page: this.page,\n            count: this.items,\n            sortBy: this.sortBy,\n            sortDir: this.sortDir,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.data = result?.data?.list || [];\n        this.filterData = result?.filterData || {};\n        this.totalCount = result?.data?.totalCount || 0;\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  fetchItemsCancel = () => {\n    try {\n      if (this.fetchItemsInstance && this.fetchItemsInstance.cancel) {\n        this.fetchItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  updateItemInstance?: CancellablePromise<any>;\n\n  @action\n  updateItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data)) {\n          throw new Error(ENTITY_ERRORS.INCORRECT_INPUT);\n        }\n\n        if (!this.api?.update?.url || !this.updateItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.updateItemsFn> = yield this.parent?.auth?.withToken(\n          this.updateItemsFn,\n          {\n            url: this.api?.update?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.fetchItems();\n        this.parent?.history.push(this.menu.url);\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  createItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data)) {\n          throw new Error(ENTITY_ERRORS.INCORRECT_INPUT);\n        }\n\n        if (!this.api?.create?.url || !this.createItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.createItemsFn> = yield this.parent?.auth?.withToken(\n          this.createItemsFn,\n          {\n            url: this.api?.create?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.fetchItems();\n        this.parent?.history.push(this.menu.url);\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  resetFieldError = (field: string) => {\n    delete this.editorFieldErrors[field];\n  };\n\n  @action\n  validateSubmitFields = (data: Record<string, any>): boolean => {\n    this.editorFieldErrors = this.fields.reduce(\n      (obj, field) =>\n        (!field.required || field.type === 'boolean' || !!data[field.name]) &&\n        (!field.validator || field.validator(data[field.name]))\n          ? obj\n          : {\n              ...obj,\n              [field.name]: ENTITY_ERRORS.FIELD_IS_REQUIRED,\n            },\n      {}\n    );\n\n    return Object.keys(this.editorFieldErrors).length === 0;\n  };\n\n  @observable\n  getItemsInstance?: CancellablePromise<any>;\n\n  @action\n  getItem = (id: any) => {\n    this.getItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        if (!this.api?.get?.url || !this.getItemsFn) {\n          throw new Error(ENTITY_ERRORS.CANT_LOAD_ITEMS);\n        }\n\n        const result: Unwrap<typeof this.createItemsFn> = yield this.parent?.auth?.withToken(\n          this.getItemsFn,\n          {\n            id,\n            url: this.api?.get?.url,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || ENTITY_ERRORS.CANT_LOAD_ITEMS);\n\n        this.editorData = result.data;\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.parent?.history.push(this.menu.url);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  getItemsCancel = () => {\n    try {\n      if (this.getItemsInstance && this.getItemsInstance.cancel) {\n        this.getItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  @action\n  setEditorData = (data: Record<string, any>) => {\n    this.editorData = data;\n  };\n\n  @action\n  createEmptyItem = () => {\n    this.editorData = {};\n  };\n\n  @computed\n  get canEdit() {\n    return !!(\n      !this.roles ||\n      (this.parent?.auth?.user?.role &&\n        (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n          this.roles?.update?.includes(\n            this.parent.auth?.user?.role.toString()\n          )))\n    );\n  }\n\n  @computed\n  get canCreate() {\n    return !!(\n      !this.roles ||\n      (this.parent?.auth?.user?.role &&\n        (this.roles?.all?.includes(this.parent.auth?.user?.role.toString()) ||\n          this.roles?.create?.includes(\n            this.parent.auth?.user?.role.toString()\n          )))\n    );\n  }\n\n  @action\n  onMount = () => {\n    this.fetchItems();\n  };\n\n  @action\n  onUnmount = () => {\n    this.fetchItemsCancel();\n  };\n\n  @computed\n  get ListHeadTitle() {\n    return observer(() => (\n      <Typography variant=\"h4\" style={{ flex: 1 }}>\n        {this.title}\n      </Typography>\n    ));\n  }\n\n  @computed\n  get ListHeadButtons() {\n    return observer(() => <></>);\n  }\n\n  @computed\n  get ListHead() {\n    return observer(() => (\n      <EntityHead\n        filterData={this.filterData}\n        title={<this.ListHeadTitle />}\n        buttons={<this.ListHeadButtons />}\n        filters={this.filters}\n        fields={this.fields}\n        setFilters={this.setFilters}\n        url={this.menu.url}\n        applyFilter={this.fetchItems}\n        canCreate={this.creatable && this.canCreate}\n      />\n    ));\n  }\n\n  @computed\n  get ListBody() {\n    return observer(() => (\n      <EntityList\n        fields={this.fields}\n        data={this.data}\n        isLoading={this.isLoading}\n        url={this.menu.url}\n        selected={this.selected}\n        sortBy={this.sortBy}\n        sortDir={this.sortDir}\n        canView={this.viewable}\n        canEdit={this.editable && this.canEdit}\n        canSelect={this.selectable}\n        setSelected={this.setSelected}\n        onSortChange={this.setSort}\n      />\n    ));\n  }\n\n  @computed\n  get ListFooter() {\n    return observer(() => (\n      <EntityFooter\n        page={this.page}\n        itemsPerPage={this.itemsPerPage}\n        items={this.items}\n        totalCount={this.totalCount}\n        setPage={this.setPage}\n        setPerPage={this.setPerPage}\n      />\n    ));\n  }\n\n  @computed\n  get List() {\n    return observer(() => (\n      <div>\n        <this.ListHead />\n        <this.ListBody />\n        <this.ListFooter />\n      </div>\n    ));\n  }\n\n  @computed\n  get Breadcrumbs() {\n    return observer(\n      ({\n        id,\n        isEditing = false,\n        isCreating = false,\n        buttons,\n      }: {\n        id?: any;\n        isEditing?: boolean;\n        isCreating?: boolean;\n        buttons?: ReactElement;\n      }) => (\n        <EntityBreadcrumbs\n          data={this.editorData}\n          fields={this.fields}\n          id={id}\n          name={this.title}\n          url={this.menu.url}\n          viewable={this.viewable}\n          isEditing={isEditing}\n          isCreating={isCreating}\n          buttons={buttons}\n        />\n      )\n    );\n  }\n\n  @computed\n  get ViewerHeadButtons() {\n    return observer(({ id }: { id: any }) => null);\n  }\n\n  @computed\n  get ViewerHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs id={id} buttons={<this.ViewerHeadButtons id={id} />} />\n    ));\n  }\n\n  @computed\n  get ViewerFooter() {\n    return observer(({ id }: { id: any }) => null);\n  }\n\n  @computed\n  get ViewerBody() {\n    return observer(({ id }: { id: string }) => (\n      <EntityViewer\n        id={id}\n        fields={this.fields}\n        url={this.menu.url}\n        errors={this.editorFieldErrors}\n        onSave={() => {}}\n        onResetFieldError={this.resetFieldError}\n        isEditing={false}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n      />\n    ));\n  }\n\n  @computed\n  get Viewer() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.ViewerHead id={id} />\n        <this.ViewerBody id={id} />\n        <this.ViewerFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get EditorHeadButtons() {\n    return observer(({ id }: { id: any }) => null);\n  }\n\n  @computed\n  get EditorHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs\n        id={id}\n        buttons={<this.EditorHeadButtons id={id} />}\n        isEditing\n      />\n    ));\n  }\n\n  @computed\n  get EditorFooter() {\n    return observer(({ id }: { id: any }) => null);\n  }\n\n  @computed\n  get EditorBody() {\n    return observer(({ id }: { id: string }) => (\n      <EntityViewer\n        id={id}\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.updateItem}\n        onResetFieldError={this.resetFieldError}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n        isEditing\n      />\n    ));\n  }\n\n  @computed\n  get Editor() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.EditorHead id={id} />\n        <this.EditorBody id={id} />\n        <this.EditorFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get CreatorHeadButtons() {\n    return observer(() => null);\n  }\n\n  @computed\n  get CreatorHead() {\n    return observer(() => (\n      <this.Breadcrumbs buttons={<this.CreatorHeadButtons />} isCreating />\n    ));\n  }\n\n  @computed\n  get CreatorFooter() {\n    return observer(() => null);\n  }\n\n  @computed\n  get CreatorBody() {\n    return observer(() => (\n      <EntityViewer\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.createItem}\n        onResetFieldError={this.resetFieldError}\n        isEditing\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.createEmptyItem}\n        cancelGetItem={this.getItemsCancel}\n        viewable={this.viewable}\n        withToken={this.parent?.auth?.withToken}\n      />\n    ));\n  }\n\n  @computed\n  get Creator() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.CreatorHead />\n        <this.CreatorBody />\n        <this.CreatorFooter />\n      </>\n    ));\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <Switch>\n        <Route path={`${this.menu.url}/create`} component={this.Creator} />\n        <Route\n          path={`${this.menu.url}/:id/edit`}\n          component={({\n            match: {\n              params: { id },\n            },\n          }: RouteComponentProps<{ id: string }>) => <this.Editor id={id} />}\n        />\n        <Route\n          path={`${this.menu.url}/:id/`}\n          component={({\n            match: {\n              params: { id },\n            },\n          }: RouteComponentProps<{ id: string }>) => <this.Viewer id={id} />}\n        />\n        <Route path={this.menu.url} component={this.List} />\n      </Switch>\n    ));\n  }\n}\n","module.exports = \"data:image/png;base64,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\"","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  MouseEventHandler,\n  useCallback,\n  useState,\n  ChangeEvent,\n  FC,\n} from 'react';\nimport {\n  OutlinedInput,\n  Button,\n  FormControl,\n  withStyles,\n  WithStyles,\n  Box,\n} from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport styles from './styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  label: string;\n  value: any;\n  error?: string;\n  isEditing?: boolean;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n  handler?: (val: any) => void;\n  options?: Record<any, any>;\n} & Record<string, any>;\n\nconst EntityFieldBase64Image = withStyles(styles)(\n  ({\n    classes,\n    label,\n    value,\n    handler,\n    error,\n    isEditing,\n    onClick,\n    options,\n  }: IProps) => {\n    const [innerError, setInnerError] = useState('');\n\n    const getBase64 = useCallback((file: File): Promise<string> => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result?.toString() || '');\n        reader.onerror = (error) => reject(error);\n      });\n    }, []);\n\n    const loadImage = useCallback(\n      async (e: ChangeEvent<HTMLInputElement>) => {\n        if (!handler) return;\n        if (!e.target.files) return;\n\n        setInnerError('');\n\n        const file = e.target.files[0];\n\n        if (!file) return;\n\n        if (options?.maxSize && file.size > options.maxSize) {\n          setInnerError('  !');\n          return;\n        }\n\n        if (options?.maxSize && file.size < options.minSize) {\n          setInnerError('  !');\n          return;\n        }\n\n        if (\n          options?.allowedMimeType &&\n          !options.allowedMimeType.includes(file.type)\n        ) {\n          setInnerError('   !');\n          return;\n        }\n\n        const photo: string = await getBase64(file);\n\n        const img = new Image();\n        img.src = photo;\n\n        img.onload = () => {\n          const { naturalWidth, naturalHeight } = img;\n\n          if (options && options.minViewBox) {\n            const minWidth = options.minViewBox.width;\n            const minHeight = options.minViewBox.height;\n\n            if (naturalWidth < minWidth || naturalHeight < minHeight) {\n              setInnerError(\n                `      ${minWidth}x${minHeight} `\n              );\n              return;\n            }\n          }\n\n          if (options?.maxViewBox) {\n            let maxWidth = options.maxViewBox.width;\n            let maxHeight = options.maxViewBox.height;\n            if (naturalWidth > maxWidth || naturalHeight > maxHeight) {\n              setInnerError(\n                `      ${maxWidth}x${maxHeight} `\n              );\n              return;\n            }\n          }\n\n          handler(photo);\n        };\n      },\n      [setInnerError, handler, getBase64]\n    );\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n\n        handler(event.target.value);\n      },\n      [value, handler]\n    );\n\n    return isEditing ? (\n      <div>\n        <FormControl\n          variant=\"outlined\"\n          className={classes.formControl}\n          style={{ position: 'relative' }}\n        >\n          <label htmlFor={label} className={classes.label}>\n            {value ? (\n              <div\n                className={classes.image}\n                style={{ backgroundImage: `url('${value}')` }}\n              />\n            ) : (\n              ''\n            )}\n\n            <OutlinedInput\n              fullWidth\n              style={{\n                flexDirection: 'row-reverse',\n              }}\n              error={!!innerError || !!error}\n              className={classes.outlinedInput}\n              inputComponent={() => (\n                <Button\n                  name={label}\n                  startIcon={<ImageIcon fontSize={'large'} />}\n                  variant=\"contained\"\n                  style={{\n                    display: 'flex',\n                    width: 150,\n                  }}\n                >\n                  <span></span>\n                </Button>\n              )}\n            />\n            <input\n              id={label}\n              name={label}\n              type=\"file\"\n              onChange={loadImage}\n              style={{ position: 'absolute' }}\n              accept={options && options.mimes ? options.mimes.join(', ') : ''}\n            />\n          </label>\n          {(innerError || error) && (\n            <Box color=\"error.main\" fontSize={12}>\n              {innerError || error}\n            </Box>\n          )}\n        </FormControl>\n      </div>\n    ) : (\n      <div onClick={onClick}>\n        <img src={value ? String(value) : ''} className={classes.preview} />\n      </div>\n    );\n  }\n);\n\nexport { EntityFieldBase64Image };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  formControl: {\n    margin: `${theme.spacing(2)}px 0 ${theme.spacing(1)}px`,\n    minWidth: 120,\n\n    '& input': {\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      opacity: 0,\n    },\n  },\n  outlinedInput: {\n    minHeight: '56px',\n    alignItems: 'inherit',\n  },\n  label: {\n    display: 'flex',\n\n    '& > img': {\n      marginRight: '10px',\n    },\n  },\n  image: {\n    flex: '0 0 56px',\n    width: 56,\n    height: 56,\n    backgroundSize: 'cover',\n    backgroundPosition: '50% 50%',\n    backgroundColor: '#eeeeee',\n  },\n  preview: {\n    maxWidth: '100%',\n    maxHeight: 300,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IPageProps } from './page';\nimport { EntityFieldString } from '~/components/pages/EntityFieldString';\nimport { EntityFieldBoolean } from '~/components/pages/EntityFieldBoolean';\nimport { EntityFieldDate } from '~/components/pages/EntityFieldDate';\nimport { EntityFieldSelect } from '~/components/pages/EntityFieldSelect';\nimport { EntityFieldPhone } from '~/components/pages/EntityFieldPhone';\nimport { EntityFieldRichText } from '~/components/pages/EntityFieldRichText';\nimport { EntityFieldBase64Image } from '~/components/pages/EntityFieldBase64';\nimport { FC } from 'react';\nimport { EntityFieldNumber } from '~/components/pages/EntityFieldNumber';\nimport { EntityFieldDateTime } from '~/components/pages/EntityFieldDatetime';\n\nexport const ENTITY_FIELD_RENDERS = {\n  string: EntityFieldString,\n  date: EntityFieldDate,\n  datetime: EntityFieldDateTime,\n  boolean: EntityFieldBoolean,\n  select: EntityFieldSelect,\n  phone: EntityFieldPhone,\n  richtext: EntityFieldRichText,\n  base64image: EntityFieldBase64Image,\n  number: EntityFieldNumber,\n};\n\n// getFieldRenderer returns field-type specific renderer\nexport const getEntityFieldRenderer = (type: string = 'string'): FC<any> => {\n  const key = Object.prototype.hasOwnProperty.call(ENTITY_FIELD_RENDERS, type)\n    ? type\n    : 'string';\n\n  return ENTITY_FIELD_RENDERS[key as keyof typeof ENTITY_FIELD_RENDERS] as FC<\n    any\n  >;\n};\n\nexport const ENTITY_SORT_DIRS: Record<string, 'asc' | 'desc'> = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\n\nexport const ENTITY_FILTER_TYPES = {\n  TEXT: 'TEXT',\n  SELECT: 'SELECT',\n  NUMBER: 'NUMBER',\n  DATE: 'DATE',\n};\n\nexport const ENTITY_ACTIONS = {\n  CREATE: 'create',\n  GET: 'get',\n  LIST: 'list',\n  DELETE: 'delete',\n  UPDATE: 'update',\n};\n\nexport const ENTITY_ERRORS = {\n  CANT_UPDATE_ITEM: `Can't update item`,\n  CANT_LOAD_ITEMS: `Can't load items`,\n  FIELD_IS_REQUIRED: 'This field is required',\n  INCORRECT_INPUT: 'Check all inputs',\n};\n\nexport interface IEntityField {\n  name: string;\n  label?: string;\n  title?: boolean;\n  type: keyof typeof ENTITY_FIELD_RENDERS | 'custom';\n  sortable?: boolean;\n  filterable?: boolean;\n  required?: boolean;\n  validator?: (val: any) => boolean;\n  options?: Record<any, any>;\n  component?: FC<any>;\n\n  hideInList?: boolean;\n  hideInEdit?: boolean;\n}\n\nexport interface IFilterValue {\n  name: string;\n  value: any;\n}\n\nexport interface IEntityProps extends IPageProps {\n  fields: IEntityField[];\n  editable: boolean;\n  viewable: boolean;\n  creatable: boolean;\n  selectable: boolean;\n  filters: IFilterValue[];\n  api?: Record<\n    typeof ENTITY_ACTIONS[keyof typeof ENTITY_ACTIONS],\n    { url: string; method: string }\n  >;\n  fetchItemsFn?: IEntityFetchFunction;\n  updateItemsFn?: IEntityUpdateFunction;\n  createItemsFn?: IEntityCreateFunction;\n  getItemsFn?: IEntityGetFunction;\n}\n\nexport interface IEntityFetchFunctionProps {\n  url: string;\n  page?: number;\n  filter?: IFilterValue[];\n  sortBy: string;\n  sortDir: string;\n  count?: number;\n  token?: string;\n}\n\nexport interface IEntityFetchFunctionResult {\n  data: {\n    list: Record<string, any>[];\n    totalCount?: number;\n  };\n  filterData?: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityFetchFunction = (\n  props: IEntityFetchFunctionProps\n) => Promise<IEntityFetchFunctionResult>;\n\nexport interface IEntityUpdateFunctionProps {\n  url: string;\n  id: any;\n  token?: string;\n  data: Record<string, any>;\n}\n\nexport interface IEntityUpdateFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityUpdateFunction = (\n  props: IEntityUpdateFunctionProps\n) => Promise<IEntityUpdateFunctionResult>;\n\nexport interface IEntityCreateFunctionProps {\n  url: string;\n  id: any;\n  token?: string;\n  data: Record<string, any>;\n}\n\nexport interface IEntityCreateFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityCreateFunction = (\n  props: IEntityCreateFunctionProps\n) => Promise<IEntityCreateFunctionResult>;\n\nexport interface IEntityGetFunctionProps {\n  url: string;\n  token?: string;\n  id: any;\n}\n\nexport interface IEntityGetFunctionResult {\n  data: Record<string, any>;\n  error?: string;\n}\n\nexport type IEntityGetFunction = (\n  props: IEntityGetFunctionProps\n) => Promise<IEntityGetFunctionResult>;\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\n\ntype IProps = {\n  label: string;\n  value: any;\n  error?: string;\n  isEditing?: boolean;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n  handler?: (val: any) => void;\n} & Record<string, any>;\n\nconst EntityFieldString: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <TextField\n        label={label}\n        value={value || ''}\n        onChange={onChange}\n        error={!!error}\n        helperText={error}\n        variant=\"outlined\"\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>{value ? String(value) : <div>&nbsp;</div>}</div>\n  );\n};\n\nexport { EntityFieldString };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { DatePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  error?: string;\n  handler?: (val: any) => void;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n} & Record<string, any>;\n\nconst EntityFieldDate: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value: MaterialUiPickersDate) => {\n      if (!handler) return;\n      handler(value?.toISOString());\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <DatePicker\n        value={value ? new Date(value) : null}\n        onChange={onChange}\n        format=\"dd.MM.yyyy\"\n        error={!!error}\n        helperText={error}\n        inputVariant=\"outlined\"\n        label={label}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {value ? format(new Date(value), 'dd.MM.yyyy') : <div>&nbsp;</div>}\n    </div>\n  );\n};\n\nexport { EntityFieldDate };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  error?: string;\n  handler?: (val: any) => void;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n} & Record<string, any>;\n\nconst EntityFieldDateTime: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value: MaterialUiPickersDate) => {\n      if (!handler) return;\n      handler(value?.toISOString());\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <DateTimePicker\n        value={value ? new Date(value) : null}\n        onChange={onChange}\n        format=\"dd.MM.yyyy HH:ii\"\n        error={!!error}\n        helperText={error}\n        inputVariant=\"outlined\"\n        label={label}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {value ? format(new Date(value), 'dd.MM.yyyy HH:ii') : <div>&nbsp;</div>}\n    </div>\n  );\n};\n\nexport { EntityFieldDateTime };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { Checkbox, FormControlLabel } from '@material-ui/core';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  error?: string;\n  handler?: (val: any) => void;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n} & Record<string, any>;\n\nconst EntityFieldBoolean: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(() => {\n    if (!handler) return;\n\n    handler(!value);\n  }, [value, handler]);\n\n  return isEditing ? (\n    <FormControlLabel\n      control={<Checkbox onChange={onChange} checked={value || false} />}\n      label={label}\n    />\n  ) : (\n    <div onClick={onClick}>{!!value ? <CheckIcon /> : <ClearIcon />}</div>\n  );\n};\n\nexport { EntityFieldBoolean };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { Select, MenuItem, FormControl, InputLabel } from '@material-ui/core';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  handler?: (val: any) => void;\n  error?: string;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n  options?: Record<any, any>;\n} & Record<string, any>;\n\nconst EntityFieldSelect: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <FormControl variant=\"outlined\">\n      <InputLabel htmlFor={label}>{label}</InputLabel>\n\n      <Select\n        variant=\"outlined\"\n        id={label}\n        name={label}\n        label={label}\n        value={!value ? '' : value}\n        onChange={onChange}\n        error={!!error}\n        inputProps={{ className: 'select' }}\n      >\n        <MenuItem value=\"\">...</MenuItem>\n\n        {options &&\n          Object.keys(options).map((item) => (\n            <MenuItem key={item} value={item}>\n              {options[item]}\n            </MenuItem>\n          ))}\n      </Select>\n    </FormControl>\n  ) : (\n    <div onClick={onClick}>\n      {(options && options[value]) || <div>&nbsp;</div>}\n    </div>\n  );\n};\n\nexport { EntityFieldSelect };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport InputMask from 'react-input-mask';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  handler?: (val: any) => void;\n  error?: string;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n} & Record<string, any>;\n\nconst EntityFieldPhone: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value.replace(/[^\\d]/gim, ''));\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <InputMask\n        mask=\"+9 (999) 999-99-99\"\n        value={value ? value.toString() : ''}\n        onChange={onChange}\n      >\n        {() => (\n          <TextField\n            label={label}\n            error={!!error}\n            helperText={error}\n            variant=\"outlined\"\n          />\n        )}\n      </InputMask>\n    </div>\n  ) : (\n    <div onClick={onClick}>{value ? String(value) : <div>&nbsp;</div>}</div>\n  );\n};\n\nexport { EntityFieldPhone };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  MouseEventHandler,\n  useCallback,\n  useMemo,\n  useState,\n  useEffect,\n} from 'react';\nimport MUIRichTextEditor from 'mui-rte';\nimport { convertFromHTML } from 'draft-js';\nimport { convertToRaw, ContentState } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\n\ntype IProps = {\n  label: string;\n  value: any;\n  isEditing?: boolean;\n  handler?: (val: any) => void;\n  error?: string;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n} & Record<string, any>;\n\nconst EntityFieldRichText: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const [val, setVal] = useState('');\n\n  useEffect(() => {\n    const contentHTML = convertFromHTML(value || '');\n    const state = ContentState.createFromBlockArray(\n      contentHTML.contentBlocks,\n      contentHTML.entityMap\n    );\n\n    setVal(JSON.stringify(convertToRaw(state)));\n  }, []);\n\n  const onChange = useCallback(\n    (data) => {\n      if (!handler) return;\n      const text = draftToHtml(convertToRaw(data.getCurrentContent()));\n      handler(text || '');\n    },\n    [value, handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <MUIRichTextEditor\n        label={label}\n        value={val || ''}\n        onChange={onChange}\n        error={!!error}\n        controls={[\n          'title',\n          'bold',\n          'italic',\n          'underline',\n          'strikethrough',\n          'undo',\n          'redo',\n          'numberList',\n          'bulletList',\n          'quote',\n          'clear',\n        ]}\n      />\n    </div>\n  ) : (\n    (value && (\n      <div onClick={onClick} dangerouslySetInnerHTML={{ __html: value }} />\n    )) || <div>&nbsp;</div>\n  );\n};\n\nexport { EntityFieldRichText };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, MouseEventHandler, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\n\ntype IProps = {\n  label: string;\n  value: any;\n  error?: string;\n  isEditing?: boolean;\n  onClick?: MouseEventHandler<HTMLDivElement>;\n  handler?: (val: any) => void;\n  options?: { accuracy?: number };\n} & Record<string, any>;\n\nconst EntityFieldNumber: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  const val =\n    (value &&\n      parseFloat(value) &&\n      parseFloat(parseFloat(value).toFixed(options?.accuracy || 6))) ||\n    0;\n\n  return isEditing ? (\n    <div>\n      <TextField\n        type=\"number\"\n        label={label}\n        value={value || ''}\n        onChange={onChange}\n        error={!!error}\n        helperText={error}\n        variant=\"outlined\"\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>{val || <div>&nbsp;</div>}</div>\n  );\n};\n\nexport { EntityFieldNumber };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  Config,\n  AuthProvider,\n  Page,\n  Entity,\n  IEntityUpdateFunctionProps,\n  IEntityCreateFunctionProps,\n  IEntityGetFunctionProps,\n} from './application';\nimport logo from '~/assets/logo512.png';\n\nconst SAMPLE_ENTITY_1 = {\n  id: 1,\n  type: 'text',\n  phone: '+7 000 000 000',\n  title: 'First one',\n  created: new Date().toISOString(),\n  createdTime: new Date().toISOString(),\n  number: '0.123123123',\n  visible: true,\n};\n\nconst SAMPLE_ENTITY_2 = {\n  id: 2,\n  type: 'text',\n  phone: '+7 000 000 000',\n  title: 'First one',\n  created: new Date().toISOString(),\n  createdTime: new Date().toISOString(),\n  number: 0.123123123,\n  visible: true,\n};\n\nexport default new Config({\n  logo,\n  auth: new AuthProvider({\n    authRequestFn: (email, password) =>\n      Promise.resolve({\n        user: {\n          email,\n          username: email,\n          token: 'SAMPLE_TOKEN',\n          role: 'user',\n        },\n        error: '',\n      }),\n  }),\n  pages: [\n    new Entity({\n      title: 'Sample entity',\n      editable: true,\n      viewable: false,\n      api: {\n        list: { url: '/list', method: 'get' },\n        update: { url: '/update', method: 'patch' },\n        create: { url: '/create', method: 'post' },\n        get: { url: '/get', method: 'get' },\n      },\n      menu: {\n        enabled: true,\n        label: 'Sample entity',\n        url: '/entity',\n      },\n      fields: [\n        {\n          name: 'type',\n          label: '',\n          sortable: true,\n          filterable: true,\n          type: 'string',\n          required: true,\n        },\n        {\n          name: 'phone',\n          label: '',\n          sortable: true,\n          type: 'string',\n          filterable: true,\n        },\n        {\n          name: 'title',\n          label: '',\n          sortable: true,\n          type: 'string',\n          title: true,\n        },\n        {\n          name: 'created',\n          label: ' ',\n          sortable: true,\n          type: 'date',\n        },\n        {\n          name: 'createdTime',\n          label: '  ',\n          sortable: true,\n          type: 'datetime',\n        },\n        {\n          name: 'visible',\n          label: '',\n          sortable: false,\n          type: 'boolean',\n        },\n        {\n          type: 'number',\n          name: 'number',\n          label: '',\n          sortable: true,\n          options: {\n            accuracy: 4,\n          },\n        },\n      ],\n      fetchItemsFn: (...props) =>\n        new Promise((resolve) => {\n          setTimeout(resolve, 500, {\n            data: {\n              list: [SAMPLE_ENTITY_1, SAMPLE_ENTITY_2],\n              totalPages: 10,\n            },\n          });\n        }),\n      updateItemsFn: ({ data }: IEntityUpdateFunctionProps) => {\n        return Promise.resolve({ error: '', data });\n      },\n      createItemsFn: ({ data }: IEntityCreateFunctionProps) => {\n        return Promise.resolve({ error: '', data });\n      },\n      getItemsFn: ({ id }: IEntityGetFunctionProps) => {\n        return new Promise((resolve) =>\n          setTimeout(resolve, 500, {\n            data: SAMPLE_ENTITY_2,\n          })\n        );\n      },\n    }),\n    new Page({\n      title: 'Sample page',\n      menu: {\n        enabled: true,\n        url: '/test',\n        label: 'Sample page',\n      },\n    }),\n  ],\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Application } from '~/application';\nimport config from './config';\n\nReactDOM.render(\n  <Application config={config} />,\n  document.getElementById('root')\n);\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const AUTH_ERRORS = {\n  CANT_LOGIN: `Can't login. Unknown error.`,\n};\n\nexport const EMPTY_USER: IAuthProviderProps['user'] = {\n  id: 0,\n  email: '',\n  username: '',\n  role: '',\n  token: '',\n};\n\nexport interface IAuthProviderProps {\n  user: {\n    id?: number;\n    email?: string;\n    username?: string;\n    role?: string;\n    token?: string;\n  };\n\n  api: Record<string, { url: string; method: string }>;\n  roleTitles: Record<any, string>;\n  persist: boolean;\n\n  authRequestFn?: (\n    email: string,\n    password: string\n  ) => Promise<{ user: IAuthProviderProps['user']; error: string }>;\n\n  authPasswRestoreFn?: (email: string) => Promise<{ error: string }>;\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './modules';\nexport * from './types';\nexport * from './components';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, createElement, useMemo } from 'react';\nimport { IEntityField, getEntityFieldRenderer } from '~/application';\n\ninterface IProps {\n  name: string;\n  fields: IEntityField[];\n  data?: Record<string, any>;\n  error?: string;\n  isEditing?: boolean;\n  handler?: (val: any) => void;\n  withToken?: (req: any, args: any) => void;\n}\n\nconst EntityField: FC<IProps> = ({\n  name,\n  fields,\n  data = {},\n  error = '',\n  isEditing,\n  handler,\n  withToken = (cb, args) => cb(args),\n}) => {\n  const field = useMemo(() => fields.find((field) => field.name === name), [\n    fields,\n    name,\n  ]);\n\n  if (!field) {\n    return <div />;\n  }\n\n  return createElement(\n    field.type === 'custom' && field.component\n      ? field.component\n      : getEntityFieldRenderer(field.type || typeof data[field.name]),\n    {\n      value: Object.prototype.hasOwnProperty.call(data, field.name)\n        ? data[field.name]\n        : null,\n      label: `${field.label || field.name}${\n        field.required && isEditing ? ' *' : ''\n      }`,\n      error,\n      isEditing,\n      handler,\n      options: field.options || {},\n      data, // for custom fields\n      fields, // for custom fields\n      withToken, // for custom fields\n    }\n  );\n};\n\nexport { EntityField };\n"],"sourceRoot":""}