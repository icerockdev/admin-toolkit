{"version":3,"sources":["application/index.ts","application/modules/pages/Feature/types/index.ts","application/utils/hooks/mobx.ts","i18n.ts","application/modules/pages/Feature/components/common/Placeholder/index.tsx","application/types/auth.ts","application/modules/pages/Feature/fields/FeatureField/index.tsx","application/modules/pages/Feature/components/read/FeatureReadContainer/styles.module.scss","application/modules/pages/Entity/constants.ts","application/modules/pages/Feature/components/inputs/SelectInput/index.tsx","application/modules/pages/Feature/components/list/FeatureListContainer/styles.module.scss","application/layouts/login/AuthVerticalLayout/styles.module.scss","example/layout/auth/AuthCustomLayout/styles.module.scss","application/modules/pages/Feature/components/router/FeatureRendererRouter/index.tsx","application/modules/pages/Feature/items/FeatureRenderer/index.tsx","application/layouts/application/VerticalLayout/styles.module.scss","containers/layout/VerticalNavigation/styles.module.scss","application/modules/pages/Page/index.tsx","application/modules/pages/Feature/components/inputs/StringInput/index.tsx","application/modules/pages/Feature/fields/SelectField/index.tsx","application/modules/pages/Feature/components/read/FeatureReadRenderer/index.tsx","application/modules/pages/Feature/components/filters/FilterWrapper/index.tsx","application/modules/pages/Entity/components/EntityViewer/index.tsx","application/modules/pages/Entity/components/EntityViewer/styles.ts","containers/auth/Account/styles.module.scss","containers/auth/SignIn/styles.module.scss","application/modules/pages/Feature/fields/IntegerField/index.tsx","application/modules/pages/Feature/components/read/FeatureReadBreadcrumbs/styles.module.scss","containers/auth/ForgotPassword/styles.module.scss","containers/auth/ResetPassword/styles.module.scss","containers/auth/SignUp/styles.module.scss","application/modules/pages/Feature/types/field.ts","application/modules/pages/Feature/types/reference.ts","application/modules/pages/Feature/components/list/FeatureListContainer/index.tsx","application/modules/pages/Feature/components/list/FeatureListWrapper/index.tsx","application/modules/pages/Feature/components/list/FeatureListPagination/index.tsx","application/modules/pages/Feature/components/list/FeatureListFooter/index.tsx","application/modules/pages/Feature/components/list/FeatureListHeader/index.tsx","application/modules/pages/Feature/components/list/FeatureListButtons/index.tsx","application/modules/pages/Feature/components/list/FeatureListFilters/index.tsx","application/modules/pages/Feature/components/list/FeatureListEmptyRows/index.tsx","application/modules/pages/Feature/components/list/FeatureListRow/index.tsx","application/modules/pages/Feature/components/read/FeatureReadWrapper/index.tsx","application/modules/pages/Feature/components/read/FeatureReadContainer/index.tsx","application/modules/pages/Feature/components/read/FeatureReadFooter/index.tsx","application/modules/pages/Feature/components/read/FeatureReadHeader/index.tsx","application/modules/pages/Feature/components/read/FeatureReadButtons/index.tsx","application/modules/pages/Feature/components/read/FeatureReadTitle/index.tsx","application/modules/pages/Feature/components/read/FeatureReadBreadcrumbs/index.tsx","application/modules/pages/Feature/components/read/FeatureReadContent/index.tsx","application/modules/pages/Feature/components/read/FeatureReadField/index.tsx","application/modules/pages/Feature/components/read/FeatureReadSubmit/index.tsx","application/modules/pages/Feature/items/FeatureData/index.ts","application/modules/pages/Feature/filters/DateFilter/index.tsx","application/modules/pages/Feature/filters/SelectFilter/index.tsx","application/modules/pages/Feature/filters/StringFilter/index.tsx","application/modules/pages/Feature/fields/DateField/index.tsx","application/modules/pages/Feature/components/inputs/DateInput/index.tsx","application/modules/pages/Feature/fields/ReferenceField/index.tsx","application/modules/pages/Entity/components/EntityField/index.tsx","application/layouts/login/AuthVerticalLayout/index.tsx","application/modules/pages/Feature/items/FeatureController/list.ts","application/modules/pages/Feature/items/FeatureController/read.ts","application/modules/pages/Feature/items/FeatureController/references.ts","application/modules/pages/Feature/items/FeatureController/create.ts","application/modules/pages/Feature/items/FeatureController/update.ts","application/modules/pages/Feature/items/FeatureController/delete.ts","application/modules/pages/Feature/items/FeatureController/index.ts","application/modules/pages/Feature/items/FeatureController/seed.ts","containers/auth/AuthRouter/index.tsx","containers/auth/SignIn/index.tsx","containers/auth/ForgotPassword/index.tsx","containers/auth/ResetPassword/index.tsx","containers/auth/SignUp/index.tsx","application/modules/auth/AuthProvider/index.tsx","application/modules/pages/Feature/components/filters/FilterSelector/index.tsx","application/modules/pages/Feature/components/filters/FiltersRenderer/index.tsx","application/modules/pages/Feature/items/FeatureFilters/index.tsx","application/modules/pages/Entity/components/EntityHeadSortable/index.tsx","application/modules/pages/Entity/components/EntityList/index.tsx","application/modules/pages/Entity/components/EntityList/styles.ts","containers/layout/VerticalNavigation/index.tsx","application/layouts/application/VerticalLayout/index.tsx","application/modules/pages/Feature/items/FeatureApi/references.ts","application/modules/pages/Feature/items/FeatureApi/index.ts","application/modules/pages/Entity/components/EntityBreadcrumbs/index.tsx","application/modules/pages/Entity/components/EntityBreadcrumbs/styles.ts","application/modules/pages/Entity/components/EntityHead/index.tsx","application/modules/pages/Entity/components/EntityHead/styles.ts","application/modules/pages/Entity/components/EntityFilter/index.tsx","application/modules/pages/Entity/components/EntityFilter/styles.ts","application/modules/pages/Entity/components/EntityFooter/index.tsx","application/modules/pages/Entity/components/EntityFooter/styles.ts","application/modules/pages/Feature/components/list/FeatureListTitle/index.tsx","application/modules/pages/Feature/components/list/FeatureListRenderer/index.tsx","application/modules/pages/Feature/components/list/FeatureListTheadItem/index.tsx","application/modules/pages/Feature/components/list/FeatureListTable/index.tsx","containers/auth/Account/index.tsx","example/assets/logo512.png","application/modules/pages/Feature/components/read/FeatureReadField/styles.module.scss","application/modules/pages/Feature/components/filters/FilterWrapper/styles.module.scss","application/layouts/application/HorizontalLayout/styles.module.scss","application/modules/pages/Page/styles.module.scss","application/modules/pages/Feature/components/list/FeatureListTheadItem/styles.module.scss","application/modules/pages/Feature/components/list/FeatureListTable/styles.module.scss","application/modules/pages/Feature/filters/DateFilter/styles.module.scss","application/modules/index.ts","locales sync //.json$","application/modules/pages/Page/components/PageRenderer/index.tsx","application/modules/pages/Feature/types/feature.ts","application/modules/pages/Feature/filters/index.ts","application/modules/pages/Feature/items/index.ts","application/modules/auth/index.ts","application/modules/auth/JWTAuthProvider/index.tsx","application/types/index.ts","application/utils/index.ts","application/modules/pages/Entity/components/EntityFieldBase64/index.tsx","application/modules/pages/Entity/components/EntityFieldBase64/styles.ts","application/modules/pages/Entity/components/EntityFieldBoolean/index.tsx","application/modules/pages/Entity/components/EntityFieldDate/index.tsx","application/modules/pages/Entity/components/EntityFieldDateRange/index.tsx","application/modules/pages/Entity/components/EntityFieldDatetime/index.tsx","application/modules/pages/Entity/components/EntityFieldNumber/index.tsx","application/modules/pages/Entity/components/EntityFieldPhone/index.tsx","application/modules/pages/Entity/components/EntityFieldReferenceSelect/index.tsx","application/modules/pages/Entity/components/EntityFieldRichText/index.tsx","application/modules/pages/Entity/components/EntityFieldSelect/index.tsx","application/modules/pages/Entity/components/EntityFieldString/index.tsx","application/modules/pages/Entity/components/EntityFilterText/index.tsx","application/modules/pages/Entity/components/EntityFilterText/styles.ts","application/modules/pages/Entity/components/EntityFieldTextarea/index.tsx","containers/layout/HorizontalNavigation/index.tsx","containers/layout/HorizontalNavigation/styles.ts","application/layouts/application/HorizontalLayout/index.tsx","application/layouts/login/AuthCenteredLayout/index.tsx","containers/common/Notification/index.tsx","application/modules/common/Notification/index.tsx","utils/theme.ts","application/modules/config/Config/index.tsx","application/modules/pages/Entity/components/EntityListWrapper/index.tsx","application/modules/pages/Entity/index.tsx","utils/query.ts","application/modules/common/Application/index.tsx","application/modules/common/Application/styles.ts","application/modules/pages/Feature/defaults.ts","application/modules/pages/Feature/index.tsx","application/modules/pages/Feature/fields/StringField/index.tsx","application/modules/pages/Feature/components/list/FeatureListWrapper/styles.module.scss","application/modules/pages/Feature/components/list/FeatureListTitle/styles.module.scss","application/modules/pages/Feature/components/list/FeatureListPagination/styles.module.scss","application/modules/pages/Feature/components/list/FeatureListButtons/styles.module.scss","application/modules/pages/Feature/components/common/Placeholder/styles.module.scss","application/modules/pages/Feature/components/read/FeatureReadWrapper/styles.module.scss","application/modules/pages/Feature/components/read/FeatureReadButtons/styles.module.scss","application/modules/pages/Feature/components/read/FeatureReadTitle/styles.module.scss","application/modules/pages/Feature/components/read/FeatureReadContent/styles.module.scss","application/modules/pages/Feature/components/read/FeatureReadSubmit/styles.module.scss","application/modules/pages/Feature/components/filters/FiltersRenderer/styles.module.scss","application/modules/pages/Feature/components/filters/FilterSelector/styles.module.scss","application/modules/pages/Entity/components/EntityListWrapper/styles.module.scss","application/modules/pages/Entity/components/EntityFieldTextarea/styles.module.scss","example/locales sync //.json$","example/pages/entity/__mocks__/sampleData.ts","example/pages/entity/api.ts","example/pages/entity/fields.ts","example/pages/entity/index.tsx","example/pages/page/index.tsx","example/pages/page-hidden/index.ts","example/pages/page-admin-only/index.tsx","example/pages/page-user-only/index.tsx","example/pages/page-admin-and-user/index.tsx","example/auth/__mocks__/authData.ts","example/auth/__mocks__/CustomError.ts","example/layout/auth/AuthCustomLayout/index.tsx","example/auth/jwt/index.ts","example/pages/custom/index.tsx","example/pages/feature/mock.ts","example/pages/feature/api.ts","example/pages/feature/fields.ts","example/pages/feature/index.tsx","example/index.ts","index.tsx"],"names":["useFeature","useContext","MobXProviderContext","feature","useConfig","config","DEFAULT_LANGUAGES","DEFAULT_NAMESPACES","loadResources","resourcesContext","languages","resources","reduce","o","language","Object","assign","keys","forEach","filePath","getLanguage","hasOwnProperty","namespace","getNamespace","translations","existTranslations","mergeDeepLeft","split","splice","shift","pop","i18nInit","i18n","use","initReactI18next","i18nUseBrowserLanguageDetector","BrowserLanguageDetector","defaultResources","require","i18nResourcesContext","i18nLanguages","init","fallbackLng","i18nDefaultLanguage","debug","ns","defaultNS","keySeparator","interpolation","escapeValue","formatSeparator","react","wait","Placeholder","observer","width","Math","random","height","children","isLoading","className","styles","placeholder","style","UNAUTHORIZED","AUTH_ERRORS","CANT_LOGIN","EMPTY_USER","id","email","username","role","token","FeatureField","name","options","extendObservable","this","features","validator","allowEmptyFilter","roles","permissions","defaultValue","path","editError","data","errors","dissocPath","fieldPath","label","value","List","readValue","String","editValue","onChange","error","Update","view","lensPath","filters","read","editor","auth","parent","userRole","values","FeatureFieldFeature","acc","byFeature","byRole","includes","byPermission","has","observable","list","create","update","filter","sort","computed","action","val","resetErrorIfAny","assocPath","inline","filterValue","onFilterChange","onReset","onFilterReset","omit","selected","module","exports","ENTITY_FIELD_RENDERS","string","EntityFieldString","textarea","EntityFieldTextarea","date","EntityFieldDate","datetime","EntityFieldDateTime","daterange","EntityFieldDateRange","boolean","EntityFieldBoolean","select","EntityFieldSelect","phone","EntityFieldPhone","richtext","EntityFieldRichText","base64image","EntityFieldBase64Image","number","EntityFieldNumber","referenceSelect","EntityFieldReferenceSelect","ENTITY_REFERENCE_FIELDS","getEntityFieldRenderer","type","key","prototype","call","ENTITY_SORT_DIRS","ASC","DESC","ENTITY_ERRORS","CANT_UPDATE_ITEM","CANT_LOAD_ITEMS","FIELD_IS_REQUIRED","INCORRECT_INPUT","SelectInput","disabled","variants","autocomplete","isLoadingReference","ref","useRef","useState","labelWidth","setLabelWidth","onChangeHandler","useCallback","event","target","useMemo","entries","map","title","find","option","onAutocompleteChange","_","useEffect","current","clientWidth","disableClearable","getOptionLabel","renderInput","params","variant","helperText","size","fullWidth","minWidth","item","FeatureRendererRouter","Read","Create","components","location","useLocation","controller","getIdFromUrl","mode","pathname","url","FeatureMode","onEnter","exact","render","to","FeatureRenderer","containers","FeatureListRenderer","FeatureReadRenderer","Page","fields","user","wrap","enabled","childFields","undefined","StringInput","handler","classNames","input","SelectField","listVariants","formatValue","filterVariants","length","wrapper","Wrapper","FeatureReadWrapper","container","Container","FeatureReadContainer","header","Header","FeatureReadHeader","footer","Footer","FeatureReadFooter","Title","FeatureReadTitle","buttons","Buttons","FeatureReadButtons","breadcrumbs","Breadcrumbs","FeatureReadBreadcrumbs","content","Content","FeatureReadContent","submit","Submit","FeatureReadSubmit","FilterWrapper","onClear","close","onClick","EntityViewer","withStyles","theme","grid","display","gridTemplateColumns","marginBottom","spacing","margin","field","color","fontSize","fontWeight","fontFamily","typography","padding","boxShadow","marginTop","loader","alignItems","justifyContent","minHeight","gridColumnStart","gridColumnEnd","classes","onSave","onCancel","onResetFieldError","setEditorData","getItem","cancelGetItem","withToken","isEditing","entity","t","useTranslation","isCreating","visibleFields","hideInEdit","hideInCreate","hideInView","onFieldChange","f","onSubmit","preventDefault","CircularProgress","Paper","flexWrap","required","Grid","flex","Button","IntegerField","filterExact","accuracy","preserveZero","toFixed","parseFloat","FeatureDataReference","FeatureListContainer","Filters","Pagination","pagination","head","FeatureListWrapper","FeatureListPagination","rows","page","count","rowsSelectOptions","labelDisplayedRows","from","pageNum","pageCount","ceil","onRowsChange","onPageChange","rowsPerPageOptions","component","labelRowsPerPage","rowsPerPage","onChangePage","onChangeRowsPerPage","FeatureListFooter","FeatureListHeader","FeatureListButtons","canBeCreated","api","availableApiFeatures","canBeExported","export","goToCreate","FeatureListFilters","fieldsList","fitlers","FeatureListEmptyRows","memo","cols","Array","i","j","FeatureListRow","fieldsOfCurrentMode","history","useHistory","goToRead","goToUpdate","hover","submitItem","isHeaderShown","canBeEdited","canBeDeleted","delete","onDelete","window","confirm","onEdit","startIcon","getItemTitle","useRouteMatch","separator","aria-label","queryString","RouterLink","onlyFields","hideLabel","hasPath","FeatureReadField","cancelEditing","FeatureData","refs","references","DateFilter","initialValue","isRange","setValue","onRangeChange","start","end","isValid","it","formatRFC3339","join","onSingleChange","rangeValue","parseISO","isDate","singleValue","parsed","datepicker","control","mask","startProps","endProps","props","SelectFilter","StringFilter","DateField","parser","dateFormat","format","formatter","DateInput","parsedValue","ReferenceField","dependencies","reaction","updateRefs","bind","getReference","isLoadingAll","all","disabledByDependencies","some","EntityField","isFiltering","cb","args","createElement","AuthVerticalLayout","splash","layout","left","left__wrap","logo","src","alt","form","image","backgroundImage","controllerGetList","result","getReferencesAll","notifications","showError","toString","controllerGetRead","controllerGetReferences","controllerPostCreate","toJS","editorDataForCurrentMode","getItemId","goToList","clearEditorData","controllerPostUpdate","controllerDelete","FeatureController","cancelAll","instances","instance","cancel","re","RegExp","replace","match","parseInt","validateFields","initialData","slice","controllerSeedData","listLoader","flow","clearErrors","then","copyReadToEditor","a","clearReadData","seedData","beforeReadMode","beforeListMode","beforeUpdateMode","beforeCreateMode","validation","AuthRouter","ThemeProvider","themeInstance","CssBaseline","signUp","forgotPassword","resetPassword","signIn","Output","SignIn","onForgotPassword","authPasswRestoreFn","push","setEmail","password","setPassword","onSubmitCapture","sendAuthRequest","onEmailChange","onPasswordChange","loginLabel","Helmet","noValidate","TextField","autoComplete","autoFocus","InputProps","endAdornment","InputAdornment","position","forgot","button","authSignupFn","Link","ForgotPassword","sendAuthPasswRestore","ResetPassword","passwordRepeat","setPasswordRepeat","matches","onPasswordRepeatChange","sendAuthPasswUpdate","SignUp","sendAuthSignup","AuthProvider","sendAuthRequestInstance","sendAuthRequestCancel","sendAuthPasswRestoreInstance","sendAuthPasswRestoreCancel","e","sendAuthPasswUpdateInstance","sendAuthPasswUpdateCancel","getPersistedCredentials","JSON","parse","localStorage","persistCredentials","setItem","stringify","logoutInstance","logoutCancel","persist","getUserName","getUserRoleTitle","getUserRole","router","roleTitles","authRequestFn","catch","response","Error","showSuccess","authPasswUpdateFn","trim","passwordValidator","authLogoutFn","req","FilterSelector","onSelect","buttonRef","setButtonRef","onMenuOpen","onMenuClose","onFieldSelect","selectable","aria-controls","aria-haspopup","Menu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","anchorEl","onClose","open","MenuItem","ListItemText","primary","FiltersRenderer","filterable","onAdd","Filter","FeatureFilters","restoreFilters","search","qs","__sortDir","toLowerCase","SortDir","sortDir","and","__sortBy","sortBy","__page","__rows","persistFilters","origin","replaceState","pickBy","query","EntityHeadSortable","active","onSortChange","direction","TableCell","TableSortLabel","EntityList","table","lineHeight","verticalAlign","boxSizing","borderLeft","palette","main","button_active","background","borderRadius","backgroundColor","dark","paper","maxHeight","extra","canView","canEdit","canSelect","setSelected","onRowClick","before","after","firstRow","lastRow","tableHead","expanded","setExpanded","hideInList","onRowClicked","el","isAllSelected","onSelectAll","colSpan","onExtraClose","TableContainer","Table","stickyHeader","TableHead","TableRow","Checkbox","checked","sortable","TableBody","entry","align","classnames","VerticalNavigation","openList","setOpenList","navigation","linksForCurrentUser","handleClick","link","disablePadding","subheader","ListItem","text","ExpandLess","ExpandMore","Collapse","in","child","VerticalLayout","menu","fallbackUrl","account","Account","getReferenceAll","host","authorization","URL","href","FeatureApi","Promise","request","methods","urls","FeatureFeature","availableFeatures","valuesForList","limit","offset","status","EntityBreadcrumbs","viewable","editable","Typography","EntityHead","flexDirection","border","whiteSpace","flexGrow","marginRight","paddingRight","canCreate","canExport","filterData","setFilters","applyFilter","onExport","clearFilter","justify","EntityFilter","paddingLeft","top","formControl","paddingTop","transform","clear","iconButton","filterButton","onSelectField","setFilterValue","index","removeFilter","filterableFields","selectableFields","currentFilters","tabIndex","IconButton","EntityFooter","pager","totalCount","itemsPerPage","items","setPage","setPerPage","newPage","TablePagination","FeatureListTitle","FeatureListTable","FeatureListTheadItem","thead","ListHead","onLogout","logout","userName","userRoleTitle","webpackContext","webpackContextResolve","__webpack_require__","code","resolve","PageRenderer","onMount","onUnmount","output","EMPTY_TOKENS","access","refresh","JWTAuthProvider","tokenRefreshInstance","tokens","persistTokens","hideNotification","message","tokenRefreshFn","console","warn","opacity","outlinedInput","backgroundSize","backgroundPosition","preview","maxWidth","innerError","setInnerError","getBase64","file","reject","reader","FileReader","readAsDataURL","onload","onerror","loadImage","files","maxSize","minSize","allowedMimeType","photo","img","Image","naturalWidth","naturalHeight","minViewBox","maxViewBox","FormControl","htmlFor","OutlinedInput","inputComponent","accept","mimes","Box","FormControlLabel","toISOString","formatISO","filtered","valueOf","Date","ampm","isNil","inputProps","step","emptyNode","referenceData","InputLabel","Select","FormHelperText","setVal","contentHTML","convertFromHTML","state","ContentState","createFromBlockArray","contentBlocks","entityMap","convertToRaw","draftToHtml","getCurrentContent","controls","dangerouslySetInnerHTML","__html","onInput","multiline","pre","HorizontalNavigation","createStyles","appbar","toolbar","fill","links","tab","tabs","textTransform","textDecoration","bottom","withTheme","pages","canList","onTabChange","activeTab","findIndex","getBoundingClientRect","AppBar","Toolbar","Tabs","indicatorColor","textColor","scrollButtons","Tab","Notification","show","timeout","Snackbar","autoHideDuration","Alert","severity","Notifications","notification","DEFAULT_THEME","shape","Config","createMuiTheme","pagesForCurrentUser","process","createBrowserHistory","EntityListWrapper","Entity","fetchItemsInstance","getFilters","fetchItems","fetchItemsCancel","updateItemInstance","isValidField","getItemsCancel","getItemsInstance","ListHeadTitle","ListHeadButtons","exportData","exportable","creatable","ListExtra","setSort","ListBody","ListFooter","editorData","ViewerHeadButtons","editorFieldErrors","onEditCancel","resetFieldError","forbiddenPlaceholder","ViewerHead","ViewerBody","ViewerFooter","EditorHeadButtons","updateItem","EditorHead","EditorBody","EditorFooter","CreatorHeadButtons","createItem","createEmptyItem","CreatorHead","CreatorBody","CreatorFooter","Creator","Editor","Viewer","method","fetchItemsFn","getMany","refResults","obj","res","validateSubmitFields","updateItemsFn","goBack","createItemsFn","get","getItemsFn","getFiltersFromHash","setFiltersWindowHash","hideInExport","csv","uri","encodeURI","saveAs","URLSearchParams","_page","_sortBy","_sortDir","_items","hash","pairs","substr","pair","decodeURIComponent","parseQuery","Application","isLogged","I18nextProvider","dateAdapter","DateFnsAdapter","locale","ruLocale","FEATURE_DEFAULT_FEATURES","Feature","renderer","createReferenceData","attachFeatureToFields","onActionChange","debounce","featuresOfCurrentUser","StringField","SAMPLE_ENTITY_1","created","createdTime","number2","visible","SAMPLE_ENTITY_2","fetchEntityItemsFn","log","setTimeout","getEntityFn","updateEntityFn","createEntityFn","getEntityTypeVariants","1","2","3","SAMPLE_ENTITY_FIELDS","ADMIN_USER_RESPONSE_JWT","COMMON_USER_RESPONSE_JWT","CustomError","AuthCustomLayout","info","seed","generateBaseData","age","birthDate","description","nested","delay","ms","getFeatureList","getFeature","createFeature","updateFeature","deleteFeature","getRolesAll","10","20","30","FEATURE_FIELDS","jwtAuth","pageHidden","pageAdminOnly","pageUserOnly","pageAdminAndUser","custom","ReactDOM","example","document","getElementById"],"mappings":"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","file":"static/js/main.a771511f.chunk.js","sourcesContent":["/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './modules';\nexport * from './types';\nexport * from './utils';\nexport * from './layouts';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './api';\nexport * from './feature';\nexport * from './field';\nexport * from './filters';\nexport * from './reference';\nexport * from './renderer';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\nimport { MobXProviderContext } from 'mobx-react';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { Config, Entity } from '~/application';\nimport { useContext } from 'react';\n\nexport function useFeature<T extends Feature = Feature>() {\n  return useContext(MobXProviderContext).feature as T;\n}\n\nexport function useEntity<T extends Entity = Entity>(): T {\n  return useContext(MobXProviderContext).entity as T;\n}\n\nexport function useConfig<T extends Config = Config>(): T {\n  return useContext(MobXProviderContext).config as T;\n}\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport i18n, { Resource } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport BrowserLanguageDetector from \"i18next-browser-languagedetector\";\nimport { mergeDeepLeft } from \"ramda\";\nimport { Config, IConfigProps } from \"~/application\";\n\nexport const DEFAULT_LANGUAGES = [\"en\", \"ru\"]\nexport const DEFAULT_NAMESPACE = \"common\"\nexport const DEFAULT_NAMESPACES = [\"common\", \"buttons\", \"messages\"]\n\nconst loadResources = (resourcesContext: IConfigProps['i18nResourcesContext'], languages: IConfigProps['i18nLanguages']): Resource => {\n  const resources: Resource =\n    languages.reduce((o, language) => Object.assign(o, {[language]: {}}), {});\n\n  resourcesContext.keys().forEach((filePath: string) => {\n    const language = getLanguage(filePath);\n    if (!resources.hasOwnProperty(language)) {\n      return;\n    }\n    const namespace = getNamespace(filePath);\n    const translations = resourcesContext(filePath);\n\n    const existTranslations = (resources[language][namespace] ?? {}) as object\n    resources[language][namespace] = mergeDeepLeft(existTranslations, translations);\n  });\n\n  return resources\n}\n\nconst getLanguage = (filePath: string): string => {\n  return filePath.split('/').splice(1).shift() ?? \"\";\n}\n\nconst getNamespace = (filePath: string): string => {\n  return filePath.split('/')?.pop()?.split('.').shift() ?? \"\";\n}\n\nexport const i18nInit = (config: Config) => {\n  i18n.use(initReactI18next)\n\n  if (config.i18nUseBrowserLanguageDetector) {\n    i18n.use(BrowserLanguageDetector)\n  }\n\n  const defaultResources = loadResources(require.context('~/locales', true, /\\.json$/), DEFAULT_LANGUAGES)\n  const resources = mergeDeepLeft(loadResources(config.i18nResourcesContext, config.i18nLanguages), defaultResources)\n\n  // noinspection JSIgnoredPromiseFromCall\n  i18n.init({\n    resources: resources,\n    fallbackLng: config.i18nDefaultLanguage,\n    debug: config.debug,\n    // have a common namespace used around the full app\n    ns: DEFAULT_NAMESPACES,\n    defaultNS: DEFAULT_NAMESPACE,\n    keySeparator: false, // we use content as keys\n    interpolation: {\n      escapeValue: false,\n      formatSeparator: \",\"\n    },\n    react: {\n      wait: true\n    }\n  });\n}\n\nexport default i18n;\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport { observer } from 'mobx-react';\n\ninterface IProps {\n  width?: string | number;\n  height?: string | number;\n  isLoading?: boolean;\n}\n\nconst Placeholder: FC<IProps> = observer(\n  ({\n    width = `${Math.random() * 20 + 50}%`,\n    height = '1em',\n    children,\n    isLoading = true,\n  }) =>\n    isLoading ? (\n      <div className={styles.placeholder} style={{ width, height }} />\n    ) : (\n      <>{children}</>\n    )\n);\n\nexport { Placeholder };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\n// throw this to signalize we're not logged in\nimport { FC } from 'react';\nimport { AuthProvider } from '~/application';\n\nexport const UNAUTHORIZED = 'UNAUTHORIZED';\n\nexport const AUTH_ERRORS = {\n  CANT_LOGIN: `Can't login. Unknown error.`,\n};\n\nexport const EMPTY_USER: AuthProviderUser = {\n  id: 0,\n  email: '',\n  username: '',\n  role: '',\n  token: '',\n};\n\nexport type UserRole = any;\n\nexport type IAuthRequestFn = (\n  email: string,\n  password: string\n) => Promise<{ user: AuthProviderUser; error?: string }>;\n\nexport type IAuthPasswRestoreFn = (\n  email: string\n) => Promise<{ error?: string }>;\n\nexport type IAuthPasswUpdateFn = (\n  token: string,\n  password: string,\n  passwordRepeat?: string\n) => Promise<{ error?: string }>;\n\nexport type IAuthSignupFn = (data: Record<any, any>) => Promise<any>;\n\nexport type IAuthLogoutFn = (token: String) => Promise<any>;\n\nexport type IAuthNewPasswordValidator = (\n  password: string\n) => string | undefined;\n\nexport interface AuthProviderOptions {\n  getUserName: (auth: AuthProvider) => string;\n  getUserRoleTitle: (auth: AuthProvider) => string;\n  getUserRole: (auth: AuthProvider) => UserRole;\n  roleTitles?: Record<any, string>;\n  persist?: boolean;\n  layout?: FC;\n  splash?: string;\n  authRequestFn?: IAuthRequestFn;\n  authPasswRestoreFn?: IAuthPasswRestoreFn;\n  authPasswUpdateFn?: IAuthPasswUpdateFn;\n  authSignupFn?: IAuthSignupFn;\n  authLogoutFn?: IAuthLogoutFn;\n  passwordValidator?: IAuthNewPasswordValidator;\n  loginLabel?: string;\n  router?: FC;\n  signIn?: FC;\n  signUp?: FC;\n  forgotPassword?: FC;\n  resetPassword?: FC;\n}\n\nexport interface AuthProviderUser extends Record<string, any> {\n  id?: number;\n  email?: string;\n  username?: string;\n  role?: string;\n  token?: string;\n}\n\nexport type WithTokenFunction = (\n  req: Function,\n  args: Record<string, any>\n) => Promise<any>;\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { action, computed, extendObservable, observable } from 'mobx';\nimport {\n  FeatureFieldFeature,\n  FeatureFieldListProps,\n  FeatureFieldProps,\n} from '~/application/modules/pages/Feature/types/field';\nimport { StringFilter } from '~/application/modules/pages/Feature/filters/StringFilter';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport {\n  assocPath,\n  dissocPath,\n  equals,\n  has,\n  lensPath,\n  omit,\n  reject,\n  view,\n} from 'ramda';\nimport { StringInput } from '~/application/modules/pages/Feature/components/inputs/StringInput';\nimport { observer } from 'mobx-react';\nimport { FeatureFeature } from '~/application/modules/pages/Feature/types';\n\nexport class FeatureField<\n  T extends Record<string, any> = Record<string, any>,\n  V extends any = any\n> {\n  constructor(\n    public name: string,\n    public options: FeatureFieldProps<T, V> = {}\n  ) {\n    extendObservable(this, { name, options });\n\n    if (options.features) {\n      this.features = {\n        ...this.features,\n        ...options.features,\n      };\n    }\n\n    if (options.validator) {\n      this.validator = options.validator;\n    }\n\n    if (options.allowEmptyFilter)\n      this.allowEmptyFilter = options.allowEmptyFilter;\n\n    if (options.roles) this.roles = options.roles;\n    if (options.permissions) this.permissions = options.permissions;\n    if (options.defaultValue) this.defaultValue = options.defaultValue;\n    if (options.path) this.path = options.path;\n  }\n\n  @observable public path: string[] = [];\n  @observable protected feature?: Feature<T>;\n\n  @observable roles?: FeatureFieldProps<T, V>['roles'];\n  @observable permissions?: FeatureFieldProps<T, V>['permissions'];\n\n  @observable public listColumnSize = '200px';\n  @observable public allowEmptyFilter = false;\n  @observable public features: Record<FeatureFieldFeature, boolean> = {\n    list: true,\n    create: true,\n    update: true,\n    read: true,\n    filter: false,\n    sort: true,\n  };\n  @observable validator?: FeatureFieldProps<T, V>['validator'];\n  @observable defaultValue?: V;\n\n  @computed\n  get label() {\n    return this.options.label || this.name;\n  }\n\n  @computed\n  get key() {\n    return this.name;\n  }\n\n  @action\n  public useFeature(feature: Feature<T>) {\n    this.feature = feature;\n  }\n\n  @action\n  public onChange = (val: any) => {\n    if (!this.feature) return;\n\n    this.resetErrorIfAny();\n\n    this.feature.data.editor = assocPath(\n      this.fieldPath,\n      val\n    )(this.feature.data.editor) as T;\n  };\n\n  @computed\n  get List(): FC<FeatureFieldListProps> {\n    return ({ value }) => <div>{value}</div>;\n  }\n\n  @computed\n  get ListHead(): FC {\n    return () => <div>{this.label}</div>;\n  }\n\n  @computed\n  get Read() {\n    return <this.List value={this.readValue} />;\n  }\n\n  @computed\n  get Update() {\n    const value = String(this.editValue);\n\n    return (\n      <StringInput\n        value={value}\n        onChange={this.onChange}\n        label={this.label}\n        error={this.editError}\n        isLoading={this.feature?.data.isLoading}\n      />\n    );\n  }\n\n  @computed get Create() {\n    return this.Update;\n  }\n\n  @observable\n  public Filter: FC<{ inline?: boolean }> = observer(({ inline }) => (\n    <StringFilter\n      value={this.filterValue}\n      name={this.name}\n      label={this.label}\n      onChange={this.onFilterChange}\n      onReset={this.onFilterReset}\n      inline={inline}\n    />\n  ));\n\n  @action\n  public onFilterChange = (value: any) => {\n    if (!this.feature?.filters.value) return;\n\n    this.feature.filters.value = assocPath(\n      this.fieldPath,\n      value\n    )(this.feature.filters.value) as any;\n  };\n\n  @action\n  onFilterReset = () => {\n    if (!this.feature?.filters) return;\n\n    this.feature.filters.value = omit([this.name], this.feature.filters.value);\n    this.feature.filters.selected = dissocPath(\n      this.fieldPath,\n      this.feature.filters.selected\n    );\n  };\n\n  @computed\n  get filterValue() {\n    return view(lensPath(this.fieldPath), this.feature?.filters.value);\n  }\n\n  @computed\n  get readValue(): V {\n    return view(lensPath(this.fieldPath), this.feature?.data.read);\n  }\n\n  @computed\n  get editValue(): V {\n    return view(lensPath(this.fieldPath), this.feature?.data.editor) as V;\n  }\n\n  @computed\n  get editError(): string {\n    return view(lensPath(this.fieldPath), this.feature?.data.errors);\n  }\n\n  /**\n   * List of features, available for current user role by field.features,\n   * field.roles and field.permissions\n   */\n  @computed\n  get featuresOfCurrentUser() {\n    const auth = this.feature?.parent?.auth;\n    const role = auth?.userRole;\n\n    return Object.values(FeatureFieldFeature).reduce((acc, feature) => {\n      const byFeature = this.features[feature];\n\n      const byRole = !this.roles || (role && this.roles.includes(role));\n\n      const byPermission =\n        !this.permissions ||\n        !has(feature, this.permissions) ||\n        (role && this.permissions[feature]!!.includes(role));\n\n      return { ...acc, [feature]: byFeature && byRole && byPermission };\n    }, {} as Record<FeatureFeature, boolean>);\n  }\n\n  @action\n  resetErrorIfAny() {\n    if (this.feature && this.editError) {\n      this.feature.data.errors = dissocPath(\n        this.fieldPath,\n        this.feature.data.errors\n      );\n    }\n  }\n\n  @computed\n  get fieldPath() {\n    return [...this.path, this.name];\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__tTZys\",\"header\":\"styles_header__1AUSI\",\"title\":\"styles_title__3UlxG\",\"content\":\"styles_content__2efdu\",\"container\":\"styles_container__1Y659\",\"submit\":\"styles_submit__fJ8qC\"};","/* Copyright (c) 2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FC } from \"react\";\nimport {\n  EntityFieldBase64Image,\n  EntityFieldBoolean,\n  EntityFieldDate,\n  EntityFieldDateRange,\n  EntityFieldDateTime,\n  EntityFieldNumber,\n  EntityFieldPhone,\n  EntityFieldReferenceSelect,\n  EntityFieldRichText,\n  EntityFieldSelect,\n  EntityFieldString,\n  EntityFieldTextarea\n} from \"~/application\";\n\nexport const ENTITY_FIELD_RENDERS = {\n  string: EntityFieldString,\n  textarea: EntityFieldTextarea,\n  date: EntityFieldDate,\n  datetime: EntityFieldDateTime,\n  daterange: EntityFieldDateRange,\n  boolean: EntityFieldBoolean,\n  select: EntityFieldSelect,\n  phone: EntityFieldPhone,\n  richtext: EntityFieldRichText,\n  base64image: EntityFieldBase64Image,\n  number: EntityFieldNumber,\n  referenceSelect: EntityFieldReferenceSelect,\n};\nexport const ENTITY_REFERENCE_FIELDS = {\n  referenceSelect: true,\n};\n// getFieldRenderer returns field-type specific renderer\nexport const getEntityFieldRenderer = (type: string = 'string'): FC<any> => {\n  const key = Object.prototype.hasOwnProperty.call(ENTITY_FIELD_RENDERS, type)\n    ? type\n    : 'string';\n\n  return ENTITY_FIELD_RENDERS[key as keyof typeof ENTITY_FIELD_RENDERS] as FC<any>;\n};\nexport const ENTITY_SORT_DIRS: Record<string, 'asc' | 'desc'> = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\nexport const ENTITY_FILTER_TYPES = {\n  TEXT: 'TEXT',\n  SELECT: 'SELECT',\n  NUMBER: 'NUMBER',\n  DATE: 'DATE',\n};\nexport const ENTITY_ACTIONS = {\n  CREATE: 'create',\n  GET: 'get',\n  LIST: 'list',\n  DELETE: 'delete',\n  UPDATE: 'update',\n};\nexport const ENTITY_ERRORS = {\n  CANT_UPDATE_ITEM: 'messages:Failed to update',\n  CANT_LOAD_ITEMS: 'messages:Items load failed',\n  FIELD_IS_REQUIRED: 'messages:Required field',\n  INCORRECT_INPUT: 'messages:Check all fields',\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  FC,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { observer } from 'mobx-react';\nimport { FeatureInputProps } from '~/application/modules/pages/Feature/types/field';\nimport {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  TextFieldProps,\n} from '@material-ui/core';\nimport styles from './styles.module.scss';\nimport { Autocomplete } from '@material-ui/lab';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport { useFeature } from '~/application/utils/hooks';\n\ntype IProps = FeatureInputProps & {\n  variants: Record<any, any>;\n  autocomplete: boolean;\n  isLoadingReference?: boolean;\n};\n\ntype AutocompleteOption = {\n  title: string;\n  value: any;\n};\n\nconst SelectInput: FC<IProps> = observer(\n  ({\n    onChange,\n    label,\n    value,\n    error,\n    disabled,\n    variants,\n    autocomplete,\n    isLoadingReference,\n    isLoading = false,\n  }) => {\n    const ref = useRef<HTMLLabelElement>(null);\n    const feature = useFeature();\n\n    const [labelWidth, setLabelWidth] = useState(0);\n\n    const onChangeHandler = useCallback(\n      (event) => onChange(event.target.value),\n      [onChange]\n    );\n\n    const options = useMemo<AutocompleteOption[]>(\n      () =>\n        Object.entries(variants).map(([value, title]) => ({\n          title,\n          value,\n        })),\n      [variants]\n    );\n\n    const selected = useMemo(\n      () =>\n        options.find((option) => String(option.value) === String(value)) || '',\n      [options, value]\n    );\n\n    const onAutocompleteChange = useCallback(\n      (_, { value }) => onChange(value),\n      [onChange]\n    );\n\n    useEffect(() => {\n      setLabelWidth((ref.current && ref.current.clientWidth) || 0);\n    }, [ref.current]);\n\n    return (\n      <Placeholder\n        isLoading={isLoading || !!isLoadingReference}\n        width=\"100%\"\n        height=\"48px\"\n      >\n        <div className={styles.select}>\n          {autocomplete ? (\n            <Autocomplete\n              disableClearable\n              value={selected}\n              getOptionLabel={(option) =>\n                typeof option === 'string' ? option : option.title\n              }\n              options={options}\n              onChange={onAutocompleteChange}\n              disabled={disabled}\n              renderInput={(params: TextFieldProps) => (\n                <TextField\n                  {...params}\n                  variant=\"filled\"\n                  placeholder=\"Поиск\"\n                  label={label}\n                  disabled={disabled}\n                  error={!!error}\n                  helperText={error}\n                  size=\"small\"\n                  fullWidth\n                />\n              )}\n            />\n          ) : (\n            <TextField\n              variant=\"filled\"\n              select\n              label={label}\n              value={value || ''}\n              onChange={onChangeHandler}\n              style={{ minWidth: labelWidth + 40 }}\n              disabled={disabled}\n              helperText={error}\n              error={!!error}\n              size=\"small\"\n              fullWidth\n            >\n              {options &&\n                Object.keys(variants).map((item) => (\n                  <MenuItem key={item} value={item}>\n                    {variants[item]}\n                  </MenuItem>\n                ))}\n            </TextField>\n          )}\n        </div>\n      </Placeholder>\n    );\n  }\n);\n\nexport { SelectInput };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"styles_grid__r0hlG\",\"head\":\"styles_head__9JI2n\",\"title\":\"styles_title__2CmCg\",\"content\":\"styles_content__3Eemd\",\"pagination\":\"styles_pagination__2cZjo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__2RazS\",\"left\":\"styles_left__1uN5j\",\"left__wrap\":\"styles_left__wrap__3Nba4\",\"image\":\"styles_image__10Cbl\",\"logo\":\"styles_logo__183pb\",\"form\":\"styles_form__33zr2\",\"content\":\"styles_content__6gLqH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__2sp21\",\"left\":\"styles_left__zE8CV\",\"left__wrap\":\"styles_left__wrap__1Ua79\",\"image\":\"styles_image__2bEdG\",\"logo\":\"styles_logo__1iRjO\",\"form\":\"styles_form__2Nv2H\",\"content\":\"styles_content__ectVA\"};","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useEffect, useMemo } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { useLocation } from 'react-router';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport {\n  FeatureRendererProps,\n  FeatureRendererReaction,\n} from '~/application/modules/pages/Feature/types/renderer';\nimport { FeatureListRendererComponent } from '~/application/modules/pages/Feature/components/list/FeatureListRenderer';\nimport { FeatureReadRendererComponent } from '~/application/modules/pages/Feature/components/read/FeatureReadRenderer';\n\ninterface IProps {\n  list: FeatureListRendererComponent;\n  read: FeatureReadRendererComponent;\n  update: FeatureReadRendererComponent;\n  create: FeatureReadRendererComponent;\n  components: FeatureRendererProps['components'];\n}\n\nconst FeatureRendererRouter: FC<IProps> = observer(\n  ({ list: List, read: Read, create: Create, update: Update, components }) => {\n    const location = useLocation();\n    const feature = useFeature();\n\n    const id = feature.controller.getIdFromUrl();\n\n    const mode = useMemo<FeatureMode>(() => {\n      switch (location.pathname) {\n        case `${feature.url}/${FeatureMode.create}/`:\n        case `${feature.url}/${FeatureMode.create}`:\n          return FeatureMode.create;\n        case `${feature.url}/${id}/${FeatureMode.update}/`:\n        case `${feature.url}/${id}/${FeatureMode.update}`:\n          return FeatureMode.update;\n        case `${feature.url}/${id}/`:\n        case `${feature.url}/${id}`:\n          return FeatureMode.read;\n        default:\n          return FeatureMode.list;\n      }\n    }, [feature, location.pathname, id]);\n\n    const onEnter = useCallback<FeatureRendererReaction>(() => {\n      feature.mode = mode;\n    }, [feature, mode]);\n\n    useEffect(() => {\n      onEnter(mode, id);\n    }, [mode, id]);\n\n    const { features, url } = feature;\n\n    return (\n      <Switch>\n        <Route\n          exact\n          path={feature.url}\n          render={() => <List {...(components?.list || {})} />}\n        />\n\n        {features.read && (\n          <Route\n            exact\n            path={`${url}/:id`}\n            render={() => <Read {...(components?.read || {})} />}\n          />\n        )}\n\n        {features.create && (\n          <Route\n            exact\n            path={`${url}/${FeatureMode.create}`}\n            render={() => <Create {...(components?.create || {})} />}\n          />\n        )}\n\n        {features.update && (\n          <Route\n            exact\n            path={`${url}/:id/${FeatureMode.update}`}\n            render={() => <Update {...(components?.update || {})} />}\n          />\n        )}\n\n        <Redirect to={feature.url || ''} />\n      </Switch>\n    );\n  }\n);\n\nexport { FeatureRendererRouter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { FeatureRendererProps } from '../../types/renderer';\nimport { computed, observable } from 'mobx';\nimport {\n  FeatureListRenderer,\n  FeatureListRendererComponent,\n  FeatureListRendererProps,\n} from '~/application/modules/pages/Feature/components/list/FeatureListRenderer';\nimport { FeatureRendererRouter } from '~/application/modules/pages/Feature/components/router/FeatureRendererRouter';\nimport {\n  FeatureReadRenderer,\n  FeatureReadRendererComponent,\n  FeatureReadRendererProps,\n} from '~/application/modules/pages/Feature/components/read/FeatureReadRenderer';\n\nexport class FeatureRenderer<T extends Feature<any> = Feature<any>> {\n  constructor({ containers, components }: FeatureRendererProps = {}) {\n    if (containers?.list) {\n      this.list = containers.list;\n    }\n\n    if (containers?.read) {\n      this.read = containers.read;\n    }\n\n    if (containers?.create) {\n      this.create = containers.create;\n    }\n\n    if (containers?.update) {\n      this.update = containers.update;\n    }\n\n    if (components) {\n      this.components = components;\n    }\n  }\n\n  @observable list: FeatureListRendererComponent = FeatureListRenderer;\n  @observable read: FeatureReadRendererComponent = FeatureReadRenderer;\n  @observable create: FeatureReadRendererComponent = FeatureReadRenderer;\n  @observable update: FeatureReadRendererComponent = FeatureReadRenderer;\n\n  @observable components: FeatureRendererProps['components'];\n\n  @computed\n  get output(): JSX.Element {\n    return (\n      <FeatureRendererRouter\n        list={this.list}\n        read={this.read}\n        create={this.create}\n        update={this.update}\n        components={this.components}\n      />\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__vO3H6\",\"menu\":\"styles_menu__3ayae\",\"content\":\"styles_content__18gdD\",\"logo\":\"styles_logo__34h2H\",\"navigation\":\"styles_navigation__dQYHA\",\"account\":\"styles_account__3o8-m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"styles_navigation__3ePdN\",\"text\":\"styles_text__1snHu\",\"list\":\"styles_list__2TjHH\",\"link\":\"styles_link__2A3M0\"};","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { IPageProps } from '~/application/types/page';\nimport { action, computed, observable } from 'mobx';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\n\nexport class Page {\n  @observable title: IPageProps['title'] = 'Admin Toolkit';\n  @observable menu: IPageProps['menu'] = {\n    enabled: true,\n    label: '',\n    url: '',\n    childFields: undefined,\n  };\n  @observable parent?: IPageProps['parent'];\n  @observable roles?: IPageProps['roles'];\n\n  constructor(fields?: Partial<IPageProps>) {\n    if (fields) {\n      Object.assign(this, fields);\n    }\n  }\n\n  @action\n  onMount: (page: Page) => void = () => {};\n\n  @action\n  onUnmount: (page: Page) => void = () => {};\n\n  @computed\n  get canList() {\n    return !!(\n      !this.roles ||\n      !this.parent?.auth ||\n      (this.parent?.auth?.user?.role &&\n        this.roles?.includes(this.parent.auth?.user?.role))\n    );\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{this.title}</h1>\n        <p>You can override this class to make your own cool entity</p>\n      </div>\n    ));\n  }\n\n  get forbiddenPlaceholder() {\n    return (\n      <div className={styles.wrap}>\n        <div className={styles.error}>\n          <h1>Forbidden</h1>\n          <p>You don't have permission to perform that action</p>\n        </div>\n      </div>\n    );\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { observer } from 'mobx-react';\nimport { TextField } from '@material-ui/core';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport { FeatureInputProps } from '~/application/modules/pages/Feature/types/field';\n\nconst StringInput: FC<FeatureInputProps<string>> = observer(\n  ({ value, label, error, onChange, isLoading = false }) => {\n    const handler = useCallback((event) => onChange(event.target.value), [\n      onChange,\n    ]);\n\n    return (\n      <Placeholder isLoading={isLoading} width=\"100%\" height=\"48px\">\n        <TextField\n          value={value || ''}\n          onChange={handler}\n          variant=\"filled\"\n          label={label}\n          error={!!error}\n          helperText={error}\n          size=\"small\"\n          className={classNames(\n            styles.input,\n            'feature-read__input feature-read__input_string'\n          )}\n          fullWidth\n        />\n      </Placeholder>\n    );\n  }\n);\n\nexport { StringInput };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { computed, observable } from 'mobx';\nimport React from 'react';\nimport { SelectFilter } from '~/application/modules/pages/Feature/filters/SelectFilter';\nimport { observer } from 'mobx-react';\nimport { SelectInput } from '~/application/modules/pages/Feature/components/inputs/SelectInput';\n\nexport type SelectFieldOptions<T, V extends string | number> = FeatureField<\n  T,\n  V\n>['options'] & {\n  options?: Record<V, any>;\n  autocomplete?: boolean;\n};\n\nexport class SelectField<\n  T extends Record<string, any> = Record<string, any>,\n  V extends string | number = string\n> extends FeatureField<T, V> {\n  constructor(\n    public name: FeatureField['name'],\n    public options: SelectFieldOptions<T, V> = {}\n  ) {\n    super(name, options);\n\n    if (options.options) this.variants = options.options;\n    if (options.autocomplete) this.autocomplete = true;\n  }\n\n  @observable variants: Record<any, any> = {};\n  @observable autocomplete = false;\n\n  @computed\n  get listVariants() {\n    return this.variants;\n  }\n\n  @computed\n  get filterVariants() {\n    return this.listVariants;\n  }\n\n  formatValue(val: any): any {\n    return Object.prototype.hasOwnProperty.call(this.listVariants, val)\n      ? this.listVariants[val]\n      : val;\n  }\n\n  asString(val: string) {\n    return this.formatValue(val);\n  }\n\n  @computed\n  get List() {\n    return ({ value }: { value: any }) => <div>{this.listVariants[value]}</div>;\n  }\n\n  @computed\n  get Update() {\n    return (\n      <SelectInput\n        label={this.label}\n        onChange={this.onChange}\n        variants={this.filterVariants}\n        value={this.editValue}\n        error={this.editError}\n        isLoading={this.feature?.data.isLoading}\n        autocomplete={\n          Object.keys(this.variants).length > 10 || this.autocomplete\n        }\n      />\n    );\n  }\n\n  @observable\n  Filter: FeatureField['Filter'] = observer(({ inline }) => (\n    <SelectFilter\n      label={this.label}\n      name={this.name}\n      value={this.filterValue}\n      onChange={this.onFilterChange}\n      onReset={this.onFilterReset}\n      variants={this.filterVariants}\n      autocomplete={Object.keys(this.variants).length > 10 || this.autocomplete}\n      inline={inline}\n    />\n  ));\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport { FeatureReadWrapper } from '~/application/modules/pages/Feature/components/read/FeatureReadWrapper';\nimport { FeatureReadContainer } from '~/application/modules/pages/Feature/components/read/FeatureReadContainer';\nimport { FeatureReadFooter } from '~/application/modules/pages/Feature/components/read/FeatureReadFooter';\nimport { FeatureReadHeader } from '~/application/modules/pages/Feature/components/read/FeatureReadHeader';\nimport { FeatureReadButtons } from '~/application/modules/pages/Feature/components/read/FeatureReadButtons';\nimport { FeatureReadTitle } from '~/application/modules/pages/Feature/components/read/FeatureReadTitle';\nimport { FeatureReadBreadcrumbs } from '~/application/modules/pages/Feature/components/read/FeatureReadBreadcrumbs';\nimport { FeatureReadContent } from '~/application/modules/pages/Feature/components/read/FeatureReadContent';\nimport { FeatureReadSubmit } from '~/application/modules/pages/Feature/components/read/FeatureReadSubmit';\n\nexport const FeatureReadRenderer: FeatureReadRendererComponent = observer(\n  ({\n    wrapper: Wrapper = FeatureReadWrapper,\n    container: Container = FeatureReadContainer,\n    header: Header = FeatureReadHeader,\n    footer: Footer = FeatureReadFooter,\n    title: Title = FeatureReadTitle,\n    buttons: Buttons = FeatureReadButtons,\n    breadcrumbs: Breadcrumbs = FeatureReadBreadcrumbs,\n    content: Content = FeatureReadContent,\n    submit: Submit = FeatureReadSubmit,\n  }) => {\n    return (\n      <Wrapper>\n        <Header />\n        <Container\n          title={Title}\n          buttons={Buttons}\n          breadcrumbs={Breadcrumbs}\n          submit={Submit}\n        >\n          <Content />\n        </Container>\n        <Footer />\n      </Wrapper>\n    );\n  }\n);\n\nexport type FeatureReadRendererComponent = FC<\n  Partial<FeatureReadRendererProps>\n>;\n\nexport type FeatureReadRendererProps = Record<\n  | 'wrapper'\n  | 'header'\n  | 'footer'\n  | 'title'\n  | 'buttons'\n  | 'breadcrumbs'\n  | 'content'\n  | 'submit',\n  FC\n> & {\n  container: FC<FeatureReadContainerProps>;\n};\n\nexport type FeatureReadContainerProps = {\n  title: FC;\n  buttons: FC;\n  breadcrumbs: FC;\n  submit: FC;\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport { Close } from '@material-ui/icons';\nimport classNames from 'classnames';\n\ninterface IProps {\n  onClear: () => void;\n  inline?: boolean;\n}\n\nconst FilterWrapper: FC<IProps> = ({ onClear, children, inline }) => (\n  <div className={classNames(styles.filter, 'feature-filter-wrapper')}>\n    <div className={classNames(styles.input, 'feature-filter-wrapper__input')}>\n      {children}\n    </div>\n\n    {!inline && (\n      <div\n        className={classNames(styles.close, 'feature-filter-wrapper__close')}\n        onClick={onClear}\n      >\n        <Close />\n      </div>\n    )}\n  </div>\n);\n\nexport { FilterWrapper };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { Button, CircularProgress, Grid, Paper, withStyles, WithStyles, } from '@material-ui/core';\nimport styles from './styles';\nimport { EntityField, IEntityField } from '~/application';\nimport { observer } from 'mobx-react';\nimport { Entity } from '~/application/modules';\nimport { useTranslation } from \"react-i18next\";\n\ntype IProps = WithStyles<typeof styles> & {\n  url: string;\n  id?: string;\n  fields: IEntityField[];\n  errors: Record<string, string>;\n  isEditing: boolean;\n  isLoading: boolean;\n  data: Record<string, any>;\n  viewable: boolean;\n  entity: Entity;\n\n  setEditorData: (data: Record<string, any>) => void;\n  getItem: (id: any) => void;\n  cancelGetItem: () => void;\n  onSave: () => void;\n  onCancel: () => void;\n  onResetFieldError: (field: string) => void;\n  withToken?: (req: any, args: any) => any;\n};\n\nconst EntityViewer = withStyles(styles)(\n  observer(\n    ({\n       classes,\n       id,\n       fields,\n       errors,\n       onSave,\n       onCancel,\n       onResetFieldError,\n       isLoading,\n       data,\n       setEditorData,\n       getItem,\n       cancelGetItem,\n       withToken,\n       isEditing,\n       entity,\n     }: IProps) => {\n      const {t} = useTranslation();\n      const isCreating = useMemo(() => typeof id === 'undefined', [id]);\n\n      const visibleFields = useMemo(\n        () =>\n          fields.filter(\n            (field) =>\n              (isEditing && !isCreating && !field.hideInEdit) ||\n              (isCreating && !field.hideInCreate) ||\n              (!isEditing && !isCreating && !field.hideInView)\n          ),\n        [fields, isEditing, isCreating]\n      );\n\n      const onFieldChange = useCallback(\n        (f) => (value: any) => {\n          if (errors[f]) {\n            onResetFieldError(f);\n          }\n\n          setEditorData({...data, [f]: value});\n        },\n        [errors, setEditorData, data, onResetFieldError]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          onSave();\n        },\n        [onSave]\n      );\n\n      useEffect(() => {\n        getItem(id);\n        return () => cancelGetItem();\n      }, [cancelGetItem, getItem, id]);\n\n      if (isLoading) {\n        return (\n          <div className={classes.loader}>\n            <CircularProgress/>\n          </div>\n        );\n      }\n\n      return (\n        <div className={classes.wrap}>\n          {data && (\n            <form onSubmit={onSubmit}>\n              <Paper>\n                <div className={classes.grid} style={{flexWrap: 'wrap'}}>\n                  {visibleFields.map((field) => (\n                    <div className={classes.field} key={field.name}>\n                      {!isEditing && (\n                        <div className=\"label\">\n                          {field.label || field.name}\n                          {isEditing && field.required && <span>{` *`}</span>}\n                        </div>\n                      )}\n                      <div className=\"field\">\n                        <EntityField\n                          name={field.name}\n                          data={data}\n                          fields={fields}\n                          isEditing={isEditing}\n                          error={errors[field.name]}\n                          handler={onFieldChange(field.name)}\n                          withToken={withToken}\n                          entity={entity}\n                        />\n                      </div>\n                    </div>\n                  ))}\n\n                  {isEditing && (\n                    <div className={`${classes.field} ${classes.buttons}`}>\n                      <Grid container spacing={1}>\n                        <Grid item style={{flex: 1}}/>\n\n                        <Grid item>\n                          <Button\n                            type=\"button\"\n                            color=\"default\"\n                            variant=\"outlined\"\n                            onClick={onCancel}\n                          >\n                            {t('buttons:Cancel')}\n                          </Button>\n                        </Grid>\n\n                        <Grid item>\n                          <Button\n                            type=\"submit\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                          >\n                            {t('buttons:Save')}\n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </div>\n                  )}\n                </div>\n              </Paper>\n            </form>\n          )}\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityViewer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  grid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(500px, 1fr))',\n  },\n  wrap: {\n    marginBottom: theme.spacing(4),\n    margin: 0,\n    '& .MuiFormControl-root': {\n      width: '100%',\n    },\n  },\n  field: {\n    color: '#282f36',\n    fontSize: '17px',\n    fontWeight: 400,\n    fontFamily: theme.typography.fontFamily,\n    padding: `${theme.spacing(4)}px ${theme.spacing(3)}px`,\n    boxShadow: '#e1e8ee 1px -1px',\n    '& > .label': {\n      display: 'block',\n      color: '#a5b0bf',\n      fontSize: '14px',\n    },\n    '& > .field': {\n      marginTop: theme.spacing(1),\n      display: 'block',\n    },\n  },\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  buttons: {\n    gridColumnStart: 1,\n    gridColumnEnd: -1,\n  },\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account\":\"styles_account__XZFw4\",\"left\":\"styles_left__2oXM0\",\"logout\":\"styles_logout__3woWx\",\"role\":\"styles_role__15aaO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__37cxF\",\"header\":\"styles_header__1ZW9h\",\"button\":\"styles_button__fEuaw\",\"forgot\":\"styles_forgot__2oThj\"};","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { observable } from 'mobx';\nimport React from 'react';\n\nexport type IntegerFieldOptions<T, V> = FeatureField<T, V>['options'] & {\n  filterExact?: boolean;\n  accuracy?: number;\n  preserveZero?: boolean;\n};\n\nexport class IntegerField<\n  T extends Record<string, any> = Record<string, any>\n> extends FeatureField<T, number> {\n  constructor(\n    public name: FeatureField['name'],\n    public options: IntegerFieldOptions<T, number> = {}\n  ) {\n    super(name, options);\n\n    const { filterExact, accuracy, preserveZero } = options;\n\n    if (filterExact) this.filterExact = filterExact;\n    if (accuracy) this.accuracy = accuracy;\n    if (preserveZero) this.preserveZero = preserveZero;\n  }\n\n  @observable filterExact = false;\n  @observable accuracy = 1;\n  @observable preserveZero = false;\n  @observable defaultValue: number = 0;\n\n  formatValue(val: any): number {\n    return this.preserveZero\n      ? val.toFixed(this.accuracy)\n      : parseFloat(val.toFixed(this.accuracy));\n  }\n\n  asString(val: string) {\n    return this.formatValue(val);\n  }\n\n  @observable\n  List: FeatureField['List'] = ({ value }) => (\n    <div>{(value && this.formatValue(value)) || ''}</div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"breadcrumbs\":\"styles_breadcrumbs__2hXSa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__UPbv3\",\"header\":\"styles_header__1xpee\",\"button\":\"styles_button__WWnTS\",\"cancel\":\"styles_cancel__2pROa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__2aK75\",\"header\":\"styles_header__10DfD\",\"button\":\"styles_button__1cWOV\",\"cancel\":\"styles_cancel__10-ny\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__39alU\",\"header\":\"styles_header__3_abW\",\"button\":\"styles_button__1dp9_\",\"cancel\":\"styles_cancel__3Rpbe\"};","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { UserRole } from '~/application';\n\nexport enum FeatureFieldFeature {\n  create = 'create',\n  read = 'read',\n  update = 'update',\n  list = 'list',\n  filter = 'filter',\n  sort = 'sort',\n}\n\nexport type FeatureFieldProps<T, V> = {\n  label?: string;\n  required?: boolean;\n  roles?: UserRole[]; // Who can access field\n  permissions?: Partial<Record<FeatureFieldFeature, UserRole[]>>; // More specific\n\n  validator?: (val: V, field: FeatureField<T, V>) => string | null | undefined;\n  features?: Partial<Record<FeatureFieldFeature, boolean>>;\n  listColumnSize?: string;\n  allowEmptyFilter?: boolean;\n  defaultValue?: V;\n  path?: string[]; // path in value object\n};\n\nexport type FeatureFieldListProps<T extends any = any> = {\n  value: T;\n};\n\nexport type FeatureInputProps<T extends any = any> = {\n  value?: T;\n  label: string;\n  onChange: (val?: T) => void;\n  disabled?: boolean;\n  error?: string;\n  isLoading?: boolean;\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { observable } from 'mobx';\n\nexport interface FeatureReferenceProps {\n  all: FeatureReferenceFetchAll;\n  url: string;\n}\n\nexport type FeatureReferenceFetchAll = (props: {\n  feature: Feature;\n  url: string;\n  authorization: string;\n  name: string;\n}) => Promise<Record<any, any>>;\n\nexport class FeatureDataReference {\n  @observable isLoadingAll: boolean = false;\n  @observable all: Record<any, any> = {};\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { FeatureListRendererContainerProps } from '~/application/modules/pages/Feature/components/list/FeatureListRenderer';\n\nconst FeatureListContainer: FC<FeatureListRendererContainerProps> = ({\n  title: Title,\n  buttons: Buttons,\n  filters: Filters,\n  pagination: Pagination,\n  children,\n}) => (\n  <div className={classNames(styles.grid, 'feature-list__container-grid')}>\n    <div className={classNames(styles.head, 'feature-list__container-head')}>\n      <div className={classNames(styles.title, 'feature-list__title')}>\n        <Title />\n      </div>\n\n      <div className={classNames(styles.filters, 'feature-list__filters')}>\n        <Filters />\n      </div>\n\n      <div className={classNames(styles.buttons, 'feature-list__buttons')}>\n        <Buttons />\n      </div>\n    </div>\n\n    <div\n      className={classNames(styles.content, 'feature-list__container-content')}\n    >\n      {children}\n    </div>\n\n    <div\n      className={classNames(\n        styles.pagination,\n        'feature-list__container-pagination'\n      )}\n    >\n      <Pagination />\n    </div>\n  </div>\n);\n\nexport { FeatureListContainer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\n\nconst FeatureListWrapper: FC = ({ children }) => (\n  <div className={classNames(styles.wrap, 'feature-list__wrapper')}>\n    {children}\n  </div>\n);\n\nexport { FeatureListWrapper };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, Fragment, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { TablePagination } from '@material-ui/core';\nimport { useFeature } from '~/application/utils/hooks';\nimport { observer } from 'mobx-react';\n\ninterface IProps {}\n\nconst FeatureListPagination: FC<IProps> = observer(() => {\n  const { t } = useTranslation();\n  const feature = useFeature();\n  const { rows, page, count, rowsSelectOptions } = feature.filters;\n\n  const labelDisplayedRows = useCallback(\n    ({ from, to, count }: { from: number; to: number; count: number }) => {\n      const pageNum = page + 1;\n      const pageCount = Math.ceil(count / rows);\n\n      return t(\n        'messages:Page {{pageNum}} of {{pageCount}}, Results {{from}}-{{to}} of {{count}}',\n        {\n          pageNum,\n          pageCount,\n          from,\n          to,\n          count,\n        }\n      );\n    },\n    [page, count, rows]\n  );\n\n  const onRowsChange = useCallback(\n    (event) => {\n      feature.filters.rows = event.target.value;\n    },\n    [feature.filters]\n  );\n\n  const onPageChange = useCallback(\n    (_, val: number) => {\n      feature.filters.page = val;\n    },\n    [feature.filters]\n  );\n\n  if (count === 0) return <Fragment />;\n\n  return (\n    <div\n      className={classNames(\n        styles.pagination,\n        'feature-list__pagination_pagination'\n      )}\n    >\n      <TablePagination\n        rowsPerPageOptions={rowsSelectOptions}\n        component=\"div\"\n        count={count}\n        labelRowsPerPage={`${t('common:Per page')}:`}\n        rowsPerPage={rows}\n        page={page}\n        onChangePage={onPageChange}\n        onChangeRowsPerPage={onRowsChange}\n        labelDisplayedRows={labelDisplayedRows}\n      />\n    </div>\n  );\n});\n\nexport { FeatureListPagination };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { FeatureListRendererProps } from '~/application/modules/pages/Feature/components/list/FeatureListRenderer';\n\nconst FeatureListFooter: FeatureListRendererProps['footer'] = () => null;\n\nexport { FeatureListFooter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\n\nconst FeatureListHeader: FC = () => null;\n\nexport { FeatureListHeader };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { Button } from '@material-ui/core';\nimport { ImportExport, NoteAdd } from '@material-ui/icons';\n\nconst FeatureListButtons: FC = observer(() => {\n  const feature = useFeature();\n\n  const canBeCreated =\n    feature.features.create && feature.api.availableApiFeatures.create;\n\n  const canBeExported =\n    feature.features.export && feature.api.availableApiFeatures.export;\n\n  return (\n    <div className={classNames(styles.buttons, 'feature-list__buttons')}>\n      {canBeExported && (\n        <Button variant=\"outlined\" color=\"primary\">\n          <ImportExport />\n        </Button>\n      )}\n\n      {canBeCreated && (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"button\"\n          onClick={feature.goToCreate}\n        >\n          <NoteAdd />\n        </Button>\n      )}\n    </div>\n  );\n});\n\nexport { FeatureListButtons };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { FeatureListRendererProps } from '~/application/modules/pages/Feature/components/list/FeatureListRenderer';\n\nconst FeatureListFilters: FeatureListRendererProps['filters'] = observer(() => {\n  const feature = useFeature();\n\n  if (!feature.filters.fieldsList.length) return <Fragment />;\n\n  return (\n    <div className={classNames(styles.fitlers, 'feature-list__filters')}>\n      {feature.filters.Filters}\n    </div>\n  );\n});\n\nexport { FeatureListFilters };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, memo } from 'react';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport { TableCell, TableRow } from '@material-ui/core';\n\ninterface IProps {\n  rows: number;\n  cols: number;\n}\n\nconst FeatureListEmptyRows: FC<IProps> = memo(({ rows, cols }) => (\n  <>\n    {[...new Array(rows)].map((_, i) => (\n      <TableRow key={i}>\n        {[...new Array(cols)].map((_, j) => (\n          <TableCell key={j}>\n            <Placeholder />\n          </TableCell>\n        ))}\n      </TableRow>\n    ))}\n  </>\n));\n\nexport { FeatureListEmptyRows };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TableCell, TableRow } from '@material-ui/core';\nimport { useFeature } from '~/application/utils/hooks';\nimport { observer } from 'mobx-react';\nimport { useHistory } from 'react-router';\nimport classNames from 'classnames';\n\ninterface IProps {\n  values: Record<string, any>;\n}\n\nconst FeatureListRow: FC<IProps> = observer(({ values }) => {\n  const feature = useFeature();\n\n  const fields = feature.fieldsOfCurrentMode;\n\n  const history = useHistory();\n\n  const onClick = useCallback(() => {\n    const id = values.id || 0;\n\n    if (feature.api.availableApiFeatures.read) {\n      feature.goToRead(id);\n    } else if (feature.api.availableApiFeatures.update) {\n      feature.goToUpdate(id);\n    }\n  }, [feature.url, history, values]);\n\n  return (\n    <TableRow className=\"feature-list__field-value-row\" onClick={onClick} hover>\n      {fields.map((field) => (\n        <TableCell\n          key={field.name}\n          className={classNames(\n            'feature-list__field-value',\n            `feature-list__field-value_${field.name}`\n          )}\n        >\n          <field.List value={values[field.name]} />\n        </TableCell>\n      ))}\n    </TableRow>\n  );\n});\n\nexport { FeatureListRow };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { useFeature } from '~/application/utils/hooks';\n\nconst FeatureReadWrapper: FC = ({ children }) => {\n  const feature = useFeature();\n  const onSubmit = useCallback(\n    (event) => {\n      event.preventDefault();\n\n      if (!feature.isEditing) return;\n\n      feature.controller.submitItem();\n    },\n    [feature]\n  );\n\n  return (\n    <form\n      className={classNames(styles.wrap, 'feature-read__wrapper')}\n      onSubmit={onSubmit}\n    >\n      {children}\n    </form>\n  );\n};\n\nexport { FeatureReadWrapper };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { useFeature } from '~/application/utils/hooks';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { observer } from 'mobx-react';\nimport { FeatureReadContainerProps } from '~/application/modules/pages/Feature/components/read/FeatureReadRenderer';\n\nconst FeatureReadContainer: FC<FeatureReadContainerProps> = observer(\n  ({\n    title: Title,\n    buttons: Buttons,\n    breadcrumbs: Breadcrumbs,\n    submit: Submit,\n    children,\n  }) => {\n    const feature = useFeature();\n    const isHeaderShown = feature.mode !== FeatureMode.create;\n\n    return (\n      <div className={classNames(styles.wrap, 'feature-read__container-wrap')}>\n        <div\n          className={classNames(\n            styles.breadcrumbs,\n            'feature-read__breadcrumbs'\n          )}\n        >\n          <Breadcrumbs />\n        </div>\n\n        <div\n          className={classNames(styles.container, 'feature-read__container')}\n        >\n          {isHeaderShown && (\n            <div className={classNames(styles.header, 'feature-read__header')}>\n              <div className={classNames(styles.title, 'feature-read__title')}>\n                <Title />\n              </div>\n\n              <div\n                className={classNames(styles.buttons, 'feature-read__buttons')}\n              >\n                <Buttons />\n              </div>\n            </div>\n          )}\n\n          <div\n            className={classNames(\n              styles.content,\n              'feature-read__container-content'\n            )}\n          >\n            {children}\n          </div>\n\n          <div className={classNames(styles.submit)}>\n            <Submit />\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport { FeatureReadContainer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, Fragment } from 'react';\n\ninterface IProps {}\n\nconst FeatureReadFooter: FC<IProps> = () => <Fragment />;\n\nexport { FeatureReadFooter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, Fragment } from 'react';\n\ninterface IProps {}\n\nconst FeatureReadHeader: FC<IProps> = () => <Fragment />;\n\nexport { FeatureReadHeader };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { observer } from 'mobx-react';\nimport classNames from 'classnames';\nimport styles from './styles.module.scss';\nimport { Button } from '@material-ui/core';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { Delete, Edit } from '@material-ui/icons';\nimport { toJS } from 'mobx';\n\ninterface IProps {}\n\nconst FeatureReadButtons: FC<IProps> = observer(() => {\n  const feature = useFeature();\n\n  const canBeEdited =\n    feature.mode === FeatureMode.read &&\n    feature.api.availableApiFeatures.update;\n\n  const canBeDeleted =\n    feature.mode !== FeatureMode.create &&\n    feature.api.availableApiFeatures.delete;\n\n  const onDelete = useCallback(() => {\n    if (!window.confirm('Действительно хотите удалить?')) return;\n    feature.controller.delete();\n  }, [feature.controller]);\n\n  const onEdit = useCallback(() => {\n    feature.goToUpdate(feature.controller.getIdFromUrl());\n  }, [feature]);\n\n  return (\n    <div className={classNames(styles.buttons, 'feature-read__buttons')}>\n      {canBeDeleted && (\n        <Button\n          variant=\"outlined\"\n          color=\"secondary\"\n          startIcon={<Delete />}\n          type=\"button\"\n          onClick={onDelete}\n        >\n          Удалить\n        </Button>\n      )}\n\n      {canBeEdited && (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"submit\"\n          onClick={onEdit}\n          startIcon={<Edit />}\n        >\n          Изменить\n        </Button>\n      )}\n    </div>\n  );\n});\n\nexport { FeatureReadButtons };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useMemo } from 'react';\nimport { useFeature } from '~/application/utils/hooks';\nimport classNames from 'classnames';\nimport styles from './styles.module.scss';\nimport { observer } from 'mobx-react';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\n\ninterface IProps {}\n\nconst FeatureReadTitle: FC<IProps> = observer(() => {\n  const feature = useFeature();\n\n  const title = useMemo(() => feature.getItemTitle(feature.data.read), [\n    feature.data.read,\n  ]);\n\n  return (\n    <div className={classNames(styles.title, 'feature-read__title')}>\n      {feature.data.isLoading ? (\n        <h1>\n          <Placeholder />\n        </h1>\n      ) : (\n        title && <h1>{title}</h1>\n      )}\n    </div>\n  );\n});\n\nexport { FeatureReadTitle };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport { Breadcrumbs, Link } from '@material-ui/core';\nimport classNames from 'classnames';\nimport { useFeature } from '~/application/utils/hooks';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { useRouteMatch } from 'react-router';\n\ninterface IProps {}\n\nconst FeatureReadBreadcrumbs: FC<IProps> = observer(() => {\n  const feature = useFeature();\n\n  const title = useMemo(() => feature.getItemTitle(feature.data.read), [\n    feature.data.read,\n  ]);\n\n  const mode = useMemo(() => {\n    switch (feature.mode) {\n      case FeatureMode.update:\n        return 'Редактирование';\n      case FeatureMode.create:\n        return 'Создание';\n      default:\n        return null;\n    }\n  }, [feature.mode]);\n\n  const match = useRouteMatch<{ id: string }>();\n  const id = match.params.id;\n\n  return (\n    <Breadcrumbs\n      separator=\"›\"\n      aria-label=\"breadcrumb\"\n      className={classNames(styles.breadcrumbs, 'feature-read__breadcrumbs')}\n    >\n      <Link\n        to={feature.filters.queryString}\n        component={RouterLink}\n        className={styles.entity}\n      >\n        <b>{feature.title}</b>\n      </Link>\n\n      {feature.mode !== FeatureMode.create && (\n        <Placeholder width=\"120px\" isLoading={feature.data.isLoading}>\n          <div className={styles.current}>\n            {!!mode ? (\n              <Link to={`${feature.url}/${id}`} component={RouterLink}>\n                {title}\n              </Link>\n            ) : (\n              title\n            )}\n          </div>\n        </Placeholder>\n      )}\n\n      {!!mode && <div className={styles.mode}>{mode}</div>}\n    </Breadcrumbs>\n  );\n});\n\nexport { FeatureReadBreadcrumbs };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { createElement, FC, useCallback, useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport { useFeature } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { FeatureReadField } from '~/application/modules/pages/Feature/components/read/FeatureReadField';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { has, hasPath } from 'ramda';\n\ninterface IProps {\n  onlyFields?: string[];\n}\n\nconst FeatureReadContent: FC<IProps> = observer(({ onlyFields }) => {\n  const feature = useFeature();\n\n  const fields = useMemo(() => {\n    return onlyFields\n      ? feature.fieldsOfCurrentMode.filter((field) =>\n          onlyFields.includes(field.name)\n        )\n      : feature.fieldsOfCurrentMode;\n  }, [feature.fieldsOfCurrentMode, onlyFields]);\n\n  const values = useMemo(() => feature.data.read, [feature.data.read]);\n\n  const component = useCallback(\n    (field: FeatureField) => {\n      switch (feature.mode) {\n        case FeatureMode.create:\n          return field.Create;\n        case FeatureMode.update:\n          return field.Update;\n        default:\n          return field.Read;\n      }\n    },\n    [feature.mode]\n  );\n\n  const isEditing =\n    feature.mode === FeatureMode.create || feature.mode === FeatureMode.update;\n\n  return (\n    <div className={classNames(styles.content, 'feature-read__content')}>\n      {fields.map((field) => (\n        <FeatureReadField\n          label={field.label}\n          key={field.key}\n          hideLabel={isEditing}\n          disabled={\n            feature.mode === FeatureMode.read &&\n            !hasPath(field.fieldPath, values)\n          }\n        >\n          {component(field)}\n        </FeatureReadField>\n      ))}\n    </div>\n  );\n});\n\nexport { FeatureReadContent };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\n\ninterface IProps {\n  label: string;\n  hideLabel?: boolean;\n  disabled?: boolean;\n}\n\nconst FeatureReadField: FC<IProps> = ({\n  label,\n  disabled,\n  hideLabel,\n  children,\n}) => (\n  <div className={classNames(styles.field, 'feature-read__field')}>\n    {!hideLabel && (\n      <div className={classNames(styles.label, 'feature-read__field-label')}>\n        {label}\n      </div>\n    )}\n\n    <Placeholder width=\"56px\" isLoading={disabled}>\n      <div className={classNames(styles.value, 'feature-read__field-value')}>\n        {children}\n      </div>\n    </Placeholder>\n  </div>\n);\n\nexport { FeatureReadField };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, Fragment, useCallback } from 'react';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { Button } from '@material-ui/core';\nimport { useFeature } from '~/application/utils/hooks';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { useHistory } from 'react-router';\n\ninterface IProps {}\n\nconst FeatureReadSubmit: FC<IProps> = observer(() => {\n  const feature = useFeature();\n\n  if (!feature.isEditing) return <Fragment />;\n\n  return (\n    <div className={classNames(styles.submit, 'feature-read__submit')}>\n      <Button\n        variant=\"outlined\"\n        color=\"default\"\n        onClick={feature.cancelEditing}\n        type=\"button\"\n      >\n        Отмена\n      </Button>\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        type=\"submit\"\n        disabled={feature.data.isLoading}\n      >\n        {feature.mode === FeatureMode.create ? 'Создать' : 'Сохранить'}\n      </Button>\n    </div>\n  );\n});\n\nexport { FeatureReadSubmit };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { action, computed, extendObservable, observable, toJS } from 'mobx';\nimport { FeatureDataReference } from '~/application/modules/pages/Feature/types/reference';\nimport { FeatureApiReferences } from '~/application/modules/pages/Feature/types';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { assocPath, lensPath, pickBy, view } from 'ramda';\n\nexport class FeatureData<\n  Fields extends Record<string, any> = Record<string, any>\n> {\n  constructor(private feature: Feature<Fields>) {}\n\n  /**\n   * FeatureApi's references dictionary (see this.createReferenceData)\n   */\n  @observable references: Partial<\n    Record<keyof Fields, FeatureDataReference>\n  > = {};\n\n  @observable isLoading: boolean = true;\n\n  /**\n   * Values for list\n   */\n  @observable list: Fields[] = [];\n\n  /**\n   * Values for single item display\n   */\n  @observable read: Partial<Record<keyof Fields, Fields[keyof Fields]>> = {};\n\n  /**\n   * Current editor values, copied from read before create/update form appears\n   */\n  @observable editor: Partial<Record<keyof Fields, Fields[keyof Fields]>> = {};\n\n  /**\n   * Validation error dictionary\n   */\n  @observable errors: Partial<Record<keyof Fields, string>> = {};\n\n  /**\n   * Creates editor[fieldname] reference instance for refs from FeatureApi\n   * @param refs\n   */\n  @action\n  createReferenceData(refs: FeatureApiReferences<Fields> = {}) {\n    // fills this.references with fields from Feature\n    Object.keys(refs).forEach((ref) => {\n      extendObservable(this.references, {\n        [ref]: observable(new FeatureDataReference()),\n      });\n    });\n  }\n\n  @action\n  clearReadData() {\n    this.read = {};\n  }\n\n  @action\n  clearEditorData() {\n    this.editor = {};\n  }\n\n  /**\n   * Sets editor data from current item data, fetched from backend\n   */\n  @action\n  copyReadToEditor() {\n    this.isLoading = true;\n    this.editor = Object.assign(this.editor, this.read);\n    this.isLoading = false;\n  }\n\n  @action\n  clearErrors() {\n    this.errors = {};\n  }\n\n  @action\n  clearError(field: keyof Fields) {\n    this.errors = {\n      ...this.errors,\n      [field]: undefined,\n    };\n  }\n\n  /**\n   * Data fields, only for current mode (update/create), based on field and feature\n   * roles and permissions\n   */\n  @computed\n  get editorDataForCurrentMode() {\n    return this.feature.fieldsOfCurrentMode.reduce((acc, field) => {\n      return assocPath(\n        // changes value in acc by field.fieldPath\n        field.fieldPath,\n        view(lensPath(field.fieldPath), this.editor) // get value in editor by field.fieldPath\n      )(acc) as Fields;\n    }, {} as Fields);\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport { FormControl, TextField } from '@material-ui/core';\nimport { FeatureFilterComponentProps } from '~/application/modules/pages/Feature/types/filters';\nimport styles from './styles.module.scss';\nimport { FilterWrapper } from '~/application/modules/pages/Feature/components/filters/FilterWrapper';\nimport { DatePicker, DateRangePicker } from '@material-ui/pickers';\nimport { formatRFC3339, isDate, isValid, parseISO } from 'date-fns';\n\ntype IProps = FeatureFilterComponentProps & { isRange: boolean };\n\nconst DateFilter: FC<IProps> = ({\n  label,\n  name,\n  value: initialValue,\n  isRange,\n  onChange,\n  onReset,\n  inline,\n}) => {\n  const [value, setValue] = useState(initialValue);\n\n  const onRangeChange = useCallback(\n    ([start, end]: [any, any]) => {\n      if (!start || !end || !isValid(start) || !isValid(end)) return;\n\n      const val = [start, end].map((it) => formatRFC3339(it)).join(',');\n\n      onChange(val);\n    },\n    [onChange]\n  );\n\n  const onSingleChange = useCallback(\n    (val: any) => {\n      if (!val || !isValid(val)) return;\n\n      onChange(formatRFC3339(val));\n    },\n    [onChange]\n  );\n\n  const rangeValue = useMemo<[any, any]>(() => {\n    if (!value || !isRange || typeof value !== 'string') return [null, null];\n\n    const [start, end] = value.split(',').map((it: string) => parseISO(it));\n\n    if (!isDate(start) || !isDate(end)) return [null, null];\n\n    return [start, end];\n  }, [value, isRange]);\n\n  const singleValue = useMemo<any>(() => {\n    if (isDate(value)) return value;\n\n    const parsed = value && parseISO(value);\n\n    if (!isDate(parsed)) return null;\n\n    return parsed;\n  }, [value]);\n\n  useEffect(() => {\n    if (initialValue !== value) {\n      setValue(initialValue);\n    }\n  }, [initialValue]);\n\n  return (\n    <FilterWrapper onClear={onReset} inline={inline}>\n      <div className={styles.datepicker}>\n        <FormControl className={styles.control}>\n          {isRange && (\n            <DateRangePicker\n              mask=\"dd.MM.yyyy\"\n              label={label}\n              renderInput={(startProps, endProps) => (\n                <>\n                  <TextField\n                    {...startProps}\n                    label={label}\n                    helperText=\"\"\n                    variant=\"filled\"\n                    size=\"small\"\n                  />\n\n                  <TextField\n                    {...endProps}\n                    variant=\"filled\"\n                    size=\"small\"\n                    helperText=\"\"\n                    label=\"\"\n                    placeholder=\"\"\n                  />\n                </>\n              )}\n              value={rangeValue}\n              onChange={onRangeChange}\n            />\n          )}\n\n          {!isRange && (\n            <DatePicker\n              mask=\"__.__.____\"\n              renderInput={(props) => (\n                <TextField\n                  variant=\"outlined\"\n                  {...props}\n                  label={label}\n                  helperText=\"\"\n                  placeholder=\"\"\n                />\n              )}\n              value={singleValue}\n              onChange={onSingleChange}\n            />\n          )}\n        </FormControl>\n      </div>\n    </FilterWrapper>\n  );\n};\n\nexport { DateFilter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { FeatureFilterComponentProps } from '~/application/modules/pages/Feature/types/filters';\nimport { FilterWrapper } from '~/application/modules/pages/Feature/components/filters/FilterWrapper';\nimport { SelectInput } from '~/application/modules/pages/Feature/components/inputs/SelectInput';\nimport { observer } from 'mobx-react';\n\ntype IProps = FeatureFilterComponentProps & {\n  variants: Record<any, any>;\n  autocomplete: boolean;\n};\n\nconst SelectFilter: FC<IProps> = observer(\n  ({\n    label,\n    variants,\n    inline,\n    autocomplete,\n    onChange,\n    onReset,\n    disabled,\n    value,\n  }) => (\n    <FilterWrapper onClear={onReset} inline={inline}>\n      <SelectInput\n        label={label}\n        onChange={onChange}\n        variants={variants}\n        autocomplete={autocomplete}\n        disabled={disabled}\n        value={value}\n      />\n    </FilterWrapper>\n  )\n);\n\nexport { SelectFilter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { FeatureFilterComponentProps } from '~/application/modules/pages/Feature/types/filters';\nimport styles from './styles.module.scss';\nimport { FilterWrapper } from '~/application/modules/pages/Feature/components/filters/FilterWrapper';\nimport { StringInput } from '~/application/modules/pages/Feature/components/inputs/StringInput';\n\nconst StringFilter: FC<FeatureFilterComponentProps> = ({\n  label,\n  name,\n  value,\n  onChange,\n  onReset,\n  inline,\n}) => {\n  return (\n    <FilterWrapper onClear={onReset} inline={inline}>\n      <div className={styles.input}>\n        <StringInput\n          label={inline ? '' : label}\n          onChange={onChange}\n          value={value}\n        />\n      </div>\n    </FilterWrapper>\n  );\n};\n\nexport { StringFilter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { computed, observable } from 'mobx';\nimport { format, parseISO } from 'date-fns/esm';\nimport { DateFilter } from '~/application/modules/pages/Feature/filters/DateFilter';\nimport { DateInput } from '~/application/modules/pages/Feature/components/inputs/DateInput';\nimport { observer } from 'mobx-react';\n\nexport type DateFieldParser = (val: string) => Date;\nexport type DateFieldFormatter = (val: Date) => string;\n\nexport type DateFieldOptions<T> = FeatureField<T, string>['options'] & {\n  parser?: DateFieldParser;\n  formatter?: DateFieldFormatter;\n  format?: string;\n  filterExact?: boolean;\n};\n\nexport class DateField<\n  T extends Record<string, any> = Record<string, any>\n> extends FeatureField<T, string> {\n  constructor(\n    public name: FeatureField['name'],\n    public options: DateFieldOptions<T> = {}\n  ) {\n    super(name, options);\n\n    const { parser, format: dateFormat, formatter, filterExact } = options;\n\n    if (parser) this.parser = parser;\n    if (dateFormat) this.dateFormat = dateFormat;\n    if (formatter) this.formatter = formatter;\n    if (filterExact) this.filterExact = filterExact;\n  }\n\n  @observable filterExact = false;\n  @observable dateFormat = 'dd.MM.yyyy';\n  @observable parser: DateFieldParser = (val: string) => parseISO(val);\n  @observable formatter: DateFieldFormatter = (val: Date) => {\n    return format(val, this.dateFormat);\n  };\n\n  formatValue(val: string): string {\n    const date = this.parser(val);\n    return this.formatter(date);\n  }\n\n  asString(val: string) {\n    return this.formatValue(val);\n  }\n\n  @computed\n  get List(): FeatureField['List'] {\n    return ({ value }) => (\n      <div>{(!!value && this.formatValue(value)) || ''}</div>\n    );\n  }\n\n  @computed\n  get Update() {\n    return (\n      <DateInput\n        value={this.editValue}\n        label={this.label}\n        onChange={this.onChange}\n        error={this.editError}\n        isLoading={this.feature?.data.isLoading}\n      />\n    );\n  }\n\n  @observable\n  Filter: FeatureField['Filter'] = observer(\n    ({ inline }: { inline?: boolean }) => (\n      <DateFilter\n        label={this.label}\n        name={this.name}\n        value={this.filterValue}\n        onChange={this.onFilterChange}\n        onReset={this.onFilterReset}\n        isRange={!this.filterExact}\n        inline={inline}\n      />\n    )\n  );\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport { TextField } from '@material-ui/core';\nimport { DatePicker } from '@material-ui/pickers';\nimport { formatRFC3339, isDate, parseISO } from 'date-fns';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { FeatureInputProps } from '~/application/modules/pages/Feature/types/field';\n\ntype IProps = FeatureInputProps;\n\nconst DateInput: FC<IProps> = observer(\n  ({ isLoading = false, value, label, error, onChange }) => {\n    const parsedValue = useMemo<any>(() => {\n      if (isDate(value)) return value as Date;\n\n      const parsed = value && parseISO(value);\n\n      if (!isDate(parsed)) return null;\n\n      return parsed;\n    }, [value]);\n\n    const handler = useCallback(\n      (val: any) => {\n        if (!val || !handler || !isDate(val)) return;\n\n        onChange(formatRFC3339(val));\n      },\n      [onChange]\n    );\n\n    return (\n      <Placeholder isLoading={isLoading} width=\"100%\" height=\"48px\">\n        <DatePicker\n          mask=\"__.__.____\"\n          renderInput={(props) => (\n            <TextField\n              size=\"small\"\n              variant=\"filled\"\n              {...props}\n              label={label}\n              error={!!error}\n              helperText={error}\n              placeholder=\"\"\n              fullWidth\n              className={classNames(\n                styles.input,\n                'feature-read__input feature-read__input_date'\n              )}\n            />\n          )}\n          value={parsedValue}\n          onChange={handler}\n        />\n      </Placeholder>\n    );\n  }\n);\n\nexport { DateInput };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport {\n  SelectField,\n  SelectFieldOptions,\n} from '~/application/modules/pages/Feature/fields/SelectField';\nimport { action, computed, observable, reaction } from 'mobx';\nimport { Placeholder } from '~/application/modules/pages/Feature/components/common/Placeholder';\nimport { observer } from 'mobx-react';\nimport { SelectInput } from '~/application/modules/pages/Feature/components/inputs/SelectInput';\n\nexport type ReferenceFieldOptions<\n  T,\n  V extends string | number = string\n> = SelectFieldOptions<T, V> & {\n  dependencies?: Array<string>;\n};\n\nexport class ReferenceField<\n  T extends Record<string, any> = Record<string, any>,\n  V extends string | number = string\n> extends SelectField<T, V> {\n  constructor(\n    public name: string,\n    public options: ReferenceFieldOptions<T, V>\n  ) {\n    super(name, options);\n\n    if (options.dependencies) {\n      this.options.dependencies?.map((field) =>\n        reaction(\n          () => this.feature?.data.editor[field],\n          this.updateRefs.bind(this)\n        )\n      );\n    }\n  }\n\n  @observable autocomplete = true;\n\n  @computed\n  get isLoading() {\n    return this.feature?.data.references[this.name]?.isLoadingAll || false;\n  }\n\n  @computed\n  get listVariants() {\n    return this.feature?.data.references[this.name]?.all || {};\n  }\n\n  @computed\n  get List() {\n    return observer(({ value }: { value: any }) => (\n      <Placeholder isLoading={this.isLoading}>\n        <div>{this.formatValue(value)}</div>\n      </Placeholder>\n    ));\n  }\n\n  @computed\n  get Update() {\n    return (\n      <SelectInput\n        label={this.label}\n        onChange={this.onChange}\n        variants={this.filterVariants}\n        value={this.editValue}\n        autocomplete={this.autocomplete}\n        isLoadingReference={this.isLoading}\n        isLoading={this.feature?.data.isLoading}\n        error={this.editError}\n        disabled={this.disabledByDependencies}\n      />\n    );\n  }\n\n  @computed\n  get disabledByDependencies() {\n    return this.options.dependencies?.some(\n      (field) => !this.feature?.data.editor[field]\n    );\n  }\n\n  @action\n  updateRefs() {\n    if (!this.options.dependencies || !this.feature?.api) return;\n    this.feature.api.getReference(this.name);\n  }\n\n  @computed\n  get dependencyValues() {\n    return this.options.dependencies?.map(\n      (field) => this.feature?.data.editor[field]\n    );\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, createElement, useMemo } from 'react';\nimport { getEntityFieldRenderer } from '~/application';\nimport { IEntityFieldProps } from '~/application/types';\nimport { observer } from 'mobx-react';\n\ninterface IProps extends IEntityFieldProps {}\n\nconst EntityField: FC<IProps> = observer(\n  ({\n    name,\n    fields,\n    data = {},\n    error = '',\n    isEditing,\n    isFiltering,\n    handler,\n    entity,\n    withToken = (cb, args) => cb(args),\n  }) => {\n    const field = useMemo(() => fields.find((field) => field.name === name), [\n      fields,\n      name,\n    ]);\n\n    if (!field) {\n      return <div />;\n    }\n\n    return createElement(\n      field.component\n        ? field.component\n        : getEntityFieldRenderer(field.type || typeof data[field.name]),\n      {\n        value: Object.prototype.hasOwnProperty.call(data, field.name)\n          ? data[field.name]\n          : null,\n        label: `${field.label || field.name}${\n          field.required && isEditing ? ' *' : ''\n        }`,\n        name,\n        error,\n        isEditing,\n        isFiltering,\n        handler,\n        entity,\n        options: field.options || {},\n        data, // for custom fields\n        fields, // for custom fields\n        withToken, // for custom fields\n        placeholder: field.placeholder,\n        mask: field.mask,\n      } as IEntityFieldProps\n    );\n  }\n);\n\nexport { EntityField };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport { useConfig } from '~/application/utils/hooks';\nimport { Link } from 'react-router-dom';\n\ninterface IProps {}\n\nconst AuthVerticalLayout: FC<IProps> = observer(({ children }) => {\n  const config = useConfig();\n  const splash = config.auth?.splash || '';\n\n  return (\n    <div className={styles.layout}>\n      <div className={styles.left}>\n        <div className={styles.left__wrap}>\n          <div className={styles.logo}>\n            <Link to=\"/\">\n              <img src={config.logo} alt={config.title} />\n            </Link>\n          </div>\n\n          <div className={styles.form}>\n            <div className={styles.content}>{children}</div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        className={styles.image}\n        style={{ backgroundImage: `url('${splash}')` }}\n      />\n    </div>\n  );\n});\n\nexport { AuthVerticalLayout };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureGetListResult } from '~/application/modules/pages/Feature/types';\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\n\nexport function* controllerGetList<T extends Record<string, any>>(\n  controller: FeatureController<T>\n) {\n  const { feature } = controller;\n\n  try {\n    feature.data.isLoading = true;\n\n    const result: FeatureGetListResult<T> = yield feature.api.list(feature);\n\n    feature.data.list = result.data;\n    feature.filters.count = result.count;\n\n    controller.feature.data.isLoading = false;\n\n    // TODO: make controllerGetReferencesList to fetch values based on actual data\n    yield feature.api.getReferencesAll();\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\nimport { FeatureGetReadResult } from '~/application/modules/pages/Feature/types';\n\nexport function* controllerGetRead<T extends Record<string, any>>(\n  controller: FeatureController<T>\n) {\n  const { feature } = controller;\n  const id = controller.getIdFromUrl();\n\n  try {\n    feature.data.read = {};\n    feature.data.isLoading = true;\n\n    const result: FeatureGetReadResult<T> = yield feature.api.read(id);\n\n    feature.data.read = result.data;\n    feature.data.isLoading = false;\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\n\nexport function* controllerGetReferences<T extends Record<string, any>>(\n  controller: FeatureController<T>\n) {\n  const { feature } = controller;\n\n  try {\n    feature.data.read = {};\n    yield feature.api.getReferencesAll();\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\nimport { FeaturePostCreateResult } from '~/application/modules/pages/Feature/types';\nimport { toJS } from 'mobx';\n\nexport function* controllerPostCreate<\n  T extends Record<string, any> = Record<string, any>\n>(controller: FeatureController<T>) {\n  const { feature } = controller;\n\n  try {\n    feature.data.isLoading = true;\n\n    const {\n      data,\n      errors,\n    }: FeaturePostCreateResult<T> = yield feature.api.create(\n      toJS(feature.data.editorDataForCurrentMode)\n    );\n\n    if (errors) {\n      feature.data.errors = errors;\n      return;\n    }\n\n    feature.data.isLoading = false;\n\n    if (typeof feature.getItemId(data) !== 'undefined') {\n      feature.goToRead(feature.getItemId(data));\n    } else {\n      feature.goToList();\n    }\n\n    feature.data.clearEditorData();\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\nimport { FeaturePostUpdateResult } from '~/application/modules/pages/Feature/types';\nimport { toJS } from 'mobx';\n\nexport function* controllerPostUpdate<\n  T extends Record<string, any> = Record<string, any>\n>(controller: FeatureController<T>) {\n  const { feature } = controller;\n\n  try {\n    feature.data.isLoading = true;\n    const id = controller.getIdFromUrl();\n\n    const {\n      data,\n      errors,\n    }: FeaturePostUpdateResult<T> = yield feature.api.update(\n      id,\n      toJS(feature.data.editorDataForCurrentMode)\n    );\n\n    if (errors) {\n      feature.data.errors = errors;\n      return;\n    }\n\n    feature.data.isLoading = false;\n\n    if (typeof feature.getItemId(data) !== 'undefined') {\n      feature.goToRead(feature.getItemId(data));\n    } else {\n      feature.goToList();\n    }\n\n    feature.data.clearEditorData();\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\n\nexport function* controllerDelete<T extends Record<string, any>>(\n  controller: FeatureController<T>\n) {\n  try {\n    controller.feature.data.isLoading = true;\n    const id = controller.getIdFromUrl();\n    yield controller.feature.api.delete(id);\n    controller.feature.data.isLoading = false;\n    controller.feature.goToList();\n  } catch (e) {\n    controller.feature.data.isLoading = false;\n    controller.feature.parent?.notifications.showError(e.toString());\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { action, extendObservable, flow, observable } from 'mobx';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { controllerGetList } from '~/application/modules/pages/Feature/items/FeatureController/list';\nimport { FeatureMode } from '~/application/modules/pages/Feature/types';\nimport { controllerGetRead } from '~/application/modules/pages/Feature/items/FeatureController/read';\nimport { controllerGetReferences } from '~/application/modules/pages/Feature/items/FeatureController/references';\nimport { controllerPostCreate } from '~/application/modules/pages/Feature/items/FeatureController/create';\nimport { controllerPostUpdate } from '~/application/modules/pages/Feature/items/FeatureController/update';\nimport { controllerDelete } from '~/application/modules/pages/Feature/items/FeatureController/delete';\nimport { controllerSeedData } from '~/application/modules/pages/Feature/items/FeatureController/seed';\n\nexport class FeatureController<\n  T extends Record<string, any> = Record<string, any>\n> {\n  constructor(public feature: Feature<T>) {\n    extendObservable(this, { feature });\n  }\n\n  /**\n   * Map for all currently running async fetchers, that can be cancelled by\n   * calling item.cancel() or this.cancelAll()\n   */\n  @observable\n  instances: Record<string, CancellablePromise<any>> = {};\n\n  /**\n   * Loads list of items\n   */\n  @action\n  beforeListMode = () => {\n    this.cancelAll();\n    this.instances.listLoader = flow(controllerGetList)(this);\n  };\n\n  /**\n   * Loads data of currently viewing item\n   */\n  @action\n  beforeReadMode = () => {\n    this.cancelAll();\n    this.instances.read = flow(controllerGetRead)(this);\n    this.instances.read = flow(controllerGetReferences)(this);\n  };\n\n  /**\n   * Loads data of currently editing item\n   */\n  @action\n  beforeUpdateMode = () => {\n    this.cancelAll();\n    this.feature.data.clearErrors();\n\n    this.instances.update = flow(controllerGetRead)(this);\n    this.instances.update.then(() => this.feature.data.copyReadToEditor());\n\n    this.instances.update = flow(controllerGetReferences)(this);\n  };\n\n  /**\n   * Clears current data and loading references on create form\n   */\n  @action\n  beforeCreateMode = async () => {\n    this.cancelAll();\n\n    this.feature.data.clearReadData();\n    this.feature.data.clearEditorData();\n    this.feature.data.clearErrors();\n\n    this.feature.data.isLoading = false;\n\n    this.seedData();\n\n    this.instances.create = flow(controllerGetReferences)(this);\n\n    await this.instances.create;\n  };\n\n  /**\n   * Deletes current item\n   */\n  @action\n  delete = () => {\n    flow(controllerDelete)(this);\n  };\n\n  /**\n   * Cancels all currently loading functions\n   */\n  cancelAll = () => {\n    Object.values(this.instances).forEach((instance) => {\n      if (instance.cancel) instance.cancel();\n    });\n  };\n\n  /**\n   * Returns id of currently editing / viewing item\n   */\n  getIdFromUrl = () => {\n    const re = new RegExp(\n      `${this.feature.url.replace(/\\//gim, '\\\\/')}\\\\\\/([^/]+)`\n    );\n\n    const match = window.location.pathname.match(re);\n\n    return parseInt(match && match.length > 0 ? match[1] : '', 10);\n  };\n\n  /**\n   * Called on action (list, read, update, create) change\n   */\n  @action\n  onActionChange = () => {\n    this.cancelAll();\n\n    switch (this.feature.mode) {\n      case FeatureMode.read:\n        return this.beforeReadMode();\n      case FeatureMode.list:\n        return this.beforeListMode();\n      case FeatureMode.update:\n        return this.beforeUpdateMode();\n      case FeatureMode.create:\n        return this.beforeCreateMode();\n      default:\n        return;\n    }\n  };\n\n  /**\n   * Called on submit of editor / creator. Handles validation and launching submitting function for each mode\n   */\n  @action\n  submitItem = () => {\n    if (this.feature.data.isLoading) return;\n\n    this.cancelAll();\n\n    const validation = this.validateFields();\n\n    if (validation) {\n      this.feature.data.errors = validation;\n      this.feature.parent?.notifications.showError('Проверьте все поля');\n      return;\n    }\n\n    switch (this.feature.mode) {\n      case FeatureMode.create:\n        this.instances.create = flow(controllerPostCreate)(this);\n        break;\n      case FeatureMode.update:\n        this.instances.create = flow(controllerPostUpdate)(this);\n        break;\n    }\n  };\n\n  /**\n   * Returns list of validation errors for currently visible fields\n   */\n  validateFields = (): Partial<Record<keyof T, string>> | undefined => {\n    const fields = this.feature.fieldsOfCurrentMode\n      .filter((field) => field.validator)\n      .reduce((acc, field) => {\n        if (!field.validator) return acc;\n\n        const error = field.validator(field.editValue, field);\n\n        if (!error) return acc;\n\n        return { ...acc, [field.name]: error };\n      }, {});\n\n    return Object.keys(fields).length > 0 ? fields : undefined;\n  };\n\n  seedData() {\n    controllerSeedData(this);\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController/index';\nimport { assocPath, hasPath } from 'ramda';\n\n/**\n * Fills features' editor data with default values\n */\nexport function controllerSeedData<T extends Record<string, any>>(\n  controller: FeatureController<T>\n) {\n  const initialData = controller.feature.fieldsOfCurrentMode.reduce(\n    (acc, field) => {\n      // Set default value\n      if (typeof field.defaultValue !== 'undefined')\n        return <T>assocPath(field.fieldPath, field.defaultValue)(acc);\n\n      const path = field.fieldPath.slice(0, field.fieldPath.length - 1);\n\n      // Reacreate empty path structure\n      if (field.fieldPath.length > 1 && !hasPath(path, acc))\n        return <T>assocPath(path, {})(acc);\n\n      // Don't change anything\n      return acc;\n    },\n    {} as T\n  );\n\n  controller.feature.data.editor = initialData;\n}\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, Fragment } from 'react';\nimport { observer } from 'mobx-react';\nimport { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport { Route, Router, Switch } from 'react-router-dom';\nimport { useConfig } from '~/application/utils/hooks';\n\nconst AuthRouter: FC = observer(() => {\n  const config = useConfig();\n  const auth = config.auth;\n\n  if (!auth) return <Fragment />;\n\n  return (\n    <ThemeProvider theme={config.themeInstance}>\n      <CssBaseline />\n\n      <Router history={config.history}>\n        <auth.layout>\n          <Switch>\n            <Route path=\"/signup\" component={auth.signUp} />\n            <Route path=\"/restore\" component={auth.forgotPassword} />\n            <Route path=\"/reset/:token\" component={auth.resetPassword} />\n            <auth.signIn />\n          </Switch>\n        </auth.layout>\n      </Router>\n\n      <config.notifications.Output />\n    </ThemeProvider>\n  );\n});\n\nexport { AuthRouter };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, FormEvent, useCallback, useMemo, useState } from 'react';\nimport { Button, InputAdornment, TextField } from '@material-ui/core';\n\nimport { useConfig } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport { Link } from 'react-router-dom';\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\nconst SignIn: FC = () => {\n  const config = useConfig();\n  const {t} = useTranslation();\n  const auth = config.auth;\n\n  const onForgotPassword = useMemo(\n    () =>\n      config.auth?.authPasswRestoreFn\n        ? () => {\n          config.history.push('/restore');\n        }\n        : undefined,\n    [config.history, config.auth, config.auth?.authPasswRestoreFn]\n  );\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n      auth!!.sendAuthRequest(email, password);\n    },\n    [email, password, auth]\n  );\n\n  const onEmailChange = useCallback((event) => setEmail(event.target.value), [\n    setEmail,\n  ]);\n\n  const onPasswordChange = useCallback(\n    (event) => setPassword(event.target.value),\n    [setPassword]\n  );\n\n  const loginLabel = useMemo(() => config.auth?.loginLabel || t('Login'), [config.auth, t]);\n\n  return (\n    <div className={styles.wrap}>\n      <Helmet>\n        <title>{t('Sign In')}</title>\n      </Helmet>\n\n      <h3 className={styles.header}>{t('Sign In')}</h3>\n\n      <form noValidate onSubmit={onSubmitCapture}>\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"email\"\n          label={loginLabel}\n          name=\"email\"\n          autoComplete=\"email\"\n          defaultValue={email}\n          onChange={onEmailChange}\n          autoFocus\n        />\n\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          name=\"password\"\n          label={t('Password')}\n          type=\"password\"\n          id=\"password\"\n          defaultValue={password}\n          onChange={onPasswordChange}\n          autoComplete=\"current-password\"\n          InputProps={{\n            endAdornment: onForgotPassword ? (\n              <InputAdornment\n                position=\"end\"\n                onClick={onForgotPassword}\n                className={styles.forgot}\n              >\n                {t('Forgot password?')}\n              </InputAdornment>\n            ) : null,\n          }}\n        />\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={!email.length || !password.length}\n          className={styles.button}\n        >\n          {t('Log In')}\n        </Button>\n\n        {!!auth?.authSignupFn && (\n          <Button\n            type=\"button\"\n            fullWidth\n            variant=\"outlined\"\n            color=\"primary\"\n            className={styles.button}\n            component={Link}\n            to=\"/signup\"\n          >\n            {t('Sign Up')}\n          </Button>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport { SignIn };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, FormEvent, useCallback, useState } from 'react';\nimport { Button, TextField } from '@material-ui/core';\nimport { useConfig } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport { Link } from 'react-router-dom';\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\nconst ForgotPassword: FC = () => {\n  const [email, setEmail] = useState('');\n  const config = useConfig();\n  const {t} = useTranslation();\n\n  const onEmailChange = useCallback(\n    (event) => {\n      setEmail(event.target.value);\n    },\n    [setEmail]\n  );\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n\n      if (!config?.auth?.sendAuthPasswRestore) return;\n\n      config.auth.sendAuthPasswRestore(email);\n    },\n    [config, email]\n  );\n\n  return (\n    <div className={styles.wrap}>\n      <Helmet>\n        <title>{t('Password recovery')}</title>\n      </Helmet>\n\n      <h3 className={styles.header}>{t('Password recovery')}</h3>\n\n      <form noValidate onSubmit={onSubmitCapture}>\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"email\"\n          label={t('Email')}\n          name=\"email\"\n          autoComplete=\"email\"\n          defaultValue={email}\n          onChange={onEmailChange}\n          autoFocus\n        />\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={!email.length}\n          className={styles.button}\n        >\n          {t('Restore')}\n        </Button>\n\n        <Button\n          type=\"button\"\n          component={Link}\n          to=\"/\"\n          variant=\"text\"\n          fullWidth\n          className={styles.cancel}\n        >\n          {t('buttons:Cancel')}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport { ForgotPassword };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, FormEvent, useCallback, useState } from 'react';\nimport { Button, TextField } from '@material-ui/core';\n\nimport { useRouteMatch } from 'react-router';\nimport { useConfig } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport { Link } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\nconst ResetPassword: FC = () => {\n  const [password, setPassword] = useState('');\n  const [passwordRepeat, setPasswordRepeat] = useState('');\n  const matches = useRouteMatch<{ token: string }>();\n  const config = useConfig();\n  const {t} = useTranslation();\n\n  const onPasswordChange = useCallback(\n    (event) => {\n      setPassword(event.target.value);\n    },\n    [setPassword]\n  );\n\n  const onPasswordRepeatChange = useCallback(\n    (event) => {\n      setPasswordRepeat(event.target.value);\n    },\n    [setPasswordRepeat]\n  );\n\n  const onSubmitCapture = useCallback(\n    (event: FormEvent) => {\n      event.preventDefault();\n\n      const token = matches.params.token;\n\n      if (!config?.auth?.sendAuthPasswUpdate) return;\n\n      if (password !== passwordRepeat) {\n        config.notifications.showError(\"Passwords doesn't match\");\n        return;\n      }\n\n      config.auth.sendAuthPasswUpdate(token, password);\n    },\n    [matches.params.token, config, password, passwordRepeat]\n  );\n\n  return (\n    <div className={styles.wrap}>\n      <Helmet>\n        <title>{t('Password recovery')}</title>\n      </Helmet>\n\n      <h3 className={styles.header}>{t('Enter a new password')}</h3>\n\n      <form noValidate onSubmit={onSubmitCapture}>\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"password\"\n          label={t('Password')}\n          name=\"password\"\n          defaultValue={password}\n          onChange={onPasswordChange}\n          autoFocus\n        />\n\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"password\"\n          label={t('Password repeat')}\n          name=\"passwordRepeat\"\n          defaultValue={passwordRepeat}\n          onChange={onPasswordRepeatChange}\n        />\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={\n            !password.length ||\n            !passwordRepeat.length ||\n            password !== passwordRepeat\n          }\n          className={styles.button}\n        >\n          {t('Restore')}\n        </Button>\n\n        <Button\n          type=\"button\"\n          component={Link}\n          to=\"/\"\n          variant=\"text\"\n          fullWidth\n          className={styles.cancel}\n        >\n          {t('buttons:Cancel')}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport { ResetPassword };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo, useState } from 'react';\nimport { useConfig } from '~/application';\nimport styles from './styles.module.scss';\nimport { Button, TextField } from '@material-ui/core';\nimport { Link } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IProps {\n}\n\nconst SignUp: FC<IProps> = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const config = useConfig();\n  const {t} = useTranslation();\n  const auth = config.auth!!;\n\n  const onSubmit = useCallback(\n    (event) => {\n      event.preventDefault();\n      auth.sendAuthSignup({\n        email,\n        password,\n      });\n    },\n    [auth, email, password]\n  );\n\n  const onEmailChange = useCallback((event) => setEmail(event.target.value), [\n    setEmail,\n  ]);\n\n  const onPasswordChange = useCallback(\n    (event) => setPassword(event.target.value),\n    [setPassword]\n  );\n\n  const loginLabel = useMemo(() => config.auth?.loginLabel || t('Login'), [config.auth, t]);\n\n  return (\n    <div className={styles.wrap}>\n      <Helmet>\n        <title>{t('Sign Up')}</title>\n      </Helmet>\n\n      <h3 className={styles.header}>{t('Sign Up')}</h3>\n\n      <form onSubmit={onSubmit}>\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"email\"\n          label={loginLabel}\n          name=\"email\"\n          autoComplete=\"email\"\n          defaultValue={email}\n          onChange={onEmailChange}\n          autoFocus\n        />\n\n        <TextField\n          variant=\"filled\"\n          margin=\"normal\"\n          required\n          fullWidth\n          name=\"password\"\n          label={t('Password')}\n          type=\"password\"\n          id=\"password\"\n          defaultValue={password}\n          onChange={onPasswordChange}\n          autoComplete=\"current-password\"\n        />\n\n        <Button\n          type=\"submit\"\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={!email.length || !password.length}\n          className={styles.button}\n        >\n          {t('Register now')}\n        </Button>\n\n        <Button\n          type=\"button\"\n          component={Link}\n          to=\"/\"\n          variant=\"text\"\n          fullWidth\n          className={styles.cancel}\n        >\n          {t('buttons:Cancel')}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport { SignUp };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  AuthProviderOptions,\n  AuthProviderUser,\n  EMPTY_USER,\n  UNAUTHORIZED,\n  WithTokenFunction,\n} from '~/application/types/auth';\nimport { action, computed, flow, observable, reaction } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Config } from '~/application';\nimport { AuthRouter } from '~/containers/auth/AuthRouter';\nimport { FC } from 'react';\nimport { AuthVerticalLayout } from '~/application/layouts/login/AuthVerticalLayout';\nimport { has } from 'ramda';\nimport { SignIn } from '~/containers/auth/SignIn';\nimport { ForgotPassword } from '~/containers/auth/ForgotPassword';\nimport { ResetPassword } from '~/containers/auth/ResetPassword';\nimport { SignUp } from '~/containers/auth/SignUp';\nimport i18n from \"~/i18n\";\n\nexport class AuthProvider<U extends AuthProviderUser = AuthProviderUser> {\n  constructor(options?: Partial<AuthProviderOptions>) {\n    if (options) {\n      Object.assign(this, options);\n    }\n\n    if (this.persist) {\n      const { user } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = { ...EMPTY_USER, ...user };\n      }\n\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  // From props\n  @observable splash: string = '';\n  @observable layout: FC = AuthVerticalLayout;\n  @observable parent?: Config;\n  @observable user: AuthProviderUser = EMPTY_USER;\n  @observable authRequestFn?: AuthProviderOptions['authRequestFn'];\n  @observable authPasswRestoreFn?: AuthProviderOptions['authPasswRestoreFn'];\n  @observable authPasswUpdateFn?: AuthProviderOptions['authPasswUpdateFn'];\n  @observable authSignupFn?: AuthProviderOptions['authSignupFn'];\n  @observable authLogoutFn?: AuthProviderOptions['authLogoutFn'];\n  @observable roleTitles?: Record<any, string>;\n  @observable persist?: AuthProviderOptions['persist'] = true;\n  @observable passwordValidator?: AuthProviderOptions['passwordValidator'];\n  @observable loginLabel: AuthProviderOptions['loginLabel'] = i18n.t('Login');\n  @observable getUserName: AuthProviderOptions['getUserName'] = () =>\n    this.user?.username || '';\n\n  // Components\n  @observable router: FC = AuthRouter;\n  @observable signIn: FC = SignIn;\n  @observable signUp: FC = SignUp;\n  @observable forgotPassword: FC = ForgotPassword;\n  @observable resetPassword: FC = ResetPassword;\n\n  @observable\n  getUserRoleTitle: AuthProviderOptions['getUserRoleTitle'] = () => {\n    const role = this.user.role;\n    if (!role) return '';\n    if (role && this.roleTitles && has(role, this.roleTitles))\n      return this.roleTitles[role];\n    return role || '';\n  };\n\n  @observable\n  getUserRole: AuthProviderOptions['getUserRole'] = () => {\n    return this.user.role || '';\n  };\n\n  // Built-in\n  @observable isLoading: boolean = false;\n  @observable error: string = '';\n\n  @computed\n  get userName(): string {\n    return this.getUserName(this);\n  }\n\n  @computed\n  get userRoleTitle(): string {\n    return this.getUserRoleTitle(this);\n  }\n\n  @computed\n  get userRole(): string {\n    return this.getUserRole(this);\n  }\n\n  sendAuthRequestInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthRequest = (email: string, password: string) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: AuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authRequestFn(email, password).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.user = response.user;\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  sendAuthPasswRestoreInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthPasswRestore = (email: string) => {\n    this.sendAuthPasswRestoreCancel();\n\n    this.sendAuthPasswRestoreInstance = flow(function* sendAuthPasswRestore(\n      this: AuthProvider\n    ) {\n      if (!this.authPasswRestoreFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.authPasswRestoreFn(email).catch(() => null);\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.parent?.notifications.showSuccess('Check your email');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthPasswRestoreCancel = () => {\n    if (\n      this.sendAuthPasswRestoreInstance &&\n      this.sendAuthPasswRestoreInstance.cancel\n    ) {\n      try {\n        this.sendAuthPasswRestoreInstance.cancel();\n      } catch (e) {}\n    }\n  };\n\n  sendAuthPasswUpdateInstance?: CancellablePromise<any>;\n\n  @action\n  sendAuthPasswUpdate = (token: string, password: string) => {\n    this.sendAuthPasswRestoreCancel();\n\n    this.sendAuthPasswUpdateInstance = flow(function* sendAuthPasswUpdate(\n      this: AuthProvider\n    ) {\n      if (!this.authPasswUpdateFn) return;\n\n      this.isLoading = true;\n\n      try {\n        if (!token.trim()) {\n          throw new Error(`Token is empty`);\n        }\n\n        if (this.passwordValidator && this.passwordValidator(password)) {\n          throw new Error(this.passwordValidator(password));\n        }\n\n        const response = yield this.authPasswUpdateFn(token, password).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.parent?.notifications.showSuccess('You can now log in');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthPasswUpdateCancel = () => {\n    if (\n      this.sendAuthPasswUpdateInstance &&\n      this.sendAuthPasswUpdateInstance.cancel\n    ) {\n      try {\n        this.sendAuthPasswUpdateInstance.cancel();\n      } catch (e) {}\n    }\n  };\n\n  @action\n  sendAuthSignup = (data: any) => {\n    flow(function* sendAuthPasswRestore(this: AuthProvider) {\n      if (!this.authSignupFn) return;\n\n      this.isLoading = true;\n\n      try {\n        yield this.authSignupFn(data);\n        this.parent?.notifications.showSuccess('Now you can log in');\n        this.parent?.history.push('/');\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  getPersistedCredentials = (): AuthProviderUser => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return user;\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  logoutInstance?: CancellablePromise<any>;\n\n  @action\n  logout = () => {\n    this.logoutCancel();\n\n    this.logoutInstance = flow(function* sendAuthRequest(\n      this: AuthProvider\n    ) {\n      if (!this.authLogoutFn) {\n        this.user = EMPTY_USER;\n        return;\n      }\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.withToken(this.authLogoutFn, {}).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.user = EMPTY_USER;\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  logoutCancel = () => {\n    if (this.logoutInstance && this.logoutInstance.cancel) {\n      this.logoutInstance.cancel();\n    }\n  };\n\n  /**\n   * Passes token variable to {args}\n   * @param req - request function\n   * @param args - args object, that'll be extended with token\n   */\n  @action\n  withToken: WithTokenFunction = async (req: any, args: any) => {\n    try {\n      const result = await req({ ...args, token: this.user.token });\n\n      if (result?.error) {\n        throw new Error(result.error);\n      }\n\n      return result;\n    } catch (e) {\n      if (e.toString() === UNAUTHORIZED) {\n        this.user = EMPTY_USER;\n      }\n\n      this.parent?.notifications.showError(e.toString());\n\n      return undefined;\n    }\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.user.token;\n  }\n\n  @computed\n  get output() {\n    return this.router;\n  }\n\n  @computed\n  get token() {\n    return this.user.token;\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo, useState } from 'react';\nimport { observer } from 'mobx-react';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { Button, ListItemText, Menu, MenuItem } from '@material-ui/core';\nimport FilterIcon from '@material-ui/icons/FilterList';\nimport styles from './styles.module.scss';\n\ninterface IProps {\n  fields: FeatureField[];\n  selected: string[];\n  onSelect: (name: string) => void;\n}\n\nconst FilterSelector: FC<IProps> = observer(\n  ({ fields, selected, onSelect }) => {\n    const [buttonRef, setButtonRef] = useState<any>(null);\n\n    const onMenuOpen = useCallback((event) => setButtonRef(event.target), [\n      setButtonRef,\n    ]);\n\n    const onMenuClose = useCallback((event) => setButtonRef(null), [\n      setButtonRef,\n    ]);\n\n    const onFieldSelect = useCallback(\n      (name: string) => {\n        onSelect(name);\n        setButtonRef(null);\n      },\n      [onSelect, setButtonRef]\n    );\n\n    const selectable = useMemo(\n      () => fields.filter((field) => !selected.includes(field.name)),\n      [fields, selected]\n    );\n\n    return (\n      <>\n        <Button\n          aria-controls=\"customized-menu\"\n          aria-haspopup=\"true\"\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={onMenuOpen}\n          className={styles.button}\n          disabled={!selectable.length}\n        >\n          <FilterIcon />\n        </Button>\n\n        {buttonRef && (\n          <Menu\n            id=\"customized-menu\"\n            elevation={0}\n            getContentAnchorEl={null}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'right',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            anchorEl={buttonRef}\n            onClose={onMenuClose}\n            open={!!buttonRef}\n          >\n            {selectable.map((field) => (\n              <MenuItem\n                key={field.name}\n                onClick={() => onFieldSelect(field.name)}\n              >\n                <ListItemText primary={field.label} />\n              </MenuItem>\n            ))}\n          </Menu>\n        )}\n      </>\n    );\n  }\n);\n\nexport { FilterSelector };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useCallback, useMemo } from 'react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { FilterSelector } from '~/application/modules/pages/Feature/components/filters/FilterSelector';\n\nconst FiltersRenderer = observer(() => {\n  const feature = useFeature();\n  const filterable = useMemo(\n    () => feature.fieldsList.filter((field) => field.options.features?.filter),\n    [feature.fieldsList]\n  );\n\n  const selected = useMemo(\n    () =>\n      filterable.filter((field) =>\n        feature.filters.selected.includes(field.name)\n      ),\n    [filterable, feature.filters.selected]\n  );\n\n  const onAdd = useCallback(\n    (name: string) => {\n      feature.filters.selected = [...feature.filters.selected, name];\n    },\n    [feature.filters.selected]\n  );\n\n  return (\n    <div className={classNames(styles.filters, 'feature-list__filters')}>\n      <FilterSelector\n        fields={filterable}\n        onSelect={onAdd}\n        selected={feature.filters.selected}\n      />\n\n      {selected.map((field, i) => (\n        <field.Filter key={field.name} />\n      ))}\n    </div>\n  );\n});\n\nexport { FiltersRenderer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { computed, observable } from 'mobx';\nimport React from 'react';\nimport { and, has, pickBy } from 'ramda';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { FiltersRenderer } from '~/application/modules/pages/Feature/components/filters/FiltersRenderer';\nimport qs from 'query-string';\nimport { SortDir } from '~/application/modules/pages/Feature/types';\n\nexport class FeatureFilters<\n  F extends Record<string, any> = Record<string, any>\n> {\n  constructor(public feature: Feature<F>) {}\n\n  @observable value: Record<string, any> = {};\n  @observable selected: string[] = [];\n\n  @observable count: number = 0;\n  @observable rows: number = 25;\n  @observable rowsSelectOptions: number[] = [10, 25, 50, 100, 200];\n  @observable page: number = 0;\n  @observable sortBy?: string;\n  @observable sortDir?: SortDir;\n\n  @computed\n  get fields(): Record<string, FeatureField<F>> {\n    return pickBy((item: FeatureField<F>) => !!item.options.features?.filter)(\n      this.feature.fields\n    );\n  }\n\n  @computed\n  get fieldsList(): FeatureField<F>[] {\n    return Object.values(this.fields);\n  }\n\n  @computed\n  get valuesForList(): Record<string, string> {\n    return pickBy(\n      (_, it) =>\n        has(it, this.fields) &&\n        (!!this.value[it] || this.fields[it].allowEmptyFilter)\n    )(this.value);\n  }\n\n  @computed\n  get Filters() {\n    return <FiltersRenderer />;\n  }\n\n  /**\n   * Makes url for current set of filters for current feature\n   */\n  @computed\n  get queryString() {\n    const query = qs.stringify({\n      ...this.value,\n      __sortDir: this.sortDir,\n      __sortBy: this.sortBy,\n      __rows: this.rows,\n      __page: this.page,\n    });\n\n    return `${this.feature.url}?${query}`;\n  }\n\n  /**\n   * Gets filters from url\n   */\n  restoreFilters = () => {\n    const { search } = window.location;\n\n    const fields = qs.parse(search);\n\n    if (!fields) return;\n\n    Object.keys(fields).forEach((field: string) => {\n      if (\n        !Object.prototype.hasOwnProperty.call(this.fields, field) ||\n        !this.fields[field]?.options?.features?.filter ||\n        !(\n          this.fields[field].allowEmptyFilter ||\n          fields[field]?.toString()?.trim()\n        )\n      )\n        return;\n\n      this.value = { ...this.value, [field]: fields[field]?.toString() || '' };\n      this.selected = [...this.selected, field];\n    });\n\n    if (has('__sortDir', fields)) {\n      switch (fields?.__sortDir?.toString()?.toLowerCase()) {\n        case SortDir.ASC:\n          this.sortDir = SortDir.ASC;\n          break;\n        case SortDir.DESC:\n          this.sortDir = SortDir.DESC;\n          break;\n        default:\n          this.sortDir = undefined;\n      }\n    }\n\n    if (\n      and(\n        has('__sortBy', fields),\n        has(fields?.__sortBy?.toString() || '', this.fields)\n      )\n    ) {\n      this.sortBy = fields.__sortBy?.toString() || undefined;\n    }\n\n    if (\n      and(has('__page', fields), parseInt(fields?.__page?.toString() || '', 10))\n    ) {\n      this.page = parseInt(fields?.__page?.toString() || '', 10);\n    }\n\n    if (\n      and(has('__rows', fields), parseInt(fields?.__rows?.toString() || '', 10))\n    ) {\n      this.rows = parseInt(fields?.__rows?.toString() || '', 10);\n    }\n  };\n\n  /**\n   * Changes current url to has parseable filters\n   */\n  persistFilters = () => {\n    const url = `${window.location.origin}${this.queryString}`;\n    window.history.replaceState('', '', url);\n  };\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, HTMLAttributes, useCallback } from 'react';\nimport { TableCell, TableSortLabel } from '@material-ui/core';\nimport { ENTITY_SORT_DIRS } from '~/application';\n\ntype IProps = HTMLAttributes<HTMLDivElement> & {\n  field: string;\n  active?: boolean;\n  direction?: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  onSortChange: (field: string) => void;\n};\n\nconst EntityHeadSortable: FC<IProps> = ({\n  children,\n  field,\n  active,\n  onSortChange,\n  direction,\n}) => {\n  const onClick = useCallback(() => onSortChange(field), [field, onSortChange]);\n\n  return (\n    <TableCell>\n      <TableSortLabel\n        active={active}\n        direction={active ? direction : ENTITY_SORT_DIRS.DESC}\n        onClick={onClick}\n      >\n        {children}\n      </TableSortLabel>\n    </TableCell>\n  );\n};\n\nexport { EntityHeadSortable };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, {\n  createElement,\n  Fragment,\n  MouseEvent,\n  ReactNode,\n  useCallback,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Button,\n  Checkbox,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core';\nimport { IEntityField } from '../../types';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { EntityHeadSortable } from '~/application/modules/pages/Entity/components/EntityHeadSortable';\nimport styles from './styles';\nimport { EntityField } from '~/application';\nimport { observer } from 'mobx-react';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport omit from 'ramda/es/omit';\nimport classnames from 'classnames';\nimport { Entity } from '~/application/modules';\nimport { ENTITY_SORT_DIRS } from \"~/application/modules/pages/Entity/constants\";\n\ntype IProps = WithStyles<typeof styles> & {\n  isLoading: boolean;\n  fields: IEntityField[];\n  data: Record<string, string>[];\n  url: string;\n  sortBy: string;\n  sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS];\n  selected: any[];\n  entity: Entity;\n  extra:\n    | (({\n        id,\n        onClose,\n      }: {\n        id: any;\n        onClose: (id: any) => void;\n      }) => JSX.Element)\n    | null;\n  canView: boolean;\n  canEdit: boolean;\n  canSelect?: boolean;\n  setSelected: (items: any[]) => void;\n  onSortChange: (field: string) => void;\n  withToken?: (req: any, args: any) => void;\n  onRowClick?: (id: any, event: MouseEvent<any>) => void;\n\n  firstRow?: ReactNode;\n  lastRow?: ReactNode;\n  tableHead?: ReactNode;\n  before?: ReactNode;\n  after?: ReactNode;\n};\n\nconst EntityList = observer(\n  withStyles(styles)(\n    ({\n      classes,\n      isLoading,\n      fields,\n      entity,\n      data,\n      url,\n      extra,\n      selected,\n      sortBy,\n      sortDir,\n      canView,\n      canEdit,\n      canSelect,\n      onSortChange,\n      setSelected,\n      withToken,\n      onRowClick,\n      before = null,\n      after = null,\n      firstRow = null,\n      lastRow = null,\n      tableHead = null,\n    }: IProps) => {\n      const [expanded, setExpanded] = useState<Record<any, boolean>>({});\n\n      const visibleFields = useMemo(\n        () => fields.filter((field) => !field.hideInList),\n        [fields]\n      );\n\n      const history = useHistory();\n\n      const onRowClicked = useCallback(\n        (id: any, event: MouseEvent<any>) => {\n          if (onRowClick) {\n            return onRowClick(id, event);\n          }\n\n          if (extra) {\n            return setExpanded({ ...expanded, [id]: !expanded[id] });\n          }\n\n          if (canView) {\n            return history.push(`${url}/${id}`);\n          }\n\n          if (canEdit) {\n            return history.push(`${url}/${id}/edit`);\n          }\n        },\n        [\n          canView,\n          canEdit,\n          history,\n          url,\n          extra,\n          expanded,\n          setExpanded,\n          onRowClick,\n        ]\n      );\n\n      const onSelect = useCallback(\n        (id: any, includes: boolean) => {\n          setSelected(\n            !includes ? selected.filter((el) => el !== id) : [...selected, id]\n          );\n        },\n        [selected, setSelected]\n      );\n\n      const isAllSelected = useMemo(() => selected.length === data.length, [\n        data,\n        selected,\n      ]);\n\n      const onSelectAll = useCallback(() => {\n        setSelected(isAllSelected ? [] : data.map((el) => el.id));\n      }, [selected, setSelected, isAllSelected, data]);\n\n      const colSpan = useMemo(\n        () =>\n          visibleFields.length +\n          (canView ? 1 : 0) +\n          (canEdit ? 1 : 0) +\n          (canSelect ? 1 : 0) +\n          (extra ? 1 : 0),\n        [visibleFields, canEdit, canView, canSelect]\n      );\n\n      const onExtraClose = useCallback(\n        (id) => setExpanded(omit([id], expanded)),\n        [setExpanded, expanded]\n      );\n\n      if (isLoading) {\n        return (\n          <div className={classes.loader}>\n            <CircularProgress />\n          </div>\n        );\n      }\n\n      return (\n        <>\n          {before}\n          <TableContainer>\n            <Table className={classes.table} stickyHeader size=\"medium\">\n              {tableHead || (\n                <TableHead>\n                  <TableRow>\n                    {extra && <TableCell />}\n\n                    {canSelect && (\n                      <TableCell>\n                        <Checkbox\n                          onChange={onSelectAll}\n                          checked={isAllSelected}\n                        />\n                      </TableCell>\n                    )}\n\n                    {visibleFields.map((field) =>\n                      field.sortable ? (\n                        <EntityHeadSortable\n                          active={sortBy === field.name}\n                          direction={sortDir}\n                          key={field.name}\n                          field={field.name}\n                          onSortChange={onSortChange}\n                        >\n                          <b>{field.label || field.name}</b>\n                        </EntityHeadSortable>\n                      ) : (\n                        <TableCell key={field.name}>\n                          <b>{field.label || field.name}</b>\n                        </TableCell>\n                      )\n                    )}\n\n                    {canView && <TableCell />}\n                    {canEdit && <TableCell />}\n                  </TableRow>\n                </TableHead>\n              )}\n\n              <TableBody>\n                {firstRow}\n                {data.map((entry, i) => (\n                  <Fragment key={i}>\n                    <TableRow hover>\n                      {extra && (\n                        <TableCell\n                          onClick={(event) => onRowClicked(entry.id, event)}\n                        >\n                          {expanded[entry.id] ? (\n                            <KeyboardArrowDownIcon />\n                          ) : (\n                            <KeyboardArrowRightIcon />\n                          )}\n                        </TableCell>\n                      )}\n\n                      {canSelect && (\n                        <TableCell>\n                          <Checkbox\n                            checked={selected.includes(entry.id)}\n                            onChange={(_, includes) =>\n                              onSelect(entry.id, includes)\n                            }\n                          />\n                        </TableCell>\n                      )}\n\n                      {visibleFields.map((field) => (\n                        <TableCell\n                          key={field.name}\n                          onClick={(event) => onRowClicked(entry.id, event)}\n                        >\n                          <EntityField\n                            name={field.name}\n                            fields={fields}\n                            data={entry}\n                            withToken={withToken}\n                            entity={entity}\n                          />\n                        </TableCell>\n                      ))}\n\n                      {canEdit && (\n                        <TableCell\n                          size=\"small\"\n                          align=\"right\"\n                          className={classes.button}\n                        >\n                          <Button\n                            to={`${url}/${entry.id}/edit`}\n                            component={RouterLink}\n                          >\n                            <EditIcon />\n                          </Button>\n                        </TableCell>\n                      )}\n\n                      {canView && (\n                        <TableCell\n                          size=\"small\"\n                          align=\"right\"\n                          className={classnames(\n                            classes.button,\n                            classes.button_active\n                          )}\n                        >\n                          <Button\n                            to={`${url}/${entry.id}/`}\n                            component={RouterLink}\n                          >\n                            <LaunchIcon />\n                          </Button>\n                        </TableCell>\n                      )}\n                    </TableRow>\n\n                    {!!extra && expanded[entry.id] && (\n                      <TableRow>\n                        <TableCell colSpan={colSpan}>\n                          {createElement(extra, {\n                            id: entry.id,\n                            onClose: onExtraClose,\n                          })}\n                        </TableCell>\n                      </TableRow>\n                    )}\n                  </Fragment>\n                ))}\n                {lastRow}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          {after}\n        </>\n      );\n    }\n  )\n);\n\nexport { EntityList };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  loader: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: 200,\n  },\n  table: {\n    '& td, & th': {\n      padding: '4px 8px',\n      fontSize: '12px',\n      lineHeight: '14px',\n    },\n    '& tr': {\n      height: '56px',\n    },\n    '& svg': {\n      verticalAlign: 'middle',\n    },\n  },\n  button: {\n    boxSizing: 'border-box' as 'border-box',\n    borderLeft: `1px solid rgba(0, 0, 0, 0.23)`,\n    padding: '7px !important',\n    width: 56,\n\n    '& a': {\n      color: theme.palette.primary.main,\n      minWidth: 'auto',\n    },\n  },\n  button_active: {\n    '& a': {\n      background: theme.palette.primary.main,\n      color: 'white',\n      borderRadius: '4px',\n      padding: '6px',\n\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n      },\n    },\n  },\n  paper: {\n    background: 'blue',\n    maxHeight: '100%',\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useState } from 'react';\nimport { observer } from 'mobx-react';\nimport { useConfig } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { List, Collapse, ListItem } from '@material-ui/core';\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\n\ninterface IProps {}\n\nconst VerticalNavigation: FC<IProps> = observer(() => {\n  const [openList, setOpenList] = useState(false);\n  const config = useConfig();\n  const { t } = useTranslation();\n  const navigation = config.linksForCurrentUser.filter((item) => item.enabled);\n\n  const handleClick = () => {\n    setOpenList(!openList);\n  };\n\n  return (\n    <div className={classNames(styles.navigation, 'vertical-navigation')}>\n      {navigation.map((link) => {\n        if (link.childFields) {\n          return (\n            <List\n              component=\"nav\"\n              disablePadding={true}\n              subheader={\n                <ListItem onClick={handleClick} className={styles.list}>\n                  <h2 className={styles.text}>{link.name}</h2>\n                  {openList ? <ExpandLess /> : <ExpandMore />}\n                </ListItem>\n              }\n            >\n              <Collapse in={openList}>\n                {link.childFields.map((child) => {\n                  return (\n                    <ListItem className={styles.list}>\n                      <NavLink\n                        to={child.url}\n                        className={classNames(\n                          styles.link,\n                          'vertical-navigation__link'\n                        )}\n                        key={child.url}\n                      >\n                        {t(child.label)}\n                      </NavLink>\n                    </ListItem>\n                  );\n                })}\n              </Collapse>\n            </List>\n          );\n        }\n        return (\n          <NavLink\n            to={link.url}\n            className={classNames(styles.link, 'vertical-navigation__link')}\n            key={link.url}\n          >\n            {t(link.name)}\n          </NavLink>\n        );\n      })}\n    </div>\n  );\n});\n\nexport { VerticalNavigation };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport classNames from 'classnames';\nimport styles from './styles.module.scss';\nimport { useConfig } from '~/application/utils/hooks';\nimport { Link } from 'react-router-dom';\nimport { VerticalNavigation } from '~/containers/layout/VerticalNavigation';\nimport { Account } from '~/containers/auth/Account';\n\ninterface IProps {}\n\nconst VerticalLayout: FC<IProps> = observer(({ children }) => {\n  const config = useConfig();\n\n  return (\n    <div className={classNames(styles.layout, 'vertical-layout')}>\n      <div className={classNames(styles.menu, 'vertical-layout__menu')}>\n        <div className={classNames(styles.logo, 'vertical-layout__logo')}>\n          <Link to={config.fallbackUrl}>\n            <img src={config.logo}  alt=\"logo\"/>\n          </Link>\n        </div>\n\n        <div\n          className={classNames(\n            styles.navigation,\n            'vertical-layout__navigation'\n          )}\n        >\n          <VerticalNavigation />\n        </div>\n\n        {!!config.auth && (\n          <div\n            className={classNames(styles.account, 'vertical-layout__account')}\n          >\n            {!!config.auth && <Account />}\n          </div>\n        )}\n      </div>\n\n      <div className={classNames(styles.content, 'vertical-layout__content')}>\n        {children}\n      </div>\n    </div>\n  );\n});\n\nexport { VerticalLayout };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { has } from 'ramda';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { FeatureReferenceProps } from '~/application/modules/pages/Feature/types/reference';\n\nexport type GetReferenceAllProps = {\n  feature: Feature;\n  host: string;\n  authorization: string;\n  name: string;\n};\n\nexport type GetReferenceAll = (props: GetReferenceAllProps) => Promise<any>;\n\nexport const getReferenceAll: GetReferenceAll = async ({\n  feature,\n  host,\n  authorization,\n  name,\n}): Promise<Record<any, any>> => {\n  if (!feature.api.references || !has(name, feature.api.references)) return {};\n\n  const { all, url } = feature.api.references[name] as FeatureReferenceProps;\n\n  if (!all || !url) return {};\n\n  return await all({\n    feature,\n    url: new URL(url, host).href,\n    authorization,\n    name,\n  });\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { action, computed, toJS } from 'mobx';\nimport {\n  FeatureApiHost,\n  FeatureApiMethods,\n  FeatureApiReferences,\n  FeatureApiUrls,\n  FeatureDeleteProps,\n  FeatureGetListProps,\n  FeatureGetListResult,\n  FeatureGetReadProps,\n  FeatureGetReadResult,\n  FeaturePostCreateProps,\n  FeaturePostCreateResult,\n  FeaturePostUpdateProps,\n  FeaturePostUpdateResult,\n} from '~/application/modules/pages/Feature/types/api';\nimport { UNAUTHORIZED } from '~/application';\nimport { Feature } from '~/application/modules/pages/Feature';\nimport { has, keys } from 'ramda';\nimport { getReferenceAll } from '~/application/modules/pages/Feature/items/FeatureApi/references';\nimport { FeatureData } from '~/application/modules/pages/Feature/items/FeatureData';\nimport { FeatureFeature } from '~/application/modules/pages/Feature/types';\n\nexport class FeatureApi<\n  Fields extends Record<string, any> = Record<string, any>\n> {\n  constructor(private feature: Feature<Fields>) {}\n\n  @computed\n  get methods(): FeatureApiMethods<Fields> | undefined {\n    return this.feature.options?.api?.methods;\n  }\n\n  @computed\n  get host(): FeatureApiHost {\n    return this.feature.parent?.host || 'http://localhost';\n  }\n\n  @computed\n  get urls(): Required<FeatureApiUrls> {\n    const urls = this.feature.options?.api?.urls;\n\n    const list = urls?.list || '';\n    const read = urls?.read || list;\n    const update = urls?.update || read;\n    const create = urls?.create || read;\n    const del = urls?.delete || read;\n    const ex = urls?.export || read;\n\n    return {\n      list,\n      read,\n      update,\n      create,\n      delete: del,\n      export: ex,\n    };\n  }\n\n  @computed\n  get data(): FeatureData<Fields> {\n    return this.feature.data;\n  }\n\n  @computed\n  get references(): FeatureApiReferences<Fields> | undefined {\n    return this.feature.options.api?.references;\n  }\n\n  @computed\n  get request() {\n    const authorization = this.feature.parent?.auth?.token;\n\n    return (cb: any, props: any) =>\n      cb({ ...props, ...(authorization ? { authorization } : {}) });\n  }\n\n  @action\n  useFeature = (feature: Feature<Fields>) => {\n    this.feature = feature;\n  };\n\n  @computed\n  get availableApiFeatures(): Record<FeatureFeature, boolean> {\n    return Object.values(FeatureFeature).reduce(\n      (acc, mode) => ({\n        ...acc,\n        [mode]: !!(\n          this.host &&\n          has(mode, this.methods) &&\n          this.feature.availableFeatures[mode]\n        ),\n      }),\n      {} as Record<FeatureFeature, boolean>\n    );\n  }\n\n  @action\n  list = async (\n    feature: Feature<Fields>\n  ): Promise<FeatureGetListResult<Fields>> => {\n    if (!this.availableApiFeatures.list) {\n      throw new Error('Specify feature api host, methods and urls first.');\n    }\n\n    const { sortBy, sortDir, page, rows, valuesForList } = feature.filters;\n\n    const url = new URL(this.urls.list || '', this.host).href;\n\n    const result: FeatureGetListResult<Fields> = await this.request(\n      this.methods!!.list!!,\n      {\n        feature,\n        url,\n        filters: toJS(valuesForList),\n        sortBy,\n        sortDir,\n        limit: rows,\n        offset: page * rows,\n      } as FeatureGetListProps\n    );\n\n    if (result.status === 401) {\n      throw new Error(UNAUTHORIZED);\n    }\n\n    return result;\n  };\n\n  @action\n  read = async (id: any): Promise<FeatureGetReadResult<Fields>> => {\n    if (!this.availableApiFeatures.read) {\n      throw new Error('Specify feature api host, methods and urls first.');\n    }\n\n    const feature = this.feature;\n    const url = new URL(this.urls.read, this.host).href;\n\n    const result: FeatureGetReadResult<Fields> = await this.request(\n      this.methods!!.read!!,\n      { url, feature, id } as FeatureGetReadProps\n    );\n\n    if (result.status === 401) {\n      throw new Error(UNAUTHORIZED);\n    }\n\n    return result;\n  };\n\n  @action\n  create = async (\n    data: FeatureData['editor']\n  ): Promise<FeaturePostCreateResult<Fields>> => {\n    if (!this.availableApiFeatures.create) {\n      throw new Error('Specify feature api host, methods and urls first.');\n    }\n\n    const feature = this.feature;\n    const url = new URL(this.urls.create, this.host).href;\n\n    const result: FeaturePostCreateResult<Fields> = await this.request(\n      this.methods!!.create!!,\n      { url, feature, data } as FeaturePostCreateProps<Fields>\n    );\n\n    if (result.status === 401) {\n      throw new Error(UNAUTHORIZED);\n    }\n\n    return result;\n  };\n\n  @action\n  update = async (\n    id: any,\n    data: FeatureData['editor']\n  ): Promise<FeaturePostUpdateResult<Fields>> => {\n    if (!this.availableApiFeatures.update) {\n      throw new Error('Specify feature api host, methods and urls first.');\n    }\n    const feature = this.feature;\n    const url = new URL(this.urls.update, this.host).href;\n\n    const result: FeaturePostUpdateResult<Fields> = await this.request(\n      this.methods!!.update!!,\n      { url, feature, data, id } as FeaturePostUpdateProps<Fields>\n    );\n\n    if (result.status === 401) {\n      throw new Error(UNAUTHORIZED);\n    }\n\n    return result;\n  };\n\n  @action\n  delete = async (id: any) => {\n    if (!this.availableApiFeatures.delete) {\n      throw new Error('Specify feature api host, methods and urls first.');\n    }\n\n    const url = new URL(this.urls.delete, this.host).href;\n\n    await this.request(this.methods!!.delete!!, {\n      url,\n      feature: this.feature,\n      id,\n    } as FeatureDeleteProps);\n  };\n\n  @action\n  async getReferencesAll<Fields>() {\n    if (!keys(this.references).length || !this.feature) return;\n\n    const refs = keys(this.references);\n\n    await Promise.all(refs.map(this.getReference.bind(this)));\n  }\n\n  @action\n  async getReference<Fields>(name: string) {\n    if (!has(name, this.data.references)) return;\n\n    const ref = this.data.references[name]!!;\n\n    ref.isLoadingAll = true;\n    ref.all = await this.request(getReferenceAll, {\n      feature: this.feature,\n      name,\n      host: this.host,\n    });\n    ref.isLoadingAll = false;\n  }\n}\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useMemo, ReactElement } from 'react';\nimport {\n  Grid,\n  Breadcrumbs,\n  Link,\n  Typography,\n  Button,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\nimport styles from './styles';\nimport { IEntityField } from '~/application';\nimport { observer } from 'mobx-react';\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\ntype IProps = WithStyles<typeof styles> & {\n  id?: string;\n  name: string;\n  url: string;\n  isEditing?: boolean;\n  isCreating?: boolean;\n  fields: IEntityField[];\n  data: Record<string, any>;\n  buttons?: ReactElement;\n  viewable: boolean;\n  editable: boolean;\n};\n\nconst EntityBreadcrumbs = withStyles(styles)(\n  observer(\n    ({\n      name,\n      url,\n      isEditing,\n      isCreating,\n      classes,\n      id,\n      fields,\n      data,\n      buttons,\n      viewable,\n      editable,\n    }: IProps) => {\n      const {t} = useTranslation();\n      const title = useMemo(() => {\n        const field = fields.find((f) => f.title);\n        return data && field && field.name ? data[field.name] : id;\n      }, [data, fields, id]);\n\n      return (\n        <div className={classes.breadcrumbs}>\n          <Grid container alignItems=\"center\">\n            <Grid style={{ flex: 1 }}>\n              <Breadcrumbs aria-label=\"breadcrumb\">\n                {name && (\n                  <Link color=\"inherit\" to={url} component={RouterLink}>\n                    {name}\n                  </Link>\n                )}\n\n                {isEditing && !isCreating && !!title && (\n                  <Link\n                    color=\"inherit\"\n                    to={viewable ? `${url}/${id}` : url}\n                    component={RouterLink}\n                  >\n                    {title}\n                  </Link>\n                )}\n\n                {!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\">\n                    <Helmet>\n                      <title>{title}</title>\n                    </Helmet>\n                    {title}\n                  </Typography>\n                )}\n\n                {!!isEditing && !isCreating && (\n                  <Typography color=\"textPrimary\">\n                    <Helmet>\n                      <title>{`${t('Edit')}: ${title ?? ''}`}</title>\n                    </Helmet>\n                    {t('Edit')}\n                  </Typography>\n                )}\n\n                {!isEditing && !!isCreating && (\n                  <Typography color=\"textPrimary\">\n                    <Helmet>\n                      <title>{`${t('Create')}: ${name ?? ''}`}</title>\n                    </Helmet>\n                    {t('Create')}\n                  </Typography>\n                )}\n              </Breadcrumbs>\n            </Grid>\n\n            {buttons}\n\n            {!isEditing && !isCreating && editable && (\n              <Button\n                to={`${url}/${id}/edit`}\n                component={RouterLink}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"button\"\n              >\n                {t('buttons:Edit')}\n              </Button>\n            )}\n          </Grid>\n        </div>\n      );\n    }\n  )\n);\n\nexport { EntityBreadcrumbs };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  breadcrumbs: {\n    alignItems: 'center',\n    display: 'flex',\n    padding: '40px 24px 24px',\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, ReactElement } from 'react';\nimport { withStyles, WithStyles, Grid, Button } from '@material-ui/core';\nimport styles from './styles';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { IEntityProps } from '~/application';\nimport { EntityFilter } from '~/application/modules/pages/Entity/components/EntityFilter';\nimport { Entity } from '~/application/modules';\nimport { useTranslation } from \"react-i18next\";\n\ntype IProps = WithStyles<typeof styles> & {\n  title: ReactElement;\n  buttons: ReactElement;\n  canCreate: boolean;\n  canExport: boolean;\n  url: string;\n  filters: IEntityProps['filters'];\n  fields: IEntityProps['fields'];\n  filterData: Record<string, any>;\n  entity: Entity;\n\n  setFilters: (filters: IEntityProps['filters']) => void;\n  applyFilter: () => void;\n  onExport: () => void;\n  withToken?: (req: any, args: any) => void;\n};\n\nconst EntityHeadUnstyled: FC<IProps> = ({\n  classes,\n  title,\n  buttons,\n  filters,\n  fields,\n  canCreate,\n  canExport,\n  url,\n  filterData,\n  entity,\n\n  setFilters,\n  applyFilter,\n  withToken,\n  onExport,\n}) => {\n  const {t} = useTranslation();\n  const clearFilter = useCallback(() => {\n    setFilters([]);\n    applyFilter();\n  }, [setFilters, applyFilter]);\n\n  return (\n    <Grid\n      container\n      justify=\"space-between\"\n      alignItems=\"center\"\n      className={classes.header}\n    >\n      {title}\n\n      {filters && (\n        <EntityFilter\n          filterData={filterData}\n          fields={fields}\n          filters={filters}\n          setFilters={setFilters}\n          applyFilter={applyFilter}\n          clearFilter={clearFilter}\n          withToken={withToken}\n          entity={entity}\n        />\n      )}\n\n      <div className={classes.buttons}>\n        {buttons}\n\n        {canExport && (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={onExport}\n            className={classes.export}\n          >\n            {t('buttons:Export')}\n          </Button>\n        )}\n\n        {canCreate && url && (\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            component={RouterLink}\n            to={`${url}/create`}\n          >\n            {t('buttons:Create')}\n          </Button>\n        )}\n      </div>\n    </Grid>\n  );\n};\n\nconst EntityHead = withStyles(styles)(EntityHeadUnstyled);\nexport { EntityHead };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  header: {\n    display: 'flex',\n    padding: '10px',\n    justifyContent: 'center',\n    alignItems: 'flex-start' as 'flex-start',\n    flexWrap: 'nowrap' as 'nowrap',\n    minHeight: '80px',\n\n    '@media(max-width: 640px)': {\n      flexDirection: 'column' as 'column',\n    },\n\n    '& .MuiButton-label': {\n      fontWeight: 'bold',\n      fontSize: '14px',\n      lineHeight: '16px',\n      height: 38,\n    },\n\n    '& .MuiInputBase-input': {},\n\n    '& .MuiButton-outlinedPrimary, & .MuiButton-outlinedSecondary': {\n      backgroundColor: 'white',\n      border: '1px solid #EBEBEB !important',\n    },\n\n    '& .MuiOutlinedInput-notchedOutline': {\n      border: 'none',\n    },\n\n    '& h4': {\n      whiteSpace: 'nowrap',\n    },\n\n    '& > *': {\n      margin: '5px 0',\n    },\n  },\n  title: {\n    color: '#282f36',\n    fontSize: '34px',\n    fontWeight: 900,\n    flexGrow: 1,\n    whiteSpace: 'nowrap' as 'nowrap',\n  },\n  buttons: {\n    marginRight: theme.spacing(1),\n    flexWrap: 'nowrap' as 'nowrap',\n    display: 'flex' as 'flex',\n\n    '@media(max-width: 640px)': {\n      width: '100%',\n      alignItems: 'flex-end',\n      justifyContent: 'flex-end',\n      paddingRight: 10,\n    },\n  },\n  export: {\n    marginRight: theme.spacing(1),\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { Fragment, useCallback, useMemo, useState } from 'react';\n\nimport {\n  Button,\n  IconButton,\n  ListItemText,\n  Menu,\n  MenuItem,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core';\n\nimport styles from './styles';\nimport { IEntityProps, IFilterValue } from '../../types';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport FilterIcon from '@material-ui/icons/FilterList';\nimport { EntityField } from '~/application/modules/pages/Entity/components/EntityField';\nimport { observer } from 'mobx-react';\nimport { Entity } from '~/application';\n\ntype IProps = WithStyles<typeof styles> & {\n  fields: IEntityProps['fields'];\n  filters: IFilterValue[];\n  filterData: Record<string, any>;\n  entity: Entity;\n\n  clearFilter: () => void;\n  applyFilter: () => void;\n  setFilters: (filters: IFilterValue[]) => void;\n  withToken?: (req: any, args: any) => void;\n};\n\nconst EntityFilter = withStyles(styles)(\n  observer(\n    ({\n      classes,\n      fields,\n      filters,\n      filterData,\n      setFilters,\n      applyFilter,\n      withToken,\n      entity,\n    }: IProps) => {\n      const [buttonRef, setButtonRef] = useState<any>(null);\n\n      const onSelectField = useCallback(\n        (value) => {\n          setFilters([...filters, { name: String(value), value: '' }]);\n          setButtonRef(null);\n        },\n        [setButtonRef, setFilters, filters]\n      );\n\n      const setFilterValue = useCallback(\n        (i: number) => (value: any) => {\n          setFilters(\n            filters.map((filter, index) =>\n              i === index ? { ...filter, value } : filter\n            )\n          );\n        },\n        [filters, setFilters]\n      );\n\n      const removeFilter = useCallback(\n        (i: number) => () => {\n          setFilters(filters.filter((_, index) => i !== index));\n          applyFilter();\n        },\n        [applyFilter, filters, setFilters]\n      );\n\n      const filterableFields = useMemo(\n        () => fields.filter((field) => field.filterable),\n        [fields]\n      );\n\n      const selectableFields = useMemo(\n        () =>\n          filterableFields.filter(\n            (field) => !filters.some((filter) => filter.name === field.name)\n          ),\n        [filterableFields, filters]\n      );\n\n      const currentFilters = useMemo(\n        () =>\n          filters\n            .map((filter) =>\n              filterableFields.find((field) => field.name === filter.name)\n            )\n            .filter((field) => !!field) || [],\n        [filterableFields, filters]\n      );\n\n      const onCancel = useCallback(\n        (event) => {\n          event.preventDefault();\n          setFilters([]);\n          applyFilter();\n        },\n        [applyFilter, setFilters]\n      );\n\n      const onSubmit = useCallback(\n        (event) => {\n          event.preventDefault();\n          applyFilter();\n        },\n        [applyFilter]\n      );\n\n      const onMenuOpen = useCallback((event) => setButtonRef(event.target), [\n        setButtonRef,\n      ]);\n\n      const onMenuClose = useCallback((event) => setButtonRef(null), [\n        setButtonRef,\n      ]);\n\n      return (\n        <form className={classes.wrapper} onSubmit={onSubmit}>\n          {selectableFields.length > 0 && (\n            <>\n              <Button\n                aria-controls=\"customized-menu\"\n                aria-haspopup=\"true\"\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={onMenuOpen}\n                className={classes.filterButton}\n              >\n                <FilterIcon />\n              </Button>\n\n              {buttonRef && (\n                <Menu\n                  id=\"customized-menu\"\n                  elevation={0}\n                  getContentAnchorEl={null}\n                  anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                  }}\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  anchorEl={buttonRef}\n                  onClose={onMenuClose}\n                  open={!!buttonRef}\n                >\n                  {selectableFields.map((field) => (\n                    <MenuItem\n                      key={field.name}\n                      onClick={() => onSelectField(field.name)}\n                    >\n                      <ListItemText primary={field.label || field.name} />\n                    </MenuItem>\n                  ))}\n                </Menu>\n              )}\n            </>\n          )}\n\n          {currentFilters.length > 0 && (\n            <Fragment>\n              <Button\n                onClick={applyFilter}\n                tabIndex={0}\n                color=\"primary\"\n                variant=\"outlined\"\n                className={classes.filterButton}\n              >\n                <CheckIcon />\n              </Button>\n            </Fragment>\n          )}\n\n          {currentFilters.length > 0 && (\n            <Fragment>\n              <Button\n                onClick={onCancel}\n                tabIndex={0}\n                color=\"secondary\"\n                variant=\"outlined\"\n                className={classes.filterButton}\n              >\n                <ClearIcon />\n              </Button>\n            </Fragment>\n          )}\n\n          {currentFilters.map(\n            (field, i) =>\n              field && (\n                <div className={classes.input} key={field.name}>\n                  <EntityField\n                    name={field.name}\n                    fields={fields}\n                    data={{ ...filterData, [field.name]: filters[i].value }}\n                    handler={setFilterValue(i)}\n                    withToken={withToken}\n                    entity={entity}\n                    isEditing\n                    isFiltering\n                  />\n\n                  <IconButton\n                    color=\"secondary\"\n                    onClick={removeFilter(i)}\n                    className={classes.clear}\n                    tabIndex={0}\n                  >\n                    <ClearIcon />\n                  </IconButton>\n                </div>\n              )\n          )}\n        </form>\n      );\n    }\n  )\n);\n\nexport { EntityFilter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap' as 'wrap',\n    flexDirection: 'row-reverse' as 'row-reverse',\n    paddingLeft: 10,\n    margin: '0 !important',\n\n    '@media(max-width: 640px)': {\n      width: '100%',\n    },\n\n    '& .MuiInputLabel-outlined': {\n      whiteSpace: 'nowrap',\n    },\n\n    '& > *': {\n      marginRight: 10,\n      marginTop: 5,\n      marginBottom: 5,\n    },\n\n    '& .datepicker .MuiFormHelperText-contained ': {\n      position: 'absolute',\n      top: -13,\n      left: 0,\n      whiteSpace: 'nowrap',\n    },\n\n    '& .datepicker_range input': {\n      width: 90,\n    },\n\n    '& .datepicker_range .MuiPickersDateRangePickerInput-rangeInputsContainer': {\n      flexDirection: 'row !important',\n    },\n\n    '& .datepicker_datetime input': {\n      width: 130,\n    },\n\n    '& .datepicker_date input': {\n      width: 90,\n    },\n  },\n  formControl: {\n    margin: `0 ${theme.spacing(1)}px 0 0`,\n    minWidth: 120,\n  },\n  select: {\n    '& > div': {\n      padding: '10px 14px 7px',\n    },\n  },\n  input: {\n    display: 'flex',\n    boxShadow: 'inset rgba(0, 0, 0, 1) 0 0 1px',\n    borderRadius: '0 4px 4px 0',\n    backgroundColor: 'white',\n    minHeight: 50,\n    alignItems: 'center',\n    paddingTop: 13,\n\n    '& .select': {\n      padding: '10px 34px 7px 14px',\n    },\n    '& input': {\n      padding: '10px 14px 7px',\n    },\n    '& label': {\n      transform: 'translate(10px, 12px) scale(0.9)',\n    },\n  },\n  clear: {\n    height: 36,\n    width: 36,\n    padding: 0,\n  },\n  label: {\n    transform: 'translate(10px, 12px) scale(0.9)',\n  },\n  iconButton: {\n    height: 50,\n    width: 50,\n    padding: 0,\n  },\n  filterButton: {\n    padding: 0,\n    minWidth: 50,\n    height: 50,\n\n    '& span': {\n      width: 'auto',\n    },\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TablePagination, WithStyles, withStyles } from '@material-ui/core';\nimport styles from './styles';\nimport { useTranslation } from 'react-i18next';\n\ntype IProps = WithStyles<typeof styles> & {\n  itemsPerPage: number[];\n  items: number;\n  totalCount: number;\n  page: number;\n  setPage: (count: number) => void;\n  setPerPage: (count: number) => void;\n};\n\ntype PageNumbers = {\n  from: number;\n  to: number;\n  count: number;\n};\n\nconst EntityFooterUnconnected: FC<IProps> = ({\n  classes,\n  totalCount,\n  page,\n  itemsPerPage,\n  items,\n  setPage,\n  setPerPage,\n}) => {\n  const { t } = useTranslation();\n  const onChangeRowsPerPage = useCallback(\n    (event) => setPerPage(parseInt(event.target.value)),\n    [setPerPage]\n  );\n\n  const onChangePage = useCallback((_, newPage) => setPage(newPage), [setPage]);\n\n  const labelDisplayedRows = (page: number, items: number) => ({\n    from,\n    to,\n    count,\n  }: PageNumbers) => {\n    const pageNum = page + 1;\n    const pageCount = Math.ceil(count / items);\n\n    return t(\n      'messages:Page {{pageNum}} of {{pageCount}}, Results {{from}}-{{to}} of {{count}}',\n      {\n        pageNum,\n        pageCount,\n        from,\n        to,\n        count,\n      }\n    );\n  };\n\n  return (\n    <TablePagination\n      rowsPerPageOptions={itemsPerPage}\n      component=\"div\"\n      count={totalCount}\n      labelRowsPerPage={`${t('common:Per page')}:`}\n      rowsPerPage={items}\n      page={page}\n      onChangePage={onChangePage}\n      onChangeRowsPerPage={onChangeRowsPerPage}\n      className={classes.pager}\n      labelDisplayedRows={labelDisplayedRows(page, items)}\n    />\n  );\n};\n\nconst EntityFooter = withStyles(styles)(EntityFooterUnconnected);\n\nexport { EntityFooter };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  pager: {\n    minHeight: 60,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { useFeature } from '~/application/utils/hooks';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react';\n\nconst FeatureListTitle: FC = observer(() => {\n  const feature = useFeature();\n\n  return (\n    <h1 className={classNames(styles.title, 'feature-list__title')}>\n      {feature.title}\n    </h1>\n  );\n});\n\nexport { FeatureListTitle };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { createElement, FC } from 'react';\nimport { FeatureListContainer } from '~/application/modules/pages/Feature/components/list/FeatureListContainer';\nimport { FeatureListWrapper } from '~/application/modules/pages/Feature/components/list/FeatureListWrapper';\nimport { FeatureListTitle } from '~/application/modules/pages/Feature/components/list/FeatureListTitle';\nimport { FeatureListPagination } from '~/application/modules/pages/Feature/components/list/FeatureListPagination';\nimport { FeatureListFooter } from '~/application/modules/pages/Feature/components/list/FeatureListFooter';\nimport { FeatureListHeader } from '~/application/modules/pages/Feature/components/list/FeatureListHeader';\nimport { FeatureListButtons } from '~/application/modules/pages/Feature/components/list/FeatureListButtons';\nimport { FeatureListFilters } from '~/application/modules/pages/Feature/components/list/FeatureListFilters';\nimport { FeatureListTable } from '~/application/modules/pages/Feature/components/list/FeatureListTable';\nimport { observer } from 'mobx-react';\n\nexport const FeatureListRenderer: FeatureListRendererComponent = observer(\n  ({\n    wrapper: Wrapper = FeatureListWrapper,\n    header: Header = FeatureListHeader,\n    container: Container = FeatureListContainer,\n    title: Title = FeatureListTitle,\n    buttons: Buttons = FeatureListButtons,\n    filters: Filters = FeatureListFilters,\n    table: Table = FeatureListTable,\n    pagination: Pagination = FeatureListPagination,\n    footer: Footer = FeatureListFooter,\n  }) => {\n    return (\n      <Wrapper>\n        <Header />\n\n        <Container\n          title={Title}\n          buttons={Buttons}\n          filters={Filters}\n          pagination={Pagination}\n        >\n          <Table />\n        </Container>\n\n        <Footer />\n      </Wrapper>\n    );\n  }\n);\n\nexport type FeatureListRendererComponent = FC<\n  Partial<FeatureListRendererProps>\n>;\n\nexport type FeatureListRendererProps = Record<\n  | 'wrapper'\n  | 'header'\n  | 'title'\n  | 'buttons'\n  | 'filters'\n  | 'table'\n  | 'pagination'\n  | 'footer',\n  FC\n> & {\n  container: FC<FeatureListRendererContainerProps>;\n};\n\nexport type FeatureListRendererContainerProps = {\n  title: FC;\n  buttons: FC;\n  filters: FC;\n  pagination: FC;\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { TableCell, TableSortLabel } from '@material-ui/core';\nimport { useFeature } from '~/application/utils/hooks';\nimport { SortDir } from '~/application/modules/pages/Feature/types';\nimport { observer } from 'mobx-react';\nimport classNames from 'classnames';\nimport styles from './styles.module.scss';\n\ninterface IProps {\n  field: FeatureField<any>;\n}\n\nconst FeatureListTheadItem: FC<IProps> = observer(({ field }) => {\n  const feature = useFeature();\n  const sortable = field.options.features?.sort;\n\n  const onSortChange = useCallback(() => {\n    const { sortDir, sortBy } = feature.filters;\n\n    if (sortBy === field.name) {\n      feature.filters.sortDir =\n        sortDir === SortDir.ASC ? SortDir.DESC : undefined;\n\n      if (sortDir === SortDir.DESC) {\n        feature.filters.sortBy = undefined;\n      }\n\n      return;\n    }\n\n    feature.filters.sortDir = SortDir.ASC;\n    feature.filters.sortBy = field.name.toString();\n  }, [feature.filters, field]);\n\n  const { sortDir, sortBy } = feature.filters;\n\n  return (\n    <TableCell\n      className={classNames(\n        'feature-list__table-head-field',\n        `feature-list__table-head-field_${field.name}`,\n        styles.thead\n      )}\n    >\n      <div className={styles.label}>\n        {sortable ? (\n          <TableSortLabel\n            active={sortBy === field.name}\n            direction={sortDir}\n            onClick={onSortChange}\n          >\n            <field.ListHead />\n          </TableSortLabel>\n        ) : (\n          <field.ListHead />\n        )}\n      </div>\n    </TableCell>\n  );\n});\n\nexport { FeatureListTheadItem };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { useFeature } from '~/application/utils/hooks';\nimport { FeatureListTheadItem } from '~/application/modules/pages/Feature/components/list/FeatureListTheadItem';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\nimport { FeatureListEmptyRows } from '~/application/modules/pages/Feature/components/list/FeatureListEmptyRows';\nimport {\n  Paper,\n  Table,\n  TableBody,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport { FeatureListRow } from '~/application/modules/pages/Feature/components/list/FeatureListRow';\nimport { toJS } from 'mobx';\n\ninterface IProps {}\n\nconst FeatureListTable: FC<IProps> = observer(() => {\n  const feature = useFeature();\n\n  const {\n    data: { isLoading, list },\n    filters: { rows },\n  } = feature;\n\n  return (\n    <TableContainer\n      component={Paper}\n      className={styles.container}\n      elevation={0}\n    >\n      <Table\n        className={classNames(styles.table, 'feature-list__table')}\n        stickyHeader\n        size=\"medium\"\n      >\n        <TableHead>\n          <TableRow className=\"feature-list__table-head-row\">\n            {feature.fieldsOfCurrentMode.map((field) => (\n              <FeatureListTheadItem field={field} key={field.name.toString()} />\n            ))}\n          </TableRow>\n        </TableHead>\n\n        <TableBody>\n          {isLoading && (\n            <FeatureListEmptyRows\n              rows={rows}\n              cols={feature.fieldsOfCurrentMode.length}\n            />\n          )}\n\n          {!isLoading &&\n            !!list &&\n            list.map((item: Record<string, any>, i: number) => (\n              <FeatureListRow values={item} key={`${item.id}-${i}`} />\n            ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n});\n\nexport { FeatureListTable };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useRef } from 'react';\nimport styles from './styles.module.scss';\nimport { useConfig } from '~/application/utils/hooks';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { observer } from 'mobx-react';\n\nconst Account: FC = observer(() => {\n  const ref = useRef<HTMLDivElement>(null);\n  const config = useConfig();\n  const onLogout = useCallback(() => {\n    if (!window.confirm('Вы действительно хотите выйте?')) return;\n    config.auth?.logout();\n  }, [config.auth]);\n\n  return (\n    <div className={styles.account} ref={ref}>\n      <div className={styles.left}>\n        <div className={styles.name}>{config.auth?.userName}</div>\n        <div className={styles.role}>{config.auth?.userRoleTitle}</div>\n      </div>\n      <div className={styles.logout} onClick={onLogout}>\n        <ExitToAppIcon />\n      </div>\n    </div>\n  );\n});\n\nexport { Account };\n","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"styles_label__KD7z6\",\"value\":\"styles_value__3pAYH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter\":\"styles_filter__1yXQa\",\"close\":\"styles_close__XL_2y\",\"input\":\"styles_input__qUfY9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__1SImv\",\"navigation\":\"styles_navigation__1Ip7K\",\"wrapper\":\"styles_wrapper__3TBOz\",\"MuiButton-root\":\"styles_MuiButton-root__3RMlU\",\"MuiOutlinedInput-root\":\"styles_MuiOutlinedInput-root__1gJMF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__2zNiX\",\"error\":\"styles_error__1cqgS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"thead\":\"styles_thead__1lJPg\",\"label\":\"styles_label__386Ci\",\"filter\":\"styles_filter__1LNqG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1mjDW\",\"table\":\"styles_table__jvbo5\",\"wrapper\":\"styles_wrapper__3vG5E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"datepicker\":\"styles_datepicker__15SLv\",\"control\":\"styles_control__3f3bt\"};","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { Application } from './common/Application';\nexport { Config } from './config/Config';\nexport { Page } from './pages/Page';\nexport { PageRenderer } from './pages/Page/components/PageRenderer';\n\nexport { Feature } from './pages/Feature';\nexport * from './pages/Feature/filters';\nexport * from './pages/Feature/fields';\nexport * from './pages/Feature/components';\nexport * from './pages/Feature/items';\n\nexport { Entity } from './pages/Entity';\nexport * from './pages/Entity/components';\nexport * from './pages/Entity/types';\n\nexport * from './auth';\n","var map = {\n\t\"./en/buttons.json\": 494,\n\t\"./en/common.json\": 495,\n\t\"./en/messages.json\": 496,\n\t\"./ru/buttons.json\": 497,\n\t\"./ru/common.json\": 498,\n\t\"./ru/messages.json\": 499\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 345;","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useEffect } from 'react';\nimport { Page } from '~/application/modules/pages/Page';\nimport { observer } from 'mobx-react';\nimport { Helmet } from \"react-helmet\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface IProps {\n  page: Page;\n}\n\nconst PageRenderer: FC<IProps> = observer(({page}) => {\n  const {t} = useTranslation();\n  useEffect(() => {\n    if (page.onMount) page.onMount(page);\n\n    return () => {\n      if (page.onUnmount) page.onUnmount(page);\n    };\n  }, [page]);\n\n  return (\n    <div className=\"renderer\" style={{height: '100%'}}>\n      <Helmet>\n        <title>{t(page.title)}</title>\n      </Helmet>\n      <page.output/>\n    </div>\n  );\n});\n\nexport { PageRenderer };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Feature, IPageProps, UserRole } from '~/application';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields';\nimport { FeatureRendererProps } from '~/application/modules/pages/Feature/types/renderer';\nimport { FeatureRenderer } from '~/application/modules/pages/Feature/items';\nimport { FeatureApiProps } from '~/application/modules/pages/Feature/types/api';\n\nexport enum FeatureMode {\n  list = 'list',\n  read = 'read',\n  update = 'update',\n  create = 'create',\n}\n\nexport enum FeatureFeature {\n  list = 'list',\n  read = 'read',\n  update = 'update',\n  create = 'create',\n  delete = 'delete',\n  export = 'export',\n}\n\nexport type FeatureFeatures = Partial<Record<FeatureFeature, boolean>>;\n\nexport interface FeatureOptions<\n  Fields extends Record<string, any> = Record<string, any>\n> extends Partial<IPageProps> {\n  getItemTitle?: (fields: Fields) => string;\n\n  fields: FeatureField<Fields>[];\n  features: FeatureFeatures;\n  containers?: FeatureRendererProps['containers'];\n  components?: FeatureRendererProps['components'];\n\n  renderer: FeatureRenderer<Feature<Fields>>;\n  api?: FeatureApiProps<Fields>;\n\n  permissions?: Partial<Record<FeatureFeature, UserRole[]>>;\n  rows?: number;\n}\n\nexport enum SortDir {\n  ASC = 'asc',\n  DESC = 'desc',\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { DateFilter } from './DateFilter';\nexport { SelectFilter } from './SelectFilter';\nexport { StringFilter } from './StringFilter';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { FeatureApi } from './FeatureApi';\nexport { FeatureController } from './FeatureController';\nexport { FeatureData } from './FeatureData';\nexport { FeatureFilters } from './FeatureFilters';\nexport { FeatureRenderer } from './FeatureRenderer';\n\nexport type { GetReferenceAll } from './FeatureApi/references';\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport { AuthProvider } from './AuthProvider';\nexport { JWTAuthProvider } from './JWTAuthProvider';\nexport * from './JWTAuthProvider/types';\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  AUTH_ERRORS,\n  AuthProviderUser,\n  EMPTY_USER,\n  UNAUTHORIZED,\n  WithTokenFunction,\n} from '~/application/types/auth';\nimport { action, computed, flow, observable, reaction } from 'mobx';\nimport { AuthProvider } from '../AuthProvider';\nimport { Unwrap } from '~/application/types/common';\nimport { IJWTAuthProviderProps } from '~/application/modules/auth/JWTAuthProvider/types';\n\nconst EMPTY_TOKENS = {\n  access: '',\n  refresh: '',\n};\n\nexport class JWTAuthProvider extends AuthProvider {\n  @observable tokens: Record<string, string> = EMPTY_TOKENS;\n  @observable authRequestFn?: IJWTAuthProviderProps['authRequestFn'];\n  @observable tokenRefreshFn?: IJWTAuthProviderProps['tokenRefreshFn'];\n\n  constructor(fields?: Partial<IJWTAuthProviderProps>) {\n    super(fields);\n\n    if (this.persist) {\n      const { user, tokens } = this.getPersistedCredentials();\n\n      if (user) {\n        this.user = user;\n      }\n\n      if (tokens) {\n        this.tokens = tokens;\n      }\n\n      reaction(() => this.tokens, this.persistTokens);\n      reaction(() => this.user, this.persistCredentials);\n    }\n  }\n\n  @action\n  sendAuthRequest = (email: string, password: string) => {\n    this.sendAuthRequestCancel();\n\n    this.sendAuthRequestInstance = flow(function* sendAuthRequest(\n      this: JWTAuthProvider\n    ) {\n      if (!this.authRequestFn) return;\n\n      this.isLoading = true;\n\n      try {\n        const response: Unwrap<typeof this.authRequestFn> = yield this.authRequestFn(\n          email,\n          password\n        );\n\n        if (!response || response.error) {\n          this.parent?.notifications.showError(\n            response?.error || AUTH_ERRORS.CANT_LOGIN\n          );\n          throw new Error(response?.error);\n        }\n\n        this.parent?.notifications.hideNotification();\n        this.user = response.user;\n        this.tokens = response.tokens;\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  sendAuthRequestCancel = () => {\n    if (this.sendAuthRequestInstance && this.sendAuthRequestInstance.cancel) {\n      this.sendAuthRequestInstance.cancel();\n    }\n  };\n\n  @action\n  logout = () => {\n    this.logoutCancel();\n\n    this.logoutInstance = flow(function* sendAuthRequest(\n      this: JWTAuthProvider\n    ) {\n      if (!this.authLogoutFn) {\n        this.user = EMPTY_USER;\n        this.tokens = EMPTY_TOKENS;\n        return;\n      }\n\n      this.isLoading = true;\n\n      try {\n        const response = yield this.withToken(this.authLogoutFn, {token: this.tokens.refresh}).catch(\n          () => null\n        );\n\n        if (!response || response.error) {\n          throw new Error(response.error);\n        }\n\n        this.user = EMPTY_USER;\n        this.tokens = EMPTY_TOKENS;\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.toString());\n      } finally {\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  tokenRefreshInstance?: any;\n\n  @action\n  withToken: WithTokenFunction = async (req: any, args: any) => {\n    return await req({\n      ...args,\n      token: `Bearer ${this.tokens.access}`,\n    })\n      .then((result: any) => {\n        if (result?.error === UNAUTHORIZED) {\n          throw new Error(UNAUTHORIZED);\n        }\n\n        return result;\n      })\n      .catch(async (e: Error) => {\n        if (e.message !== UNAUTHORIZED) {\n          throw new Error(e.message);\n        }\n\n        if (!this.tokenRefreshFn) {\n          console.warn('tokenRefreshFn not specified');\n          throw new Error(e.message);\n        }\n\n        // If there's other updater, wait for it\n        if (!this.tokenRefreshInstance) {\n          this.tokenRefreshInstance = flow(function* (this: JWTAuthProvider) {\n            if (!this.tokenRefreshFn) return { access: '', refresh: '' };\n\n            return yield this.tokenRefreshFn(this.tokens.refresh);\n          }).bind(this)();\n\n          const tokens = await this.tokenRefreshInstance;\n\n          this.tokens = {\n            access: tokens.access || '',\n            refresh: tokens.refresh,\n          };\n\n          this.tokenRefreshInstance = null;\n        } else {\n          await this.tokenRefreshInstance;\n        }\n\n        if (this.tokens.access && this.tokens.refresh) {\n          return await req({\n            ...args,\n            token: `Bearer ${this.tokens.access}`,\n          });\n        }\n\n        this.user = EMPTY_USER;\n        this.tokens = EMPTY_TOKENS;\n      });\n  };\n\n  getPersistedCredentials = (): {\n    user?: AuthProviderUser;\n    tokens?: Record<string, string>;\n  } => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n\n      if (typeof user != 'object') return {};\n\n      return { user, tokens };\n    } catch (e) {\n      return {};\n    }\n  };\n\n  persistCredentials = () => {\n    localStorage.setItem('user', JSON.stringify(this.user));\n  };\n\n  persistTokens = () => {\n    localStorage.setItem('tokens', JSON.stringify(this.tokens));\n  };\n\n  @computed\n  get isLogged() {\n    return !!this.tokens.access;\n  }\n\n  @computed\n  get token() {\n    return `Bearer ${this.tokens.access}`;\n  }\n}\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './auth';\nexport * from './config';\nexport * from './page';\n\nexport * from '../modules/pages/Entity/types';\nexport * from '../modules/pages/Feature/types';\nexport {\n  ENTITY_ERRORS,\n  ENTITY_ACTIONS,\n  ENTITY_FILTER_TYPES,\n  ENTITY_SORT_DIRS,\n  ENTITY_REFERENCE_FIELDS,\n  ENTITY_FIELD_RENDERS,\n  getEntityFieldRenderer\n} from \"~/application/modules/pages/Entity/constants\";\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport * from './hooks';\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { ChangeEvent, useCallback, useState, } from 'react';\nimport { Box, Button, FormControl, OutlinedInput, WithStyles, withStyles, } from '@material-ui/core';\nimport ImageIcon from '@material-ui/icons/Image';\nimport styles from './styles';\nimport { IEntityFieldProps } from '~/application';\nimport { useTranslation } from \"react-i18next\";\n\ntype IProps = IEntityFieldProps & WithStyles<typeof styles> & {};\n\nconst EntityFieldBase64Image = withStyles(styles)(\n  ({\n     classes,\n     label,\n     value,\n     handler,\n     error,\n     isEditing,\n     onClick,\n     options,\n   }: IProps) => {\n    const [innerError, setInnerError] = useState('');\n    const {t} = useTranslation();\n\n    const getBase64 = useCallback((file: File): Promise<string> => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result?.toString() || '');\n        reader.onerror = (error) => reject(error);\n      });\n    }, []);\n\n    const loadImage = useCallback(\n      async (e: ChangeEvent<HTMLInputElement>) => {\n        if (!handler) return;\n        if (!e.target.files) return;\n\n        setInnerError('');\n\n        const file = e.target.files[0];\n\n        if (!file) return;\n\n        if (options?.maxSize && file.size > options.maxSize) {\n          setInnerError(t('The file is too big!'));\n          return;\n        }\n\n        if (options?.maxSize && file.size < options.minSize) {\n          setInnerError(t('The file is too small!'));\n          return;\n        }\n\n        if (\n          options?.allowedMimeType &&\n          !options.allowedMimeType.includes(file.type)\n        ) {\n          setInnerError(t('The file type is not supported!'));\n          return;\n        }\n\n        const photo: string = await getBase64(file);\n\n        const img = new Image();\n        img.src = photo;\n\n        img.onload = () => {\n          const {naturalWidth, naturalHeight} = img;\n\n          if (options && options.minViewBox) {\n            const minWidth = options.minViewBox.width;\n            const minHeight = options.minViewBox.height;\n\n            if (naturalWidth < minWidth || naturalHeight < minHeight) {\n              setInnerError(\n                t('Image size should not be less than {{width}}x{{height}} pixels', {\n                  width: minWidth,\n                  height: minHeight\n                })\n              );\n              return;\n            }\n          }\n\n          if (options?.maxViewBox) {\n            let maxWidth = options.maxViewBox.width;\n            let maxHeight = options.maxViewBox.height;\n            if (naturalWidth > maxWidth || naturalHeight > maxHeight) {\n              setInnerError(\n                t('The size of the picture should not be more than {{width}}x{{height}} pixels', {\n                  width: maxWidth,\n                  height: maxHeight\n                })\n              );\n              return;\n            }\n          }\n\n          handler(photo);\n        };\n      },\n      [handler, options, getBase64, t]\n    );\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n\n        handler(event.target.value);\n      },\n      [handler]\n    );\n\n    return isEditing ? (\n      <div>\n        <FormControl\n          variant=\"outlined\"\n          className={classes.formControl}\n          style={{position: 'relative'}}\n        >\n          <label htmlFor={label} className={classes.label}>\n            {value ? (\n              <div\n                className={classes.image}\n                style={{backgroundImage: `url('${value}')`}}\n              />\n            ) : (\n              ''\n            )}\n\n            <OutlinedInput\n              fullWidth\n              style={{\n                flexDirection: 'row-reverse',\n              }}\n              error={!!innerError || !!error}\n              className={classes.outlinedInput}\n              inputComponent={() => (\n                <Button\n                  name={label}\n                  startIcon={<ImageIcon fontSize={'large'}/>}\n                  variant=\"contained\"\n                  style={{\n                    display: 'flex',\n                    width: 150,\n                  }}\n                >\n                  <span>{t('Upload')}</span>\n                </Button>\n              )}\n            />\n            <input\n              id={label}\n              name={label}\n              type=\"file\"\n              onChange={loadImage}\n              style={{position: 'absolute'}}\n              accept={options && options.mimes ? options.mimes.join(', ') : ''}\n            />\n          </label>\n          {(innerError || error) && (\n            <Box color=\"error.main\" fontSize={12}>\n              {innerError || error}\n            </Box>\n          )}\n        </FormControl>\n      </div>\n    ) : (\n      <div onClick={onClick}>\n        <img alt=\"base64image\" src={value ? String(value) : ''} className={classes.preview}/>\n      </div>\n    );\n  }\n);\n\nexport { EntityFieldBase64Image };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  formControl: {\n    margin: `${theme.spacing(2)}px 0 ${theme.spacing(1)}px`,\n    minWidth: 120,\n\n    '& input': {\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      opacity: 0,\n    },\n  },\n  outlinedInput: {\n    minHeight: '56px',\n    alignItems: 'inherit',\n  },\n  label: {\n    display: 'flex',\n\n    '& > img': {\n      marginRight: '10px',\n    },\n  },\n  image: {\n    flex: '0 0 56px',\n    width: 56,\n    height: 56,\n    backgroundSize: 'cover',\n    backgroundPosition: '50% 50%',\n    backgroundColor: '#eeeeee',\n  },\n  preview: {\n    maxWidth: '100%',\n    maxHeight: 300,\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { IEntityFieldProps } from '~/application';\nimport { Checkbox, FormControlLabel } from '@material-ui/core';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldBoolean: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(() => {\n    if (!handler) return;\n\n    handler(!value);\n  }, [value, handler]);\n\n  return isEditing ? (\n    <FormControlLabel\n      control={<Checkbox onChange={onChange} checked={value || false} />}\n      label={label}\n    />\n  ) : (\n    <div onClick={onClick}>{!!value ? <CheckIcon /> : <ClearIcon />}</div>\n  );\n};\n\nexport { EntityFieldBoolean };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DatePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { formatISO, isValid } from 'date-fns';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDate: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler || !isValid(value)) return;\n      handler(value.toISOString());\n    },\n    [handler]\n  );\n\n  const parsedValue = useMemo(() => {\n    const date = parseISO(value);\n\n    return (date && isValid(date) && formatISO(date)) || null;\n  }, [value]);\n\n  return isEditing ? (\n    <div className=\"datepicker datepicker_date\">\n      <DatePicker\n        renderInput={(props) => (\n          <TextField\n            variant=\"outlined\"\n            {...props}\n            label={label}\n            helperText={error}\n            error={!!error}\n          />\n        )}\n        value={parsedValue}\n        onChange={onChange}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {parsedValue ? (\n        format(parseISO(parsedValue), 'dd.MM.yyyy')\n      ) : (\n        <div>&nbsp;</div>\n      )}\n    </div>\n  );\n};\n\nexport { EntityFieldDate };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DateRangePicker } from '@material-ui/pickers';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { isValid } from 'date-fns';\n\nimport { IEntityFieldProps } from '~/application';\nimport { ParsableDate } from '@material-ui/pickers/constants/prop-types';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDateRange: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  isFiltering,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler) return;\n\n      const filtered = value.map(\n        (val: Date) => (val && val.valueOf() && val.toISOString()) || ''\n      );\n\n      handler(filtered.join(','));\n    },\n    [handler]\n  );\n\n  const parsed = useMemo<[ParsableDate, ParsableDate]>(() => {\n    if (!value) return [null, null];\n\n    const split = value && value.split(',');\n\n    if (!split || split.length !== 2) return [null, null];\n\n    return split.map(\n      (date: string) => (isValid(new Date(date)) && parseISO(date)) || null\n    );\n  }, [value]);\n\n  if (!isFiltering) return null;\n\n  return (\n    <div className=\"datepicker datepicker_range\">\n      <DateRangePicker\n        mask=\"__.__.____\"\n        renderInput={(startProps, endProps) => (\n          <>\n            <TextField\n              {...startProps}\n              variant=\"outlined\"\n              helperText={label}\n              label=\"\"\n            />\n            <TextField\n              {...endProps}\n              variant=\"outlined\"\n              helperText=\"\"\n              label=\"\"\n            />\n          </>\n        )}\n        value={parsed}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport { EntityFieldDateRange };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { TextField } from '@material-ui/core';\nimport { formatISO, isValid } from 'date-fns';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldDateTime: FC<IProps> = ({\n  value,\n  handler,\n  label,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (value) => {\n      if (!value || !handler || !isValid(value)) return;\n      handler(value.toISOString());\n    },\n    [handler]\n  );\n\n  const parsedValue = useMemo(() => {\n    const date = parseISO(value);\n\n    return (date && isValid(date) && formatISO(date)) || null;\n  }, [value]);\n\n  return isEditing ? (\n    <div className=\"datepicker datepicker_datetime\">\n      <DateTimePicker\n        renderInput={(props) => (\n          <TextField\n            variant=\"outlined\"\n            {...props}\n            label={label}\n            helperText=\"\"\n          />\n        )}\n        value={parsedValue}\n        onChange={onChange}\n        ampm={false}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>\n      {parsedValue ? (\n        format(parseISO(parsedValue), 'dd.MM.yyyy HH:mm')\n      ) : (\n        <div>&nbsp;</div>\n      )}\n    </div>\n  );\n};\n\nexport { EntityFieldDateTime };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\nimport { isNil } from 'ramda';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldNumber: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options,\n  placeholder,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [value, handler]\n  );\n\n  const val =\n    (value &&\n      parseFloat(value) &&\n      parseFloat(parseFloat(value).toFixed(options?.accuracy || 6))) ||\n    0;\n\n  return isEditing ? (\n    <div>\n      <TextField\n        type=\"number\"\n        label={label}\n        value={isNil(value) ? '' : value}\n        onChange={onChange}\n        error={!!error}\n        helperText={error}\n        variant=\"outlined\"\n        inputProps={{ step: 'any' }}\n        placeholder={placeholder || ''}\n      />\n    </div>\n  ) : (\n    <div onClick={onClick}>{val || 0}</div>\n  );\n};\n\nexport { EntityFieldNumber };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport InputMask from 'react-input-mask';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldPhone: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value.replace(/[^\\d]/gim, ''));\n    },\n    [handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <InputMask\n        mask=\"+9 (999) 999-99-99\"\n        value={value ? value.toString() : ''}\n        onChange={onChange}\n      >\n        {() => (\n          <TextField\n            label={label}\n            error={!!error}\n            helperText={error}\n            variant=\"outlined\"\n          />\n        )}\n      </InputMask>\n    </div>\n  ) : (\n    <div onClick={onClick}>{value ? String(value) : <div>&nbsp;</div>}</div>\n  );\n};\n\nexport { EntityFieldPhone };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useEffect, useRef, useState } from 'react';\nimport { FormControl, FormHelperText, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldReferenceSelect: FC<IProps> = observer(\n  ({label, name, value, handler, error, isEditing, onClick, entity}) => {\n    const emptyNode = (<div>&nbsp;</div>)\n\n    if (!entity) {\n      return emptyNode\n    }\n\n    const options: Record<string, any> = entity.referenceData[name] ?? {};\n\n    // noinspection TypeScriptValidateTypes\n    const ref = useRef<HTMLLabelElement>(null);\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n        handler(event.target.value);\n      },\n      [handler]\n    );\n\n    const [labelWidth, setLabelWidth] = useState(0);\n\n    useEffect(() => {\n      setLabelWidth((ref.current && ref.current.clientWidth) || 0);\n    }, [ref]);\n\n    return isEditing ? (\n      <FormControl variant=\"outlined\">\n        <InputLabel htmlFor={name} error={!!error} style={{ whiteSpace: 'nowrap' }} ref={ref}>\n          {label}\n        </InputLabel>\n\n        <Select\n          variant=\"outlined\"\n          id={label}\n          name={name}\n          label={label}\n          value={!value ? '' : value}\n          onChange={onChange}\n          error={!!error}\n          inputProps={{className: 'select'}}\n          labelWidth={labelWidth}\n          style={{minWidth: labelWidth + 40}}\n        >\n          <MenuItem value=\"\">...</MenuItem>\n\n          {options &&\n          Object.keys(options).map((item) => (\n            <MenuItem key={item} value={item}>\n              {options[item]}\n            </MenuItem>\n          ))}\n        </Select>\n\n        <FormHelperText error={!!error}>{error}</FormHelperText>\n      </FormControl>\n    ) : (\n      <div onClick={onClick}>\n        {(options && options[value]) || emptyNode}\n      </div>\n    );\n  }\n);\n\nexport { EntityFieldReferenceSelect };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useState, useEffect } from 'react';\nimport MUIRichTextEditor from 'mui-rte';\nimport { convertFromHTML } from 'draft-js';\nimport { convertToRaw, ContentState } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldRichText: FC<IProps> = ({\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n}) => {\n  const [val, setVal] = useState('');\n\n  useEffect(() => {\n    const contentHTML = convertFromHTML(value || '');\n    const state = ContentState.createFromBlockArray(\n      contentHTML.contentBlocks,\n      contentHTML.entityMap\n    );\n\n    setVal(JSON.stringify(convertToRaw(state)));\n  }, [value]);\n\n  const onChange = useCallback(\n    (data) => {\n      if (!handler) return;\n      const text = draftToHtml(convertToRaw(data.getCurrentContent()));\n      handler(text || '');\n    },\n    [handler]\n  );\n\n  return isEditing ? (\n    <div>\n      <MUIRichTextEditor\n        label={label}\n        value={val || ''}\n        onChange={onChange}\n        error={!!error}\n        controls={[\n          'title',\n          'bold',\n          'italic',\n          'underline',\n          'strikethrough',\n          'undo',\n          'redo',\n          'numberList',\n          'bulletList',\n          'quote',\n          'clear',\n        ]}\n      />\n    </div>\n  ) : (\n    (value && (\n      <div onClick={onClick} dangerouslySetInnerHTML={{ __html: value }} />\n    )) || <div>&nbsp;</div>\n  );\n};\n\nexport { EntityFieldRichText };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useRef, useEffect, useState } from 'react';\nimport { Select, MenuItem, FormControl, InputLabel, FormHelperText } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldSelect: FC<IProps> = ({\n  name,\n  label,\n  value,\n  handler,\n  error,\n  isEditing,\n  onClick,\n  options\n}) => {\n  const onChange = useCallback(\n    (event) => {\n      if (!handler) return;\n\n      handler(event.target.value);\n    },\n    [handler]\n  );\n\n  // noinspection TypeScriptValidateTypes\n  const ref = useRef<HTMLLabelElement>(null);\n  const [labelWidth, setLabelWidth] = useState(0);\n\n  useEffect(() => {\n    setLabelWidth((ref.current && ref.current.clientWidth) || 0);\n  }, [ref]);\n\n  return isEditing ? (\n    <FormControl variant=\"outlined\">\n      <InputLabel htmlFor={name} error={!!error} style={{ whiteSpace: 'nowrap' }} ref={ref}>\n        {label}\n      </InputLabel>\n\n      <Select\n        variant=\"outlined\"\n        id={label}\n        name={name}\n        value={!value ? '' : value}\n        onChange={onChange}\n        error={!!error}\n        inputProps={{ className: 'select' }}\n        labelWidth={labelWidth}\n        style={{ minWidth: labelWidth + 40 }}\n      >\n        <MenuItem value=\"\">...</MenuItem>\n\n        {options &&\n          Object.keys(options).map((item) => (\n            <MenuItem key={item} value={item}>\n              {options[item]}\n            </MenuItem>\n          ))}\n      </Select>\n\n      <FormHelperText error={!!error}>{error}</FormHelperText>\n    </FormControl>\n  ) : (\n    <div onClick={onClick}>\n      {(options && options[value]) || <div>&nbsp;</div>}\n    </div>\n  );\n};\n\nexport { EntityFieldSelect };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { TextField } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\nimport { observer } from 'mobx-react';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldString: FC<IProps> = observer(\n  ({ label, value, handler, error, isEditing, onClick, placeholder }) => {\n    const text = useMemo(\n      () =>\n        (value &&\n          value\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(\n              /(\\b(https?|ftp|file):\\/\\/([-A-Z0-9+&@#%?=~_|!:,.;]*)([-A-Z0-9+&@#%?\\/=~_|!:,.;]*)[-A-Z0-9+&@#\\/%=~_|])/gi,\n              '<a href=\"$1\" target=\"blank\" rel=\"nofollow\">$1</a>'\n            )) ||\n        '',\n      [value]\n    );\n\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n\n        handler(event.target.value);\n      },\n      [handler]\n    );\n\n    return isEditing ? (\n      <div>\n        <TextField\n          label={label}\n          value={value || ''}\n          onChange={onChange}\n          error={!!error}\n          helperText={error}\n          variant=\"outlined\"\n          placeholder={placeholder || ''}\n        />\n      </div>\n    ) : (\n      <div\n        onClick={onClick}\n        dangerouslySetInnerHTML={{ __html: text ? String(text) : '&nbsp;' }}\n      />\n    );\n  }\n);\n\nexport { EntityFieldString };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { useCallback } from 'react';\nimport { TextField, WithStyles, withStyles } from '@material-ui/core';\nimport styles from './styles';\n\ntype IProps = WithStyles<typeof styles> & {\n  label: string;\n  value: any;\n  onChange: (val: any) => void;\n} & Record<string, any>;\n\nconst EntityFilterText = withStyles(styles)(\n  ({ classes, label, value, onChange }: IProps) => {\n    const onInput = useCallback((event) => onChange(event.target.value), [\n      onChange,\n    ]);\n\n    return (\n      <TextField\n        onChange={onInput}\n        value={value}\n        name=\"field\"\n        label={label}\n        variant=\"outlined\"\n        className={classes.input}\n        autoFocus\n      />\n    );\n  }\n);\n\nexport { EntityFilterText };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  input: {\n    '& input': {\n      padding: '10px 14px 7px',\n    },\n    '& label': {\n      transform: 'translate(10px, 12px) scale(0.9)',\n    },\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { TextField } from '@material-ui/core';\nimport { IEntityFieldProps } from '~/application';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\n\ntype IProps = IEntityFieldProps & {};\n\nconst EntityFieldTextarea: FC<IProps> = observer(\n  ({label, value, handler, error, isEditing, onClick, placeholder}) => {\n    const onChange = useCallback(\n      (event) => {\n        if (!handler) return;\n\n        handler(event.target.value);\n      },\n      [value, handler]\n    );\n\n    return isEditing ? (\n      <div>\n        <TextField\n          multiline\n          label={label}\n          value={value || ''}\n          onChange={onChange}\n          error={!!error}\n          helperText={error}\n          variant=\"outlined\"\n          placeholder={placeholder || ''}\n        />\n      </div>\n    ) : (\n      <pre\n        onClick={onClick}\n        className={styles.pre}\n      >\n        {value ? value.replace(/(<([^>]+)>)/gi, '') : ''}\n      </pre>\n    );\n  }\n);\n\nexport { EntityFieldTextarea };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback, useEffect, useMemo, useRef } from 'react';\nimport styles from './styles';\nimport {\n  AppBar,\n  Tab,\n  Tabs,\n  Toolbar,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Account } from '~/containers/auth/Account';\nimport classnames from 'classnames';\nimport { useLocation } from 'react-router';\nimport { useConfig } from '~/application/utils/hooks';\nimport { useTranslation } from \"react-i18next\";\n\ntype IProps = WithStyles<typeof styles> & {};\n\nconst HorizontalNavigationUnstyled: FC<IProps> = ({ classes }) => {\n  const config = useConfig();\n  const {t} = useTranslation();\n  const history = useHistory();\n  const location = useLocation();\n  const wrapper = useRef<HTMLDivElement>(null);\n  const appbar = useRef<HTMLDivElement>(null);\n\n  let links: { name: string; url: string }[];\n  links = useMemo(\n    () =>\n      config.pages\n        .filter((page) => page?.menu?.url && page.canList)\n        .map((page) => ({\n          name: t(page.menu.label),\n          url: page.menu.url,\n        })),\n    [config.pages, t]\n  );\n\n  const onTabChange = useCallback((_, tab) => history.push(links[tab].url), [\n    history,\n  ]);\n\n  const activeTab = useMemo(() => {\n    const active = links.findIndex((link) => {\n      const re = new RegExp(`${link.url.replace(/\\//gim, '\\\\/')}`);\n      return location.pathname.match(re);\n    });\n\n    return active >= 0 ? active : 0;\n  }, [location]);\n\n  useEffect(() => {\n    if (!appbar.current || !wrapper.current) return;\n\n    const height = appbar.current.getBoundingClientRect().height;\n\n    if (!height) return;\n\n    wrapper.current.style.height = `${height}px`;\n  }, [appbar.current, wrapper.current]);\n\n  return (\n    <div ref={wrapper}>\n      <AppBar className={classes.appbar} ref={appbar}>\n        <Toolbar className={classes.toolbar}>\n          <div className={classnames('logo', classes.title)}>\n            {config.logo && (\n              <Link to=\"/\">\n                <img\n                  src={config.logo}\n                  title={config.title}\n                  className={classes.logo}\n                  alt={config.title}\n                />\n              </Link>\n            )}\n          </div>\n\n          <Tabs\n            onChange={onTabChange}\n            value={activeTab}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            aria-label=\"scrollable auto tabs example\"\n            className={classes.tabs}\n          >\n            {links.map(({ name, url }) => (\n              <Tab label={name} key={url} className={classes.tab} />\n            ))}\n          </Tabs>\n\n          <div className={classes.account}>{!!config.auth && <Account />}</div>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nconst HorizontalNavigation = withStyles(styles, { withTheme: true })(\n  HorizontalNavigationUnstyled\n);\n\nexport { HorizontalNavigation };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme, createStyles } from '@material-ui/core';\n\nexport default (theme: Theme) =>\n  createStyles({\n    appbar: {\n      backgroundColor: '#fff',\n      height: '78px',\n      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n    },\n    toolbar: {\n      height: '78px',\n\n      '& .MuiTabs-scrollButtons svg': {\n        fill: theme.palette.primary.main,\n      },\n\n      '@media(max-width: 640px)': {\n        '& .logo': {\n          display: 'none',\n        },\n      },\n    },\n    title: {\n      // marginLeft: theme.spacing(2),\n      flexGrow: 1,\n    },\n    links: {\n      height: '100%',\n      display: 'flex',\n      alignItems: 'center',\n    },\n    logo: {\n      maxHeight: 54,\n    },\n    tab: {\n      height: '100%',\n      fontWeight: 500,\n      fontSize: '12px',\n      lineHeight: '14px',\n    },\n    tabs: {\n      height: '100%',\n      '& a': {\n        minWidth: 0,\n      },\n      '& .MuiTabs-flexContainer': {\n        height: '100%',\n      },\n      '& .MuiTab-root': {\n        minWidth: 'auto',\n        padding: '2px 16px',\n      },\n    },\n    link: {\n      color: '#a5b0bf',\n      fontSize: '12px',\n      fontWeight: 500,\n      textTransform: 'uppercase',\n      textDecoration: 'none',\n      padding: '0 16px',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n\n      '&.active': {\n        color: '#282f36',\n\n        '&::after': {\n          content: '\"\"',\n          position: 'absolute',\n          height: '2px',\n          width: '100%',\n          backgroundColor: theme.palette.primary.main,\n          left: 0,\n          bottom: '-30px',\n        },\n      },\n    },\n    account: {\n      color: 'black',\n      margin: '0 0 0 20px',\n      height: '100%',\n      display: 'flex' as 'flex',\n    },\n  });\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport { HorizontalNavigation } from '~/containers/layout/HorizontalNavigation';\nimport styles from './styles.module.scss';\nimport classNames from 'classnames';\n\ninterface IProps {}\n\nconst HorizontalLayout: FC<IProps> = observer(({ children }) => {\n  return (\n    <div className={classNames(styles.layout, 'horizontal-layout')}>\n      <div\n        className={classNames(\n          styles.navigation,\n          'horizontal-layout__navigation'\n        )}\n      >\n        <HorizontalNavigation />\n      </div>\n\n      <div className={classNames(styles.wrapper, 'horizontal-layout__wrapper')}>\n        {children}\n      </div>\n    </div>\n  );\n});\n\nexport { HorizontalLayout };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\n\ninterface IProps {}\n\nconst AuthCenteredLayout: FC<IProps> = observer(({ children }) => (\n  <div>{children}</div>\n));\n\nexport { AuthCenteredLayout };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC, useCallback } from 'react';\nimport { Snackbar } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { INotification } from '~/application/types/notification';\n\ninterface IProps {\n  hideNotification: () => void;\n  show: INotification['show'];\n  type: INotification['type'];\n  message: INotification['message'];\n  timeout: INotification['timeout'];\n}\n\nconst Notification: FC<IProps> = ({\n  hideNotification,\n  show,\n  type,\n  message,\n  timeout,\n}) => {\n  const onClose = useCallback(\n    (...args) => {\n      hideNotification();\n    },\n    [hideNotification]\n  );\n\n  return (\n    <Snackbar\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      key=\"bottom,left\"\n      open={show}\n      onClose={onClose}\n      autoHideDuration={timeout}\n    >\n      <Alert\n        elevation={6}\n        variant=\"filled\"\n        onClose={onClose}\n        severity={type || 'info'}\n      >\n        {message}\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport { Notification };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { action, computed, observable } from 'mobx';\nimport { INotification } from '~/application/types/notification';\nimport { observer } from 'mobx-react';\nimport { Notification } from '~/containers/common/Notification';\n\nexport class Notifications {\n  @observable notification: INotification = {\n    show: false,\n    message: '',\n    type: 'info',\n    timeout: 6000,\n  };\n\n  @action\n  hideNotification = () => {\n    this.notification.show = false;\n  };\n\n  @action\n  showError = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'error';\n  };\n\n  @action\n  showSuccess = (message: INotification['message']) => {\n    this.notification.show = true;\n    this.notification.message = message;\n    this.notification.type = 'success';\n  };\n\n  @computed\n  get Output() {\n    return observer(() => (\n      <Notification\n        hideNotification={this.hideNotification}\n        message={this.notification.message}\n        type={this.notification.type}\n        timeout={this.notification.timeout}\n        show={this.notification.show}\n      />\n    ));\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { ThemeOptions } from '@material-ui/core/styles';\n\nexport const DEFAULT_THEME: ThemeOptions = {\n  palette: {},\n  typography: {\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", \"sans-serif\"',\n  },\n  shape: {\n    borderRadius: 4,\n  },\n};\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IConfigProps } from '~/application/types/config';\nimport { createBrowserHistory } from 'history';\nimport { Notifications } from '../../common/Notification';\nimport createMuiTheme, {\n  ThemeOptions,\n} from '@material-ui/core/styles/createMuiTheme';\nimport { computed, observable } from 'mobx';\nimport { DEFAULT_THEME } from '~/utils/theme';\nimport { FC } from 'react';\nimport { VerticalLayout } from '~/application/layouts/application/VerticalLayout';\nimport { DEFAULT_LANGUAGES } from '~/i18n';\n\nexport class Config {\n  constructor(options?: Partial<IConfigProps>) {\n    if (options) {\n      Object.assign(this, options);\n    }\n\n    if (this.pages.length) {\n      this.pages.forEach((page) => {\n        page.parent = this;\n      });\n    }\n\n    if (this.auth) {\n      this.auth.parent = this;\n    }\n\n    if (options?.theme)\n      this.themeInstance = createMuiTheme({\n        ...DEFAULT_THEME,\n        ...options.theme,\n      });\n\n    if (options?.layout) {\n      this.layout = options.layout;\n    }\n\n    this.host = options?.host;\n  }\n\n  @observable debug: boolean = process.env.NODE_ENV !== 'production';\n  @observable host?: string;\n  @observable name: IConfigProps['name'] = '';\n  @observable pages: IConfigProps['pages'] = [];\n  @observable auth?: IConfigProps['auth'];\n  @observable logo?: IConfigProps['logo'];\n  @observable title?: IConfigProps['title'];\n  @observable i18nDefaultLanguage: IConfigProps['i18nDefaultLanguage'] = 'en';\n  @observable i18nLanguages: IConfigProps['i18nLanguages'] = DEFAULT_LANGUAGES;\n  @observable\n  i18nUseBrowserLanguageDetector: IConfigProps['i18nUseBrowserLanguageDetector'] = true;\n  @observable\n  i18nResourcesContext: IConfigProps['i18nResourcesContext'] = require.context(\n    '~/locales',\n    true,\n    /\\.json$/\n  );\n  @observable theme: ThemeOptions = {};\n  @observable history = createBrowserHistory();\n  @observable notifications = new Notifications();\n  @observable themeInstance = createMuiTheme(DEFAULT_THEME);\n  @observable layout: FC = VerticalLayout;\n\n  @computed\n  get pagesForCurrentUser() {\n    return this.pages.filter((page) => page?.menu?.url && page.canList);\n  }\n\n  @computed\n  get linksForCurrentUser() {\n    return this.pagesForCurrentUser.map((page) => ({\n      name: page.menu.label,\n      url: page.menu.url,\n      enabled: page.menu.enabled,\n      childFields: page.menu.childFields,\n    }));\n  }\n\n  @computed\n  get fallbackUrl() {\n    return (\n      (this.linksForCurrentUser?.length > 0 &&\n        this.linksForCurrentUser[0].url) ||\n      '/'\n    );\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\n\ninterface IProps {}\n\nconst EntityListWrapper: FC<IProps> = observer(({ children }) => (\n  <div className={styles.wrap}>{children}</div>\n));\n\nexport { EntityListWrapper };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { Fragment, ReactElement } from 'react';\nimport {\n  ENTITY_ERRORS,\n  ENTITY_REFERENCE_FIELDS,\n  ENTITY_SORT_DIRS,\n  IEntityCreateFunctionResult,\n  IEntityFetchFunctionResult,\n  IEntityField,\n  IEntityGetFunctionResult,\n  IEntityProps,\n  IEntityUpdateFunctionResult,\n  IFilterValue,\n} from '~/application';\nimport { action, computed, flow, observable, reaction, toJS } from 'mobx';\nimport { CancellablePromise } from 'mobx/lib/api/flow';\nimport { Route, RouteComponentProps, Switch } from 'react-router-dom';\nimport { observer, Provider } from 'mobx-react';\nimport { EntityViewer } from '~/application/modules/pages/Entity/components/EntityViewer';\nimport { EntityBreadcrumbs } from '~/application/modules/pages/Entity/components/EntityBreadcrumbs';\nimport { Typography } from '@material-ui/core';\nimport { saveAs } from 'file-saver';\nimport { parseQuery } from '~/utils/query';\nimport { Page } from '~/application/modules/pages/Page';\nimport { EntityList } from '~/application/modules/pages/Entity/components/EntityList';\nimport { EntityHead } from '~/application/modules/pages/Entity/components/EntityHead';\nimport { EntityFooter } from '~/application/modules/pages/Entity/components/EntityFooter';\nimport { EntityListWrapper } from '~/application/modules/pages/Entity/components/EntityListWrapper';\nimport i18n from \"~/i18n\";\n\nexport class Entity extends Page {\n  // Props\n  @observable api: IEntityProps['api'] = {\n    list: { url: '/', method: 'get' },\n  };\n  @observable fields: IEntityProps['fields'] = [];\n  @observable filters: IEntityProps['filters'] = [];\n  @observable editable: IEntityProps['editable'] = false;\n  @observable viewable: IEntityProps['viewable'] = false;\n  @observable creatable: IEntityProps['creatable'] = false;\n  @observable exportable: IEntityProps['exportable'] = false;\n  @observable selectable: IEntityProps['selectable'] = false;\n  @observable getItemsFn: IEntityProps['getItemsFn'] = undefined;\n  @observable fetchItemsFn: IEntityProps['fetchItemsFn'] = undefined;\n  @observable updateItemsFn: IEntityProps['updateItemsFn'] = undefined;\n  @observable createItemsFn: IEntityProps['createItemsFn'] = undefined;\n  @observable references: IEntityProps['references'] = {};\n  @observable referenceData: Record<string, any> = {};\n  @observable itemsPerPage: number[] = [5, 10, 15, 25, 50];\n  @observable items: IEntityProps['items'] =\n    this.itemsPerPage[this.itemsPerPage.length] || 50;\n  @observable permissions: IEntityProps['permissions'] = {};\n  // Built-in\n  @observable isLoading: boolean = true;\n  @observable totalCount: number = 0;\n  @observable page: number = 0;\n  @observable data: Record<string, any>[] = [];\n  @observable error?: string | null;\n  @observable sortBy: string = '';\n  @observable sortDir: typeof ENTITY_SORT_DIRS[keyof typeof ENTITY_SORT_DIRS] =\n    ENTITY_SORT_DIRS.ASC;\n  @observable editorFieldErrors: Record<string, string> = {};\n  @observable editorData: Record<string, any> = {};\n  @observable selected: any[] = [];\n  @observable filterData: Record<string, any> = {};\n\n  constructor(fields?: Partial<IEntityProps>) {\n    super();\n\n    if (fields) {\n      Object.assign(this, fields);\n    }\n  }\n\n  @action\n  setFilters = (filters: IEntityProps['filters']) => {\n    this.filters = filters;\n  };\n\n  @action\n  setPage = (page: number) => {\n    this.page = page;\n  };\n\n  @action\n  setPerPage = (items: number) => {\n    this.items = items;\n  };\n\n  @action\n  setSelected = (selected: any[]) => {\n    this.selected = selected;\n  };\n\n  @action\n  setSort = (field: string) => {\n    if (field !== this.sortBy && this.sortDir !== ENTITY_SORT_DIRS.DESC) {\n      this.sortDir = ENTITY_SORT_DIRS.DESC;\n    }\n\n    if (field === this.sortBy) {\n      this.sortDir =\n        this.sortDir === ENTITY_SORT_DIRS.ASC\n          ? ENTITY_SORT_DIRS.DESC\n          : ENTITY_SORT_DIRS.ASC;\n    }\n\n    this.sortBy = field;\n  };\n\n  fetchItemsInstance?: CancellablePromise<any>;\n\n  getFilters = (): IEntityProps['filters'] =>\n    (this.filters.length > 0 &&\n      toJS(this.filters).filter((el) => el.name && el.value !== '')) ||\n    [];\n\n  applyFilter = () => {\n    this.page = 0;\n    this.fetchItems();\n  };\n\n  @action\n  fetchItems = () => {\n    this.fetchItemsCancel();\n\n    this.fetchItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n      this.selected = [];\n\n      try {\n        // loading entity\n        if (!this.api?.list?.url || !this.fetchItemsFn) {\n          throw new Error(i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n        }\n\n        const filter = this.getFilters();\n\n        const result: IEntityFetchFunctionResult = yield this.parent?.auth?.withToken(\n          this.fetchItemsFn,\n          {\n            url: this.api?.list?.url || '',\n            filter,\n            page: this.page,\n            count: this.items,\n            sortBy: this.sortBy,\n            sortDir: this.sortDir,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n\n        this.data = result?.data?.list || [];\n        this.filterData = result?.filterData || {};\n        this.totalCount = result?.data?.totalCount || 0;\n\n        // Loading references (if any)\n        const references = this.fields\n          .filter(\n            (field) =>\n              field.type &&\n              Object.prototype.hasOwnProperty.call(\n                ENTITY_REFERENCE_FIELDS,\n                field.type\n              ) &&\n              this.references[field.name]?.getMany\n          )\n          .map(async (field) => ({\n            [field.name]: await this.references[field.name].getMany(this),\n          }));\n\n        const refResults = yield Promise.all(references);\n\n        this.referenceData = refResults.reduce(\n          (obj: Record<string, any>, res: Record<string, any>) => ({\n            ...obj,\n            ...res,\n          }),\n          {}\n        );\n\n        // updating field reference data\n        this.fields = this.fields.map((field) =>\n          this.referenceData[field.name]\n            ? {\n                ...field,\n                options: { referenceData: this.referenceData[field.name] },\n              }\n            : field\n        );\n\n        // finished\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  fetchItemsCancel = () => {\n    try {\n      if (this.fetchItemsInstance && this.fetchItemsInstance.cancel) {\n        this.fetchItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  updateItemInstance?: CancellablePromise<any>;\n\n  @action\n  updateItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data, false)) {\n          throw new Error(i18n.t(ENTITY_ERRORS.INCORRECT_INPUT));\n        }\n\n        if (!this.api?.update?.url || !this.updateItemsFn) {\n          throw new Error(i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n        }\n\n        const result: IEntityUpdateFunctionResult = yield this.parent?.auth?.withToken(\n          this.updateItemsFn,\n          {\n            url: this.api?.update?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n\n        this.fetchItems();\n\n        if (this.parent?.history?.length && this.parent?.history.goBack) {\n          this.parent?.history.goBack();\n        } else if (this.parent?.history?.push) {\n          this.parent?.history.push(this.menu.url);\n        }\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  onEditCancel = () => {\n    if (this.parent?.history?.length && this.parent?.history.goBack) {\n      this.parent?.history.goBack();\n    } else if (this.parent?.history?.push) {\n      this.parent?.history.push(this.menu.url);\n    }\n  };\n\n  @action\n  createItem = () => {\n    this.updateItemInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      try {\n        const data = toJS(this.editorData);\n\n        if (!this.validateSubmitFields(data, true)) {\n          throw new Error(i18n.t(ENTITY_ERRORS.INCORRECT_INPUT));\n        }\n\n        if (!this.api?.create?.url || !this.createItemsFn) {\n          throw new Error(i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n        }\n\n        const result: IEntityCreateFunctionResult = yield this.parent?.auth?.withToken(\n          this.createItemsFn,\n          {\n            url: this.api?.create?.url || '',\n            data,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n\n        this.fetchItems();\n        this.parent?.history.push(this.menu.url);\n      } catch (e) {\n        this.error = e;\n        this.parent?.notifications.showError(e.message);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  @action\n  resetFieldError = (field: string) => {\n    delete this.editorFieldErrors[field];\n  };\n\n  isValidField = (field: IEntityField, value: any) =>\n    (!field.required || field.type === 'boolean' || value === 0 || !!value) &&\n    (!field.validator || !field.validator(value, this));\n\n  @action\n  validateSubmitFields = (\n    data: Record<string, any>,\n    isCreating = false\n  ): boolean => {\n    this.editorFieldErrors = this.fields\n      .filter(\n        (field) =>\n          (isCreating && !field.hideInCreate) ||\n          (!isCreating && !field.hideInEdit)\n      )\n      .reduce(\n        (obj, field) =>\n          this.isValidField(field, data[field.name])\n            ? obj\n            : {\n                ...obj,\n                [field.name]:\n                  (field.validator && field.validator(data[field.name], this)) ||\n                  i18n.t(ENTITY_ERRORS.FIELD_IS_REQUIRED),\n              },\n        {}\n      );\n\n    return Object.keys(this.editorFieldErrors).length === 0;\n  };\n\n  @observable\n  getItemsInstance?: CancellablePromise<any>;\n\n  @action\n  getItem = (id: any) => {\n    this.getItemsInstance = flow(function* (this: Entity) {\n      this.isLoading = true;\n      this.error = '';\n\n      if (Object.keys(this.editorFieldErrors).length) {\n        this.editorFieldErrors = {};\n      }\n\n      try {\n        if (!this.api?.get?.url || !this.getItemsFn) {\n          throw new Error(i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n        }\n\n        const result: IEntityGetFunctionResult = yield this.parent?.auth?.withToken(\n          this.getItemsFn,\n          {\n            id,\n            url: this.api?.get?.url,\n          }\n        );\n\n        if (!result || result.error)\n          throw new Error(result?.error || i18n.t(ENTITY_ERRORS.CANT_LOAD_ITEMS));\n\n        this.editorData = result.data;\n        this.isLoading = false;\n      } catch (e) {\n        this.parent?.notifications.showError(e.message);\n        this.parent?.history.push(this.menu.url);\n        this.isLoading = false;\n      }\n    }).bind(this)();\n  };\n\n  getItemsCancel = () => {\n    try {\n      if (this.getItemsInstance && this.getItemsInstance.cancel) {\n        this.getItemsInstance.cancel();\n      }\n    } catch (e) {}\n  };\n\n  @action\n  setEditorData = (data: Record<string, any>) => {\n    this.editorData = data;\n  };\n\n  @action\n  createEmptyItem = () => {\n    this.editorData = {};\n  };\n\n  @computed\n  get canList() {\n    return !!(\n      !this.roles ||\n      !this.permissions.list ||\n      (this.parent?.auth?.user?.role &&\n        this.permissions?.list?.includes(this.parent.auth?.user?.role))\n    );\n  }\n\n  @computed\n  get canView() {\n    return !!(\n      !this.roles ||\n      !this.permissions.view ||\n      (this.parent?.auth?.user?.role &&\n        this.permissions?.view?.includes(this.parent.auth?.user?.role))\n    );\n  }\n\n  @computed\n  get canCreate() {\n    return !!(\n      !this.roles ||\n      !this.permissions.create ||\n      (this.parent?.auth?.user?.role &&\n        this.permissions?.create?.includes(this.parent.auth?.user?.role))\n    );\n  }\n\n  @computed\n  get canEdit() {\n    return (\n      this.editable &&\n      !!(\n        !this.roles ||\n        !this.permissions.update ||\n        (this.parent?.auth?.user?.role &&\n          this.permissions?.update?.includes(this.parent.auth?.user?.role))\n      )\n    );\n  }\n\n  @computed\n  get canExport() {\n    return (\n      this.editable &&\n      !!(\n        !this.roles ||\n        !this.permissions.export ||\n        (this.parent?.auth?.user?.role &&\n          this.permissions?.export?.includes(this.parent.auth?.user?.role))\n      )\n    );\n  }\n\n  @action\n  onMount = () => {\n    this.getFiltersFromHash();\n    reaction(\n      () => [this.filters, this.sortBy, this.sortDir, this.page, this.items],\n      this.setFiltersWindowHash\n    );\n    reaction(() => [this.items, this.sortBy, this.sortDir], this.applyFilter);\n    reaction(() => this.page, this.fetchItems);\n    this.fetchItems();\n  };\n\n  @action\n  onUnmount = () => {\n    this.fetchItemsCancel();\n  };\n\n  @observable\n  exportData = async () => {\n    if (!this.fetchItemsFn) return;\n\n    const response = await this.parent?.auth?.withToken(this.fetchItemsFn, {\n      url: this.api?.list?.url,\n      filter: this.getFilters(),\n      page: 0,\n      count: 1000,\n      sortDir: 'DESC',\n      sortBy: 'id',\n    });\n\n    if (!response.data?.list) return;\n\n    const fields = this.fields\n      .filter((field) => !field.hideInExport)\n      .map((field) => field.name);\n\n    const rows = [\n      fields,\n      ...response.data.list.map((item: Record<string, any>) =>\n        fields.reduce(\n          (obj, field) => [...obj, '\"' + String(item[field]) + '\"'],\n          [] as string[]\n        )\n      ),\n    ];\n\n    let csv =\n      'data:text/csv;charset=utf-8,' + rows.map((e) => e.join(',')).join('\\n');\n    var uri = encodeURI(csv);\n\n    saveAs(uri, `${this.title}.csv`);\n  };\n\n  @computed\n  get ListHeadTitle() {\n    return observer(() => (\n      <Typography variant=\"h4\" style={{ flex: 1 }}>\n        {this.title}\n      </Typography>\n    ));\n  }\n\n  @computed\n  get ListHeadButtons() {\n    return observer(() => <></>);\n  }\n\n  @computed\n  get ListHead() {\n    return observer(() => (\n      <EntityHead\n        filterData={this.filterData}\n        title={<this.ListHeadTitle />}\n        buttons={<this.ListHeadButtons />}\n        filters={this.filters}\n        fields={this.fields}\n        setFilters={this.setFilters}\n        url={this.menu.url}\n        applyFilter={this.applyFilter}\n        withToken={this.parent?.auth?.withToken}\n        onExport={this.exportData}\n        canExport={this.exportable && this.canExport}\n        canCreate={this.creatable && this.canCreate}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get ListExtra():\n    | (({\n        id,\n        onClose,\n      }: {\n        id: any;\n        onClose: (id: any) => void;\n      }) => JSX.Element)\n    | null {\n    return null;\n  }\n\n  @computed\n  get ListBody() {\n    return observer(() => (\n      <EntityList\n        fields={this.fields}\n        data={this.data}\n        extra={this.ListExtra}\n        isLoading={this.isLoading}\n        url={this.menu.url}\n        selected={this.selected}\n        sortBy={this.sortBy}\n        sortDir={this.sortDir}\n        canView={this.viewable && this.canView}\n        canEdit={this.editable && this.canEdit}\n        canSelect={this.selectable}\n        setSelected={this.setSelected}\n        onSortChange={this.setSort}\n        withToken={this.parent?.auth?.withToken}\n        entity={this}\n      />\n    ));\n  }\n\n  @computed\n  get ListFooter() {\n    return observer(() => (\n      <EntityFooter\n        page={this.page}\n        itemsPerPage={this.itemsPerPage}\n        items={this.items}\n        totalCount={this.totalCount}\n        setPage={this.setPage}\n        setPerPage={this.setPerPage}\n      />\n    ));\n  }\n\n  @computed\n  get List() {\n    return observer(() => (\n      <EntityListWrapper>\n        <this.ListHead />\n        <this.ListBody />\n        <this.ListFooter />\n      </EntityListWrapper>\n    ));\n  }\n\n  @computed\n  get Breadcrumbs() {\n    return observer(\n      ({\n        id,\n        isEditing = false,\n        isCreating = false,\n        buttons,\n      }: {\n        id?: any;\n        isEditing?: boolean;\n        isCreating?: boolean;\n        buttons?: ReactElement;\n      }) => (\n        <EntityBreadcrumbs\n          data={this.editorData}\n          fields={this.fields}\n          id={id}\n          name={this.title}\n          url={this.menu.url}\n          isEditing={isEditing}\n          isCreating={isCreating}\n          buttons={buttons}\n          viewable={this.viewable}\n          editable={this.canEdit}\n        />\n      )\n    );\n  }\n\n  @computed\n  get ViewerHeadButtons() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get ViewerHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs id={id} buttons={<this.ViewerHeadButtons id={id} />} />\n    ));\n  }\n\n  @computed\n  get ViewerFooter() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get ViewerBody() {\n    return observer(({ id }: { id: string }) => {\n      if (!this.canView) return this.forbiddenPlaceholder\n\n      return <EntityViewer\n        id={id}\n        fields={this.fields}\n        url={this.menu.url}\n        errors={this.editorFieldErrors}\n        onSave={() => {}}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isEditing={false}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n        entity={this}\n      />\n    });\n  }\n\n  @computed\n  get Viewer() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.ViewerHead id={id} />\n        <this.ViewerBody id={id} />\n        <this.ViewerFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get EditorHeadButtons() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get EditorHead() {\n    return observer(({ id }: { id: any }) => (\n      <this.Breadcrumbs\n        id={id}\n        buttons={<this.EditorHeadButtons id={id} />}\n        isEditing\n      />\n    ));\n  }\n\n  @computed\n  get EditorFooter() {\n    return observer(({ id }: { id: any }) => <Fragment />);\n  }\n\n  @computed\n  get EditorBody() {\n    return observer(({id}: { id: string }) => {\n      if (!this.canEdit) return this.forbiddenPlaceholder\n\n      return <EntityViewer\n        id={id}\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.updateItem}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.getItem}\n        cancelGetItem={this.getItemsCancel}\n        withToken={this.parent?.auth?.withToken}\n        viewable={this.viewable}\n        entity={this}\n        isEditing\n      />\n    });\n  }\n\n  @computed\n  get Editor() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.EditorHead id={id} />\n        <this.EditorBody id={id} />\n        <this.EditorFooter id={id} />\n      </>\n    ));\n  }\n\n  @computed\n  get CreatorHeadButtons() {\n    return observer(() => <Fragment />);\n  }\n\n  @computed\n  get CreatorHead() {\n    return observer(() => (\n      <this.Breadcrumbs buttons={<this.CreatorHeadButtons />} isCreating />\n    ));\n  }\n\n  @computed\n  get CreatorFooter() {\n    return observer(() => <Fragment />);\n  }\n\n  @computed\n  get CreatorBody() {\n    return observer(() => {\n      if (!this.canCreate) return this.forbiddenPlaceholder\n\n      return <EntityViewer\n        fields={this.fields}\n        errors={this.editorFieldErrors}\n        url={this.menu.url}\n        onSave={this.createItem}\n        onCancel={this.onEditCancel}\n        onResetFieldError={this.resetFieldError}\n        isEditing\n        isLoading={this.isLoading}\n        setEditorData={this.setEditorData}\n        data={this.editorData}\n        getItem={this.createEmptyItem}\n        cancelGetItem={this.getItemsCancel}\n        viewable={this.viewable}\n        withToken={this.parent?.auth?.withToken}\n        entity={this}\n      />\n    });\n  }\n\n  @computed\n  get Creator() {\n    return observer(({ id }: { id: string }) => (\n      <>\n        <this.CreatorHead />\n        <this.CreatorBody />\n        <this.CreatorFooter />\n      </>\n    ));\n  }\n\n  @computed\n  get output() {\n    return observer(() => (\n      <Provider entity={this}>\n        <Switch>\n          <Route path={`${this.menu.url}/create`} component={this.Creator} />\n          <Route\n            path={`${this.menu.url}/:id/edit`}\n            component={({\n              match: {\n                params: { id },\n              },\n            }: RouteComponentProps<{ id: string }>) => <this.Editor id={id} />}\n          />\n          <Route\n            path={`${this.menu.url}/:id/`}\n            component={({\n              match: {\n                params: { id },\n              },\n            }: RouteComponentProps<{ id: string }>) => <this.Viewer id={id} />}\n          />\n          <Route path={this.menu.url} component={this.List} />\n        </Switch>\n      </Provider>\n    ));\n  }\n\n  @action\n  setFiltersWindowHash = () => {\n    const filters = this.getFilters().reduce(\n      (obj, filter) => ({ ...obj, [filter.name]: filter.value }),\n      {}\n    );\n\n    const params = new URLSearchParams({\n      ...filters,\n      _page: this.page.toString(),\n      _sortBy: this.sortBy.toString(),\n      _sortDir: this.sortDir.toString(),\n      _items: this.items.toString(),\n    });\n\n    window.location.hash = params.toString();\n  };\n\n  @action\n  getFiltersFromHash = () => {\n    const hash = window.location.hash.slice(1, window.location.hash.length);\n    const query = parseQuery(hash);\n    const filters: IFilterValue[] = this.fields\n      .filter(\n        (field) => field.filterable && Object.keys(query).includes(field.name)\n      )\n      .map((field) => ({ value: query[field.name], name: field.name }));\n\n    this.setFilters(filters);\n\n    if (query._page && parseInt(query._page)) {\n      this.page = parseInt(query._page);\n    }\n\n    if (query._sortDir && ['asc', 'desc'].includes(query._sortDir)) {\n      this.sortDir = query._sortDir === 'asc' ? 'asc' : 'desc';\n    }\n\n    if (\n      query._sortBy &&\n      this.fields.some((field) => field.name === query._sortBy)\n    ) {\n      this.sortBy = query._sortBy;\n    }\n\n    if (query._items && parseInt(query._items)) {\n      this.items = parseInt(query._items);\n    }\n  };\n}\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const parseQuery = (queryString: string): Record<string, string> => {\n  const query: Record<string, string> = {};\n\n  const pairs = (queryString[0] === '?'\n      ? queryString.substr(1)\n      : queryString\n  ).split('&');\n\n  for (let i = 0; i < pairs.length; i++) {\n    const pair = pairs[i].split('=');\n    query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n  }\n\n  return query;\n};\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Config, PageRenderer } from '~/application';\nimport { observer, Provider } from 'mobx-react';\nimport { Redirect, Route, Router, Switch } from 'react-router-dom';\nimport { CssBaseline, ThemeProvider, WithStyles, withStyles, } from '@material-ui/core';\nimport styles from './styles';\nimport DateFnsAdapter from '@material-ui/pickers/adapter/date-fns';\nimport { LocalizationProvider } from '@material-ui/pickers';\nimport ruLocale from 'date-fns/locale/ru';\nimport '../../../styles/main.scss';\nimport { I18nextProvider } from \"react-i18next\";\nimport i18n, { i18nInit } from \"~/i18n\";\n\ntype IProps = WithStyles<typeof styles> & {\n  config: Config;\n};\n\nconst Application = withStyles(styles)(\n  observer(({config}: IProps) => {\n    i18nInit(config)\n\n    if (config.auth && !config.auth?.isLogged && config.auth?.sendAuthRequest) {\n      return (\n        <Provider config={config}>\n          <I18nextProvider i18n={i18n}>\n            <config.auth.output/>\n          </I18nextProvider>\n        </Provider>\n      );\n    }\n\n    return (\n      <Provider config={config}>\n        <ThemeProvider theme={config.themeInstance}>\n          <I18nextProvider i18n={i18n}>\n            <LocalizationProvider dateAdapter={DateFnsAdapter} locale={ruLocale}>\n              <CssBaseline/>\n\n              <Router history={config.history}>\n                <config.layout>\n                  <Switch>\n                    {config.pagesForCurrentUser\n                      .filter((page) => page?.menu?.url)\n                      .map((page) => (\n                        <Route\n                          path={page.menu.url}\n                          render={() => <PageRenderer page={page}/>}\n                          key={page.menu.url}\n                        />\n                      ))}\n\n                    <Redirect to={config.fallbackUrl}/>\n                  </Switch>\n                </config.layout>\n              </Router>\n\n              <config.notifications.Output/>\n            </LocalizationProvider>\n          </I18nextProvider>\n        </ThemeProvider>\n      </Provider>\n    );\n  })\n);\n\nexport { Application };\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => ({\n  wrapper: {\n    padding: 0,\n\n    '& .MuiButton-root, & .MuiOutlinedInput-root': {\n      borderRadius: 0,\n    },\n  },\n});\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureRenderer } from '~/application/modules/pages/Feature/items/FeatureRenderer';\nimport { FeatureFeatures } from '~/application/modules/pages/Feature/types';\n\nexport const FEATURE_DEFAULT_RENDERER = new FeatureRenderer();\nexport const FEATURE_DEFAULT_FEATURES: FeatureFeatures = {\n  create: true,\n  read: true,\n  update: true,\n  delete: true,\n  list: true,\n  export: false,\n};\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Page } from '~/application/modules/pages/Page';\nimport { action, computed, extendObservable, observable, reaction } from 'mobx';\nimport { FeatureApi } from './items/FeatureApi';\nimport { FeatureRenderer } from './items/FeatureRenderer';\nimport {\n  FeatureFeature,\n  FeatureMode,\n  FeatureOptions,\n} from '~/application/modules/pages/Feature/types';\nimport { Provider } from 'mobx-react';\nimport { FEATURE_DEFAULT_FEATURES } from '~/application/modules/pages/Feature/defaults';\nimport { FeatureField } from '~/application/modules/pages/Feature/fields/FeatureField';\nimport { FeatureData } from '~/application/modules/pages/Feature/items/FeatureData';\nimport { FeatureController } from '~/application/modules/pages/Feature/items/FeatureController';\nimport { FeatureFilters } from '~/application/modules/pages/Feature/items/FeatureFilters';\nimport { debounce } from 'throttle-debounce';\nimport { has } from 'ramda';\n\nexport class Feature<\n  Fields extends Record<string, any> = Record<string, any>\n> extends Page {\n  constructor(\n    public title: string,\n    public url: string,\n    options: Partial<FeatureOptions<Fields>> = {}\n  ) {\n    super({\n      title,\n      roles: options?.roles,\n      menu: {\n        enabled: options?.menu?.enabled || true,\n        label: options?.menu?.label || title,\n        url,\n      },\n    });\n\n    extendObservable(this, { title, url, options });\n\n    if (options) this.options = options;\n    if (options.fields) this.fieldsList = options.fields;\n    if (options.features) this.features = options.features;\n    if (options.rows) this.filters.rows = options.rows;\n    if (options.getItemTitle) this.getItemTitle = options.getItemTitle;\n    if (options.permissions) this.permissions = options.permissions;\n\n    // Initialize renderer\n    this.renderer =\n      options.renderer ||\n      new FeatureRenderer({\n        containers: options?.containers,\n        components: options?.components,\n      });\n\n    // Initialize ref fields storage\n    this.data.createReferenceData(this.api.references);\n\n    // Get filters from url\n    this.filters.restoreFilters();\n\n    // Update withToken for api\n    this.api.useFeature(this);\n\n    // Pass current feature to fields\n    this.attachFeatureToFields();\n\n    // React on changes of mode\n    reaction(() => this.mode, this.controller.onActionChange);\n\n    // React on changes of list props\n    reaction(\n      () => [\n        this.filters.sortBy,\n        this.filters.sortDir,\n        this.filters.page,\n        this.filters.rows,\n      ],\n      debounce(200, this.onFilterChange)\n    );\n\n    reaction(() => [this.filters.value], debounce(400, this.onFilterChange));\n  }\n\n  @observable permissions?: FeatureOptions['permissions'];\n  @observable options: Partial<FeatureOptions<Fields>> = {};\n  @observable features: FeatureOptions['features'] = FEATURE_DEFAULT_FEATURES;\n  @observable renderer: FeatureRenderer = new FeatureRenderer();\n  @observable data: FeatureData<Fields> = new FeatureData(this);\n  @observable mode?: FeatureMode;\n  @observable filters: FeatureFilters<Fields> = new FeatureFilters(this);\n  @observable controller = new FeatureController<Fields>(this);\n  @observable api = new FeatureApi(this);\n\n  /**\n   * Array of fields, coming from props\n   */\n  @observable fieldsList: FeatureField<Fields>[] = [];\n\n  /**\n   * Sets this feature in each field\n   */\n  @action\n  attachFeatureToFields() {\n    this.fieldsList.forEach((field) => field.useFeature(this));\n  }\n\n  @computed\n  get isEditing() {\n    return this.mode === FeatureMode.create || this.mode === FeatureMode.update;\n  }\n\n  /**\n   * Custom function, that returns single item's id, can be overriden by\n   * Feature's props\n   * TODO: use it everywhere (currently not using)\n   */\n  getItemId: (fields: Fields) => any = (fields) => fields.id;\n\n  /**\n   * Custom function, that returns single item's title, can be overriden by\n   * Feature's props\n   */\n  getItemTitle: (fields: Fields) => string = () => '';\n\n  /**\n   * Record<name, field> of fields\n   */\n  @computed\n  get fields() {\n    return this.fieldsList.reduce(\n      (acc, field) => ({\n        ...acc,\n        [field.name]: field,\n      }),\n      {} as Record<keyof Fields, FeatureField<Fields>>\n    );\n  }\n\n  /**\n   * Returns only fields, that should be displayed / validated on current mode\n   */\n  @computed\n  get fieldsOfCurrentMode() {\n    return this.fieldsList.filter(\n      (field) => this.mode && field.featuresOfCurrentUser[this.mode]\n    );\n  }\n\n  /**\n   * Main renderer\n   */\n  @computed\n  get output() {\n    return () => <Provider feature={this}>{this.renderer.output}</Provider>;\n  }\n\n  /**\n   * Proper react-router history\n   */\n  @computed\n  get history() {\n    return this.parent?.history;\n  }\n\n  /**\n   * Redirects to list of items\n   */\n  goToList = () => {\n    this.history?.push(this.filters.queryString);\n  };\n\n  /**\n   * Redirects to specific item\n   */\n  goToRead = (id: any) => {\n    this.history?.push(`${this.url}/${id}/`);\n  };\n\n  /**\n   * Redirects to specific item editor\n   */\n  goToUpdate = (id: any) => {\n    this.history?.push(`${this.url}/${id}/${FeatureMode.update}/`);\n  };\n\n  /**\n   * Redirects to specific item editor\n   */\n  goToCreate = () => {\n    this.history?.push(`${this.url}/${FeatureMode.create}`);\n  };\n\n  /**\n   * Clears data on editing cancel\n   */\n  @action\n  cancelEditing = () => {\n    switch (this.mode) {\n      case FeatureMode.create:\n        this.goToList();\n        break;\n      case FeatureMode.update:\n        const id = this.controller.getIdFromUrl();\n        this.goToRead(id);\n        break;\n      default:\n        this.history?.goBack();\n    }\n\n    this.data.clearEditorData();\n  };\n\n  /**\n   * Called when page, count, sort or filter changed.\n   */\n  private onFilterChange = () => {\n    this.filters.persistFilters();\n    this.controller.beforeListMode();\n  };\n\n  /**\n   * Features, available for current user\n   */\n  @computed\n  get availableFeatures() {\n    const auth = this.parent?.auth;\n    const role = auth?.userRole;\n\n    return Object.values(FeatureFeature).reduce((acc, feature) => {\n      const byRole = !this.roles || (role && this.roles.includes(role));\n\n      const byPermission =\n        !this.permissions ||\n        !has(feature, this.permissions) ||\n        (role && this.permissions[feature]!!.includes(role));\n\n      return { ...acc, [feature]: byRole && byPermission };\n    }, {} as Record<FeatureFeature, boolean>);\n  }\n}\n","/* Copyright (c) 2020 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureField } from '~/application/modules/pages/Feature/fields';\nimport { observable } from 'mobx';\n\nexport class StringField<\n  T extends Record<string, any> = Record<string, any>\n> extends FeatureField<T, string> {\n  @observable defaultValue = '';\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__19a2g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__3xw0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"styles_pagination__3LwXU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__31xJ2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"placeholder\":\"styles_placeholder__k7WBW\",\"pulse\":\"styles_pulse__3r9G8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__37WYY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__1AUNv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__1S3bI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"styles_content__EaFMP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"submit\":\"styles_submit__2rO7x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filters\":\"styles_filters__oM7AM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"styles_button__2HxtO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"styles_wrap__2az_g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pre\":\"styles_pre__1Ztc4\"};","var map = {\n\t\"./en/common.json\": 660,\n\t\"./en/custom.json\": 661,\n\t\"./es/custom.json\": 662,\n\t\"./ru/custom.json\": 663\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 659;","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const SAMPLE_ENTITY_1 = {\n  id: 1,\n  type: 1,\n  phone: '+7 000 000 000',\n  title: 'First one',\n  text: 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.',\n  created: '2020-05-27T10:56:56.281+0000',\n  createdTime: '2020-05-27T10:56:56.281+0000',\n  number: '0.123123123',\n  number2: 3,\n  visible: true,\n};\n\nexport const SAMPLE_ENTITY_2 = {\n  id: 2,\n  type: 2,\n  phone: '+7 000 000 000',\n  title: 'First one',\n  text: 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.',\n  created: '2020-05-27T10:56:56.281+0000',\n  createdTime: '2020-05-27T10:56:56.281+0000',\n  number: 0.123123123,\n  number2: -1,\n  visible: true,\n};\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport {\n  Entity,\n  IEntityCreateFunction,\n  IEntityFetchFunction,\n  IEntityGetFunction,\n  IEntityUpdateFunction,\n} from '~/application';\nimport { SAMPLE_ENTITY_1, SAMPLE_ENTITY_2 } from './__mocks__/sampleData';\n\nexport const fetchEntityItemsFn: IEntityFetchFunction = ({...props}) =>\n  new Promise((resolve) => {\n    console.log('Fetching with props:', props);\n\n    setTimeout(resolve, 500, {\n      data: {\n        list: [...new Array(props.count)].map((_, index) => ({\n          ...SAMPLE_ENTITY_1,\n          id: index,\n        })),\n        totalCount: 100,\n      },\n    });\n  });\n\nexport const getEntityFn: IEntityGetFunction = ({id, url, token}) => {\n  return new Promise((resolve) => {\n    console.log('Getting item:', {id, url, token});\n    setTimeout(resolve, 500, {\n      data: SAMPLE_ENTITY_2,\n    });\n  });\n};\n\nexport const updateEntityFn: IEntityUpdateFunction = ({id, data, url, token}) => {\n  return new Promise((resolve) => {\n    console.log('Updating item:', {id, data, url, token});\n    resolve({error: '', data});\n  });\n};\n\nexport const createEntityFn: IEntityCreateFunction = ({data, url, token}) => {\n  return new Promise((resolve) => {\n    console.log('Creating item:', {data, url, token});\n    resolve({error: '', data});\n  });\n};\n\nexport const getEntityTypeVariants = async (entity: Entity) => {\n  return {\n    1: 'variant 1',\n    2: 'variant 2',\n    3: 'variant 3',\n  };\n};\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Entity, IEntityField } from '~/application';\nimport i18n from \"~/i18n\";\n\nexport const SAMPLE_ENTITY_FIELDS: IEntityField[] = [\n  {\n    name: 'type',\n    label: 'Тип',\n    sortable: true,\n    filterable: true,\n    type: 'referenceSelect',\n    required: true,\n  },\n  {\n    name: 'another',\n    label: 'Проверка лейбла',\n    type: 'select',\n    filterable: true,\n    options: {\n      1: 'asdasdasd adsasd',\n      2: 'asdasd asdasdasd',\n    },\n    required: true\n  },\n  {\n    name: 'phone',\n    label: 'Телефон',\n    sortable: true,\n    type: 'string',\n    filterable: true,\n  },\n  {\n    name: 'title',\n    label: 'Заголовок',\n    sortable: true,\n    type: 'string',\n    title: true,\n    hideInCreate: true,\n  },\n  {\n    name: 'text',\n    label: 'Текст',\n    sortable: true,\n    type: 'textarea',\n    title: true,\n    hideInCreate: true,\n    hideInList: true,\n  },\n  {\n    name: 'created',\n    label: 'Дата публикации начало (от)',\n    filterable: true,\n    sortable: true,\n    type: 'date',\n  },\n  {\n    name: 'createdTime',\n    label: 'Дата и время',\n    sortable: true,\n    filterable: true,\n    type: 'datetime',\n  },\n  {\n    name: 'dateRange',\n    label: 'Период с двумя датами (от и до)',\n    sortable: true,\n    filterable: true,\n    type: 'daterange',\n    hideInCreate: true,\n    hideInEdit: true,\n    hideInExport: true,\n    hideInList: true,\n  },\n  {\n    name: 'visible',\n    label: 'Видимость',\n    sortable: false,\n    type: 'boolean',\n  },\n  {\n    type: 'number',\n    name: 'number',\n    label: 'Количество (1)',\n    sortable: true,\n    validator: (val: string) => (String(val) === '1' ? '' : i18n.t('custom:Should be 1')),\n    options: {\n      accuracy: 4,\n    },\n  },\n  {\n    type: 'number',\n    name: 'number2',\n    label: 'Количество (0-5)',\n    sortable: true,\n    validator: (val: number) => val < 0 || val > 5 ? i18n.t('custom:Must be between 0 and 5') : '',\n    options: {\n      accuracy: 4,\n    },\n  },\n  {\n    name: 'password',\n    label: 'Пароль',\n    type: 'string',\n    title: true,\n    hideInCreate: true,\n  },\n  {\n    name: 'passwordRepeat',\n    label: 'Повтор пароля',\n    type: 'string',\n    title: true,\n    hideInCreate: true,\n    validator: (val: string, entity: Entity) => (entity.editorData['password'] !== val ? i18n.t('custom:Passwords must match') : ''),\n  },\n  {\n    name: 'requiredInEdit',\n    label: 'Обязательное в редакторе',\n    type: 'string',\n    required: true,\n    hideInCreate: true,\n  },\n  {\n    name: 'requiredInCreate',\n    label: 'Обязательное при создании',\n    type: 'string',\n    required: true,\n    hideInEdit: true,\n  },\n];\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\nimport React from 'react';\nimport { Entity } from '../../../application';\nimport {\n  createEntityFn,\n  fetchEntityItemsFn,\n  getEntityFn,\n  getEntityTypeVariants,\n  updateEntityFn,\n} from './api';\nimport { SAMPLE_ENTITY_FIELDS } from './fields';\n\nexport default new Entity({\n  title: 'Entity',\n  editable: true,\n  viewable: true,\n  creatable: true,\n  exportable: true,\n  selectable: false,\n  api: {\n    list: { url: '/list', method: 'get' },\n    update: { url: '/update', method: 'patch' },\n    create: { url: '/create', method: 'post' },\n    get: { url: '/get', method: 'get' },\n  },\n  menu: {\n    enabled: true,\n    label: 'Sample entity',\n    url: '/entity',\n  },\n  fields: SAMPLE_ENTITY_FIELDS,\n  roles: ['admin', 'user'],\n  permissions: {\n    list: ['admin', 'user'],\n    create: ['admin'],\n    update: ['admin'],\n  },\n\n  fetchItemsFn: ({ url, page, count, token, filter, sortBy, sortDir }) =>\n    fetchEntityItemsFn({ url, page, count, token, filter, sortBy, sortDir }),\n\n  getItemsFn: ({ id, url, token }) => getEntityFn({ id, url, token }),\n\n  updateItemsFn: ({ id, data, url, token }) =>\n    updateEntityFn({ id, data, url, token }),\n\n  createItemsFn: ({ data, url, token }) => createEntityFn({ data, url, token }),\n\n  references: {\n    type: {\n      getMany: (entity) => getEntityTypeVariants(entity),\n    },\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from \"react\";\nimport { Page, useConfig } from '~/application';\nimport { computed } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { NavLink } from \"react-router-dom\";\nimport i18n from \"~/i18n\";\n\nclass CustomPage extends Page {\n  @computed\n  get output() {\n    const config = useConfig()\n\n    return observer(() => (\n      <div>\n        <h1>{i18n.t(this.title)} - {config.debug ? 'Development' : 'Production'}</h1>\n        <div>Navigate to <NavLink to=\"/test-hidden\">hidden page</NavLink> (not listed in navigation)</div>\n      </div>\n    ));\n  }\n}\n\nexport default new CustomPage({\n  title: 'custom:Page',\n  menu: {\n    enabled: true,\n    url: '/test',\n    label: 'custom:Sample page',\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Page } from '~/application';\n\nexport default new Page({\n  title: 'Hidden page',\n  menu: {\n    enabled: false,\n    url: '/test-hidden',\n    label: 'Sample hidden page',\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from \"react\";\nimport { Page } from '~/application';\nimport { computed } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport i18n from \"~/i18n\";\n\nclass AdminOnlyPage extends Page {\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{i18n.t(this.title)}</h1>\n      </div>\n    ));\n  }\n}\n\nexport default new AdminOnlyPage({\n  title: 'Admin only page',\n  menu: {\n    enabled: true,\n    url: '/admin-only',\n    label: 'Admin only page',\n  },\n  roles: ['admin']\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from \"react\";\nimport { Page } from '~/application';\nimport { computed } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport i18n from \"~/i18n\";\n\nclass UserOnlyPage extends Page {\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{i18n.t(this.title)}</h1>\n      </div>\n    ));\n  }\n}\n\nexport default new UserOnlyPage({\n  title: 'User only page',\n  menu: {\n    enabled: true,\n    url: '/user-only',\n    label: 'User only page',\n  },\n  roles: ['user']\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from \"react\";\nimport { Page } from '~/application';\nimport { computed } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport i18n from \"~/i18n\";\n\nclass AdminAndUserPage extends Page {\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{i18n.t(this.title)}</h1>\n      </div>\n    ));\n  }\n}\n\nexport default new AdminAndUserPage({\n  title: 'Admin and User page',\n  menu: {\n    enabled: true,\n    url: '/admin-and-user',\n    label: 'Admin and User page',\n  },\n  roles: ['admin', 'user']\n});\n","/* Copyright (c) 2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nexport const ADMIN_USER_EMAIL = 'admin@icerock.dev'\n\nexport const ADMIN_USER_PASSWORD = '123456'\n\nexport const ADMIN_USER_RESPONSE = {\n  user: {\n    email: ADMIN_USER_EMAIL,\n    username: ADMIN_USER_EMAIL,\n    token: 'ADMIN_SAMPLE_TOKEN',\n    role: 'admin',\n  },\n  error: '',\n}\n\nexport const ADMIN_USER_RESPONSE_JWT = {\n  user: {\n    email: ADMIN_USER_EMAIL,\n    username: ADMIN_USER_EMAIL,\n    role: 'admin',\n  },\n  tokens: { access: 'adminAccessToken', refresh: 'adminRefreshToken' },\n  error: '',\n}\n\nexport const COMMON_USER_EMAIL = 'user@icerock.dev'\n\nexport const COMMON_USER_PASSWORD = '123456'\n\nexport const COMMON_USER_RESPONSE = {\n  user: {\n    email: COMMON_USER_EMAIL,\n    username: COMMON_USER_EMAIL,\n    token: 'userAccessToken',\n    role: 'user',\n  },\n  error: '',\n}\n\nexport const COMMON_USER_RESPONSE_JWT = {\n  user: {\n    email: COMMON_USER_EMAIL,\n    username: COMMON_USER_EMAIL,\n    role: 'user',\n  },\n  tokens: { access: 'userAccessToken', refresh: 'userRefreshToken' },\n  error: '',\n}\n","/* Copyright (c) 2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nclass CustomError extends Error {\n  constructor(name: string, message: string) {\n    super(message);\n    this.name = name;\n  }\n}\n\nexport default CustomError;\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React, { FC } from 'react';\nimport { observer } from 'mobx-react';\nimport styles from './styles.module.scss';\nimport { useConfig } from '~/application';\nimport { Link } from 'react-router-dom';\nimport { FormHelperText } from \"@material-ui/core\";\nimport {\n  ADMIN_USER_EMAIL,\n  ADMIN_USER_PASSWORD,\n  COMMON_USER_EMAIL,\n  COMMON_USER_PASSWORD\n} from \"../../../auth/__mocks__/authData\";\n\ninterface IProps {}\n\nconst AuthCustomLayout: FC<IProps> = observer(({ children }) => {\n  const config = useConfig();\n  const splash = config.auth?.splash || '';\n\n  return (\n    <div className={styles.layout}>\n      <div className={styles.left}>\n        <div className={styles.left__wrap}>\n          <div className={styles.logo}>\n            <Link to=\"/\">\n              <img src={config.logo} alt={config.title} />\n            </Link>\n          </div>\n\n          <div className={styles.form}>\n            <div className={styles.content}>\n              {children}\n            </div>\n          </div>\n          <div>\n            <h4>Demo login details</h4>\n            <FormHelperText>Admin user: {ADMIN_USER_EMAIL} / {ADMIN_USER_PASSWORD}</FormHelperText>\n            <FormHelperText>Common user: {COMMON_USER_EMAIL} / {COMMON_USER_PASSWORD}</FormHelperText>\n          </div>\n        </div>\n      </div>\n\n      <div\n        className={styles.image}\n        style={{ backgroundImage: `url('${splash}')` }}\n      />\n    </div>\n  );\n});\n\nexport { AuthCustomLayout };\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { JWTAuthProvider } from '~/application';\nimport { Unwrap } from '~/application/types/common';\nimport { IJWTAuthRequestFn } from '~/application';\nimport splash from '../../assets/logo512.png';\nimport {\n  ADMIN_USER_EMAIL,\n  ADMIN_USER_PASSWORD,\n  ADMIN_USER_RESPONSE_JWT,\n  COMMON_USER_EMAIL,\n  COMMON_USER_PASSWORD,\n  COMMON_USER_RESPONSE_JWT\n} from \"../__mocks__/authData\";\nimport CustomError from \"../__mocks__/CustomError\";\nimport { AuthCustomLayout } from \"../../layout/auth/AuthCustomLayout\";\n\nexport default new JWTAuthProvider({\n  layout: AuthCustomLayout,\n\n  authRequestFn: (\n    email: string,\n    password: string\n  ): Unwrap<ReturnType<IJWTAuthRequestFn>> =>\n    new Promise((resolve) => {\n      console.info('Authenticating with: ', {email, password});\n\n      if (email === ADMIN_USER_EMAIL && password === ADMIN_USER_PASSWORD) {\n        resolve(ADMIN_USER_RESPONSE_JWT)\n      } else if (email === COMMON_USER_EMAIL && password === COMMON_USER_PASSWORD) {\n        resolve(COMMON_USER_RESPONSE_JWT)\n      } else {\n        throw new CustomError('Error', 'Wrong login or password');\n      }\n    }),\n\n  authPasswRestoreFn: (email: string) =>\n    new Promise((resolve) => {\n      console.info('Restoring password with: ', {email});\n      resolve({error: ''});\n    }),\n\n  authPasswUpdateFn: (token, password, passwordRepeat) =>\n    new Promise((resolve) => {\n      console.info('Resetting password with: ', {\n        token,\n        password,\n        passwordRepeat,\n      });\n      resolve({error: ''});\n    }),\n\n  tokenRefreshFn: (refresh: string) => {\n    console.info(`Refreshing JWT tokens with refresh: ${refresh}`);\n    const seed = Math.random() * 65535;\n    return new Promise((resolve) =>\n      setTimeout(\n        () =>\n          resolve({\n            access: `accessToken_${seed}`,\n            refresh: `refreshToken_${seed}`,\n          }),\n        3000\n      )\n    );\n  },\n\n  passwordValidator: (password: string) =>\n    password.length > 5 ? '' : 'Password must be at least 6 symbols long',\n\n  authSignupFn: (data: any) =>\n    new Promise((resolve) => {\n      console.info('Registering user with data ', data);\n      resolve({error: ''});\n    }),\n\n  splash,\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Entity } from '~/application';\nimport { observer } from 'mobx-react';\nimport { SAMPLE_ENTITY_FIELDS } from '../entity/fields';\nimport {\n  fetchEntityItemsFn,\n  getEntityFn,\n  updateEntityFn,\n  createEntityFn,\n} from '../entity/api';\nimport { computed } from 'mobx';\n\nclass CustomEntity extends Entity {\n  @computed\n  get output() {\n    return observer(() => (\n      <div>\n        <h1>{this.title}</h1>\n        <div>This is cutom output. Btw, items count is {this.data.length}.</div>\n      </div>\n    ));\n  }\n}\n\nexport default new CustomEntity({\n  title: 'Custom entity',\n  editable: true,\n  viewable: true,\n  creatable: true,\n  exportable: true,\n  selectable: false,\n  api: {\n    list: { url: '/custom/list', method: 'get' },\n    update: { url: '/custom/update', method: 'patch' },\n    create: { url: '/custom/create', method: 'post' },\n    get: { url: '/custom/get', method: 'get' },\n  },\n  menu: {\n    enabled: true,\n    label: 'Custom',\n    url: '/custom',\n  },\n  fields: SAMPLE_ENTITY_FIELDS,\n\n  fetchItemsFn: ({ url, page, count, token, filter, sortBy, sortDir }) =>\n    fetchEntityItemsFn({ url, page, count, token, filter, sortBy, sortDir }),\n\n  getItemsFn: ({ id, url, token }) => getEntityFn({ id, url, token }),\n\n  updateItemsFn: ({ id, data, url, token }) =>\n    updateEntityFn({ id, data, url, token }),\n\n  createItemsFn: ({ data, url, token }) => createEntityFn({ data, url, token }),\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IFields } from './index';\n\nexport const generateBaseData = (items: number) =>\n  [...new Array(items)].map(\n    (_, id): IFields => ({\n      id,\n      name: `Person ${id + 1}`,\n      age: Math.random() * 80,\n      role: 10,\n      status: 20,\n      birthDate: new Date().toISOString(),\n      description: 'Lorem Ipsum and etc',\n      nested: {\n        index: 1,\n        value: 'Nested value',\n      },\n    })\n  );\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { IFields } from './index';\nimport { generateBaseData } from './mock';\nimport {\n  FeatureApiMethodCreate,\n  FeatureApiMethodDelete,\n  FeatureApiMethodGet,\n  FeatureApiMethodList,\n  FeatureApiMethodUpdate,\n} from '../../../application/modules/pages/Feature/types';\nimport { FeatureReferenceFetchAll } from '../../../application/modules/pages/Feature/types/reference';\n\nconst delay = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n\nexport const getFeatureList: FeatureApiMethodList<IFields> = async ({\n  url,\n  ...props\n}) => {\n  console.log(`LIST ${url}`, { url, ...props });\n\n  return delay(500).then(() => ({\n    data: generateBaseData(props.limit),\n    count: 100,\n    status: 200,\n    error: '',\n  }));\n};\n\nexport const getFeature: FeatureApiMethodGet<IFields> = async ({\n  url,\n  id,\n  ...props\n}) => {\n  const items = parseInt(id, 10) || 0;\n  const href = [url, id].join('');\n\n  console.log(`READ ${href}`, { url, id, ...props });\n\n  return delay(500).then(() => ({\n    data: generateBaseData(items + 1)[items],\n    status: 200,\n    error: '',\n  }));\n};\n\nexport const createFeature: FeatureApiMethodCreate<IFields> = async ({\n  url,\n  ...props\n}) => {\n  console.log(`CREATE ${url}`, { url, ...props });\n\n  return delay(500).then(() => ({\n    data: generateBaseData(1)[0],\n    status: 200,\n    error: '',\n  }));\n};\n\nexport const updateFeature: FeatureApiMethodUpdate<IFields> = async ({\n  url,\n  id,\n  ...props\n}) => {\n  console.log(`UPDATE ${url}`, { url, ...props });\n\n  return delay(500).then(() => ({\n    data: generateBaseData(id + 1)[id],\n    status: 200,\n    error: '',\n  }));\n};\n\nexport const deleteFeature: FeatureApiMethodDelete<IFields> = async ({\n  url,\n  id,\n  ...props\n}) => {\n  console.log(`DELETE ${url}`, { url, ...props });\n\n  return delay(500).then(() => {});\n};\n\nexport const getRolesAll: FeatureReferenceFetchAll = async (props) => {\n  await delay(1000);\n\n  console.log(`REFERENCE ${props.url}`, props);\n\n  return {\n    10: 'User',\n    20: 'Manager',\n    30: 'Admin',\n  };\n};\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { FeatureField } from '../../../application/modules/pages/Feature/fields/FeatureField';\nimport { IFields } from './index';\nimport { DateField } from '../../../application/modules/pages/Feature/fields/DateField';\nimport { IntegerField } from '../../../application/modules/pages/Feature/fields/IntegerField';\nimport { SelectField } from '../../../application/modules/pages/Feature/fields/SelectField';\nimport { ReferenceField } from '../../../application/modules/pages/Feature/fields/ReferenceField';\nimport { StringField } from '../../../application';\n\nexport const FEATURE_FIELDS = [\n  new FeatureField<IFields, string>('name', {\n    label: 'Имя',\n    features: {\n      sort: true,\n      filter: false,\n    },\n  }),\n  new IntegerField<IFields>('age', {\n    label: 'Возраст',\n    accuracy: 2,\n    features: {\n      sort: true,\n      filter: true,\n    },\n    defaultValue: 21,\n  }),\n  new ReferenceField<IFields, number>('role', {\n    label: 'Роль',\n    features: {\n      sort: true,\n      filter: true,\n    },\n    dependencies: ['age'],\n  }),\n  new SelectField<IFields, number>('status', {\n    label: 'Статус',\n    options: {\n      10: 'Активен',\n      20: 'Неактивен',\n      30: 'Заблокирован',\n    },\n    features: {\n      sort: true,\n      filter: true,\n    },\n  }),\n  new DateField<IFields>('birthDate', {\n    label: 'Дата рождения',\n    features: {\n      sort: true,\n      filter: true,\n    },\n  }),\n  new FeatureField<IFields, string>('description', {\n    label: 'Описание',\n    features: {\n      sort: true,\n      filter: true,\n    },\n  }),\n  new IntegerField<IFields>('index', {\n    path: ['nested'],\n    label: 'Nested index',\n  }),\n  new StringField<IFields>('value', {\n    path: ['nested'],\n    label: 'Nested value',\n  }),\n];\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport { Feature } from '~/application';\nimport {\n  createFeature,\n  deleteFeature,\n  getFeature,\n  getFeatureList,\n  getRolesAll,\n  updateFeature,\n} from './api';\nimport { FEATURE_FIELDS } from './fields';\n\nexport type IFields = {\n  id: number;\n  name: string;\n  age: number;\n  role: number;\n  status: number;\n  birthDate: string;\n  description: string;\n  nested: {\n    index: number;\n    value: string;\n  };\n};\n\nexport default new Feature<IFields>('Experimental: Feature', '/feature', {\n  getItemTitle: (data) => data.name,\n  fields: FEATURE_FIELDS,\n  api: {\n    methods: {\n      list: getFeatureList,\n      read: getFeature,\n      create: createFeature,\n      update: updateFeature,\n      delete: deleteFeature,\n    },\n    urls: {\n      list: '/test',\n    },\n    references: {\n      role: {\n        url: '/test/',\n        all: getRolesAll,\n      },\n    },\n  },\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport { Config } from '~/application';\nimport logo from './assets/logo512.png';\nimport entity from './pages/entity';\nimport page from './pages/page';\nimport pageHidden from './pages/page-hidden';\nimport pageAdminOnly from './pages/page-admin-only';\nimport pageUserOnly from './pages/page-user-only';\nimport pageAdminAndUser from './pages/page-admin-and-user';\nimport jwtAuth from './auth/jwt';\nimport custom from './pages/custom';\nimport feature from './pages/feature';\n\nexport default new Config({\n  logo,\n  host: 'https://sample.org',\n  auth: jwtAuth,\n  pages: [page, pageHidden, pageAdminOnly, pageUserOnly, pageAdminAndUser, entity, custom, feature],\n  i18nDefaultLanguage: \"en\",\n  i18nLanguages: [\"en\", \"ru\", \"es\"],\n  i18nUseBrowserLanguageDetector: true,\n  i18nResourcesContext: require.context('~/example/locales', true, /\\.json$/)\n});\n","/* Copyright (c) 2020-2021 IceRock MAG Inc. Use of this source code is governed by the Apache 2.0 license. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Application } from './application';\nimport example from './example';\n\nReactDOM.render(\n  <Application config={example}/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}